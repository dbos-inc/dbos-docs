---
sidebar_position: 20
title: OpenAPI Support
description: Learn how to automatically generate clients for Operon applications.
---

## OpenAPI-based Operon Application Clients

[Operon CLI](../api-reference/cli.md) v0.6 adds the `openapi` command that generates an [OpenAPI 3.0.3](https://www.openapis.org/) definition file for a Operon application.
This definition file can be used to automatically generate strongly typed client code to invoke Operon endpoints.


### Generate OpenAPI Definition File

To generate a OpenAPI definition file for an Operon application, run the following `operon` cli command:

``` shell
npx operon openapi src/operations.ts
```

This command takes a single required argument - the path to the Operon applications TypeScript entrypoint file. 
For Operon applications generated by [`operon init`](../api-reference/cli.md#npx-operon-init), the entrypoint will be `src/operations.ts`.

> Note, this is slightly different from the [`runtimeConfig.entrypoint](../api-reference/configuration.md#runtime) config setting.
> The `operon openapi` argument references teh TypeScript entrypoint file.
> The `runtimeConfig.entrypoint` setting references the JavaScript file generated from the TypeScript entrypoint file.

The `operon openapi` command generates an OpenAPI definition file `openapi.yaml` in the same folder as the entrypoint file.

### Generate Client Code From OpenAPI Definition

Multiple vendors provide OpenAPI client generators that will work with an Operon OpenAPI declaration file.
Each of these vendors have tools and documentation for generating client code for a variety of languages and runtimes.
Some of these tools include:

* [Microsoft Kiota](https://learn.microsoft.com/en-us/openapi/kiota/overview)
* [OpenAPI Generator](https://openapi-generator.tech/)
* [Swagger CodeGen](https://swagger.io/tools/swagger-codegen/)
* [Swagger Editor](https://editor.swagger.io/)

We can't provide tutorials for all of these OpenAPI generator tools, the Swagger Online Editor runs completely in the browser 
so is straightforward to use for a simple tutorial

First, you need to run `operon openapi` against your Operon application entrypoint as described above.

> Note, the shop and payment backend applications from the [Operon E-Commerce demo app](./demo-apps.md#e-commerce)  
> include generated OpenApi definition files if you want to try this without creating your own Operon application.
> The code below 

Then, copy and paste the contents of the generated `openapi.yaml` file into Swagger Editor at https://editor.swagger.io/.
Swagger Editor will validate the OpenAPI definitions and render a documentation page for the api.

> Note, the Swagger Editor includes tooling to trigger api endpoints from directly in the web page. 
> These will not work as the OpenApi definition generated by Operon does not include server url information.

At the top of the Swagger Editor, there is a "Generate Client" dropdown menu. Select typescript-axios from the menu. 
This will download a zip file containing a TypeScript package with the code generated from the OpenAPI definition.

The typescript-axios Swagger generator generates a full TypeScript package that supports `npm install` and `npm run build`.
Typically, you would incorporate the generated code into an existing client projects that needs to call into the Operon application.

Here is some example code using the typescript-axios Swagger generator and the OpenAPI definition for the 
[E-Commerce Demo Shop Operon application](https://github.com/dbos-inc/operon-demo-apps/tree/main/e-commerce/shop-backend).


```ts
import { Configuration, DefaultApi } from "./index";

const config = new Configuration({
    basePath: "http://localhost:8082"
});

const api = new DefaultApi(config);

async function main() {
    const response = await api.getProducts();
    for (const product of response.data) {
        console.log(product.description);
    }
}

main();
```

> Note, as per above the generated OpenAPI definition does not include the Operon applications base url.
> This must be included via configuration regardless of the OpenAPI generator you choose to use.


