<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-golang/prompting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">AI Model Prompting | DBOS Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.dbos.dev/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.dbos.dev/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.dbos.dev/golang/prompting"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="AI Model Prompting | DBOS Docs"><meta data-rh="true" name="description" content="You may want assistance from an AI model in building a DBOS application."><meta data-rh="true" property="og:description" content="You may want assistance from an AI model in building a DBOS application."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.dbos.dev/golang/prompting"><link data-rh="true" rel="alternate" href="https://docs.dbos.dev/golang/prompting" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.dbos.dev/golang/prompting" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UY2VKOMIL2-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"AI Model Prompting","item":"https://docs.dbos.dev/golang/prompting"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="DBOS Docs" href="/opensearch.xml">


<link rel="preconnect" href="https://dbosdev.matomo.cloud/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://dbosdev.matomo.cloud/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script>

<link rel="preconnect" href="https://d2j9bas80r5yfz.cloudfront.net">
<script>!function(t,e){var o,r,s,a;e.__SV||(window.posthog=e,e._i=[],e.init=function(n,i,p){function c(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(s=t.createElement("script")).type="text/javascript",s.async=!0,s.src=i.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(a=t.getElementsByTagName("script")[0]).parentNode.insertBefore(s,a);var g=e;for(void 0!==p?g=e[p]=[]:p="posthog",g.people=g.people||[],g.toString=function(t){var e="posthog";return"posthog"!==p&&(e+="."+p),t||(e+=" (stub)"),e},g.people.toString=function(){return g.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys onSessionId".split(" "),r=0;r<o.length;r++)c(g,o[r]);e._i.push([n,i,p])},e.__SV=1)}(document,window.posthog||[]),posthog.init("phc_vKGgPmFevFB3QVyqZdIZeNqcWAPqk3i3mDhwGqwk6nP",{api_host:"https://d2j9bas80r5yfz.cloudfront.net",id:"default"})</script>
<script async defer="defer" id="hs-script-loader" src="//js.hs-scripts.com/45237820.js"></script>
<script src="/scripts/reo.js"></script><link rel="stylesheet" href="/assets/css/styles.292b392a.css">
<script src="/assets/js/runtime~main.5e7ef280.js" defer="defer"></script>
<script src="/assets/js/main.bc1922d7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://dbos.dev" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/dbos-logo.png" alt="DBOS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/dbos-logo-dark.png" alt="DBOS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a class="navbar__item navbar__link" href="/quickstart">Quickstart</a><a class="navbar__item navbar__link" href="/examples">Examples</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://console.dbos.dev/login-redirect" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link dbos-button-blue">DBOS Console</a><a href="https://github.com/dbos-inc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/"><span title="Home" class="linkLabel_WmDU">Home</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quickstart"><span title="Get Started" class="linkLabel_WmDU">Get Started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/why-dbos"><span title="Why DBOS?" class="linkLabel_WmDU">Why DBOS?</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/architecture"><span title="DBOS Architecture" class="linkLabel_WmDU">DBOS Architecture</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/python/programming-guide"><span title="Develop with Python" class="categoryLinkLabel_W154">Develop with Python</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/typescript/programming-guide"><span title="Develop with TypeScript" class="categoryLinkLabel_W154">Develop with TypeScript</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/golang/programming-guide"><span title="Develop with Go" class="categoryLinkLabel_W154">Develop with Go</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/golang/programming-guide"><span title="Learn DBOS Go" class="linkLabel_WmDU">Learn DBOS Go</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/golang/integrating-dbos"><span title="Add DBOS To Your App" class="linkLabel_WmDU">Add DBOS To Your App</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/golang/prompting"><span title="AI Model Prompting" class="linkLabel_WmDU">AI Model Prompting</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/golang/tutorials/workflow-tutorial"><span title="Tutorials" class="categoryLinkLabel_W154">Tutorials</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/golang/reference/dbos-context"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/golang/examples/widget-store"><span title="Example Applications" class="categoryLinkLabel_W154">Example Applications</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/java/programming-guide"><span title="Develop with Java" class="categoryLinkLabel_W154">Develop with Java</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/production/conductor"><span title="Deploy To Production" class="categoryLinkLabel_W154">Deploy To Production</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/integrations/supabase"><span title="Integrations" class="categoryLinkLabel_W154">Integrations</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/explanations/system-tables"><span title="Concepts and Explanations" class="categoryLinkLabel_W154">Concepts and Explanations</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/faq"><span title="Troubleshooting &amp; FAQ" class="linkLabel_WmDU">Troubleshooting &amp; FAQ</span></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Develop with Go</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">AI Model Prompting</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>AI Model Prompting</h1></header><p>You may want assistance from an AI model in building a DBOS application.
To make sure your model has the latest information on how to use DBOS, provide it with this prompt.</p>
<p>You may also want to use the <a class="" href="/production/mcp">DBOS MCP server</a> so your model can directly access your application&#x27;s workflows and steps.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-to-use">How To Use<a href="#how-to-use" class="hash-link" aria-label="Direct link to How To Use" title="Direct link to How To Use" translate="no">​</a></h2>
<p>First, use the click-to-copy button in the top right of the code block to copy the full prompt to your clipboard.
Then, paste into your AI tool of choice (for example OpenAI&#x27;s ChatGPT or Anthropic&#x27;s Claude).
This adds the prompt to your AI model&#x27;s context, giving it up-to-date instructions on how to build an application with DBOS.</p>
<p>If you are using an AI-powered IDE, you can add this prompt to your project&#x27;s context.
For example:</p>
<ul>
<li class="">Claude Code: Add the prompt, or a link to it, to your CLAUDE.md file.</li>
<li class="">Cursor: Add the prompt to <a href="https://docs.cursor.com/context/rules-for-ai" target="_blank" rel="noopener noreferrer" class="">your project rules</a>.</li>
<li class="">Zed: Copy the prompt to a file in your project, then use the <a href="https://zed.dev/docs/assistant/commands?highlight=%2Ffile#file" target="_blank" rel="noopener noreferrer" class=""><code>/file</code></a> command to add the file to your context.</li>
<li class="">GitHub Copilot: Create a <a href="https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot" target="_blank" rel="noopener noreferrer" class=""><code>.github/copilot-instructions.md</code></a> file in your repository and add the prompt to it.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prompt">Prompt<a href="#prompt" class="hash-link" aria-label="Direct link to Prompt" title="Direct link to Prompt" translate="no">​</a></h2>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token title important punctuation" style="color:#f8f8f2">#</span><span class="token title important"> Build Reliable Applications With DBOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Guidelines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Respond in a friendly and concise manner</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Ask clarifying questions when requirements are ambiguous</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Generate code in Golang using the DBOS library.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> You MUST import everything used in the code you generate</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> You SHALL keep all code in a single file unless otherwise specified.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> DBOS does NOT stand for anything.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Guidelines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows provide durable execution so you can write programs that are resilient to any failure.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows are comprised of steps, which are ordinary Golang functions called with dbos.RunAsStep.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When using DBOS workflows, you should call any function that performs complex operations or accesses external APIs or services as a step using dbos.RunAsStep.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If a workflow is interrupted for any reason (e.g., an executor restarts or crashes), when your program restarts the workflow automatically resumes execution from the last completed step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> If asked to add DBOS to existing code, you MUST ask which function to make a workflow. Do NOT recommend any changes until they have told you what function to make a workflow. Do NOT make a function a workflow unless SPECIFICALLY requested.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> When making a function a workflow, you should make all functions it calls steps. Do NOT change the functions in any way.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Do NOT make functions steps unless they are DIRECTLY called by a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> If the workflow function performs a non-deterministic action, you MUST move that action to its own function and make that function a step. Examples of non-deterministic actions include accessing an external API or service, accessing files on disk, generating a random number, of getting the current time.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Do NOT start goroutines from workflows or use select in workflows. Instead, use DBOS&#x27;s durable </span><span class="token code-snippet code keyword" style="color:#66d9ef">`dbos.Go`</span><span class="token plain"> and </span><span class="token code-snippet code keyword" style="color:#66d9ef">`dbos.Select`</span><span class="token plain"> functions which provide deterministic replay. For more complex parallel execution, use DBOS.RunWorkflow and DBOS queues.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> DBOS workflows and steps should NOT have side effects in memory outside of their own scope. They can access global variables, but they should NOT create or update global variables or variables outside their scope.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Do NOT call any DBOS context method (DBOS.Send, DBOS.Recv, DBOS.RunWorkflow, DBOS.RunAsStep, DBOS.Sleep, DBOS.SetEvent, DBOS.GetEvent) from a step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> DBOS Lifecycle Guidelines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">DBOS should be installed and imported from the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`github.com/dbos-inc/dbos-transact-golang/dbos`</span><span class="token plain"> package.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">DBOS programs MUST have a main file (typically &#x27;main.go&#x27;) that creates all objects and workflow functions during startup.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Any DBOS program MUST create and launch a DBOS context in their main function.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">All workflows must be registered and queues created BEFORE DBOS is launched</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbosContext, err := dbos.NewDBOSContext(context.Background(), dbos.Config{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        AppName:     &quot;dbos-starter&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        DatabaseURL: os.Getenv(&quot;DBOS_SYSTEM_DATABASE_URL&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    })</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Initializing DBOS failed: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.RegisterWorkflow(dbosContext, workflow)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    err = dbos.Launch(dbosContext)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Launching DBOS failed: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    defer dbos.Shutdown(dbosContext, 5 * time.Second)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Here is an example main function using Gin:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">import (</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;context&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;fmt&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;net/http&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;os&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;time&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;github.com/dbos-inc/dbos-transact-golang/dbos&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;github.com/gin-gonic/gin&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbosContext, err := dbos.NewDBOSContext(context.Background(), dbos.Config{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        AppName:     &quot;dbos-starter&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        DatabaseURL: os.Getenv(&quot;DBOS_SYSTEM_DATABASE_URL&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    })</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Initializing DBOS failed: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.RegisterWorkflow(dbosContext, workflow)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    err = dbos.Launch(dbosContext)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Launching DBOS failed: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    defer dbos.Shutdown(dbosContext, 5 * time.Second)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    r := gin.Default()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    r.GET(&quot;/&quot;, func(c *gin.Context) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        handle, err := dbos.RunWorkflow(dbosContext, workflow, &quot;&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            c.JSON(http.StatusInternalServerError, gin.H{&quot;error&quot;: fmt.Sprintf(&quot;Error in DBOS workflow: %v&quot;, err)})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            c.JSON(http.StatusInternalServerError, gin.H{&quot;error&quot;: fmt.Sprintf(&quot;Error in DBOS workflow: %v&quot;, err)})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        c.JSON(http.StatusOK, gin.H{&quot;result&quot;: result})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    })</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    r.Run(&quot;:8080&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow and Steps Examples</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Simple example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go showLineNumbers title=&quot;main.go&quot;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">package main</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">import (</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;context&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;fmt&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;os&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;time&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;github.com/dbos-inc/dbos-transact-golang/dbos&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func workflow(ctx dbos.DBOSContext, _ string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    _, err := dbos.RunAsStep(ctx, stepOne)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;failure&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    _, err = dbos.RunAsStep(ctx, stepTwo)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;failure&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;success&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func stepOne(ctx context.Context) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Step one completed&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;success&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func stepTwo(ctx context.Context) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Step two completed&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;success&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbosContext, err := dbos.NewDBOSContext(context.Background(), dbos.Config{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        AppName:     &quot;dbos-starter&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        DatabaseURL: os.Getenv(&quot;DBOS_SYSTEM_DATABASE_URL&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    })</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Initializing DBOS failed: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.RegisterWorkflow(dbosContext, workflow)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    err = dbos.Launch(dbosContext)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Launching DBOS failed: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    defer dbos.Shutdown(dbosContext, 5 * time.Second)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handle, err := dbos.RunWorkflow(dbosContext, workflow, &quot;&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Error in DBOS workflow: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Error in DBOS workflow: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Workflow result:&quot;, result)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Example with Gin:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go showLineNumbers title=&quot;main.go&quot;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">package main</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">import (</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;context&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;fmt&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;net/http&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;os&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;time&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;github.com/dbos-inc/dbos-transact-golang/dbos&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;github.com/gin-gonic/gin&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func workflow(ctx dbos.DBOSContext, _ string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    _, err := dbos.RunAsStep(ctx, stepOne)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;failure&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    for range 5 {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        fmt.Println(&quot;Press Control + C to stop the app...&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.Sleep(ctx, time.Second)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    _, err = dbos.RunAsStep(ctx, stepTwo)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;failure&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;success&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func stepOne(ctx context.Context) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Step one completed&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;success&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func stepTwo(ctx context.Context) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Step two completed&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;success&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbosContext, err := dbos.NewDBOSContext(context.Background(), dbos.Config{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        AppName:     &quot;dbos-starter&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        DatabaseURL: os.Getenv(&quot;DBOS_SYSTEM_DATABASE_URL&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    })</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Initializing DBOS failed: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.RegisterWorkflow(dbosContext, workflow)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    err = dbos.Launch(dbosContext)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Launching DBOS failed: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    defer dbos.Shutdown(dbosContext, 5 * time.Second)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    r := gin.Default()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    r.GET(&quot;/&quot;, func(c *gin.Context) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        handle, err := dbos.RunWorkflow(dbosContext, workflow, &quot;&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            c.JSON(http.StatusInternalServerError, gin.H{&quot;error&quot;: fmt.Sprintf(&quot;Error in DBOS workflow: %v&quot;, err)})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            c.JSON(http.StatusInternalServerError, gin.H{&quot;error&quot;: fmt.Sprintf(&quot;Error in DBOS workflow: %v&quot;, err)})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        c.JSON(http.StatusOK, gin.H{&quot;result&quot;: result})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    })</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    r.Run(&quot;:8080&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Example with queues:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go showLineNumbers title=&quot;main.go&quot;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">package main</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">import (</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;context&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;fmt&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;net/http&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;os&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;time&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;github.com/dbos-inc/dbos-transact-golang/dbos&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;github.com/gin-gonic/gin&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func taskWorkflow(ctx dbos.DBOSContext, i int) (int, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.Sleep(ctx, 5*time.Second)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Printf(&quot;Task %d completed\n&quot;, i)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return i, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func queueWorkflow(ctx dbos.DBOSContext, queue dbos.WorkflowQueue) (int, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Enqueuing tasks&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handles := make([]dbos.WorkflowHandle[int], 10)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    for i := range 10 {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        handle, err := dbos.RunWorkflow(ctx, taskWorkflow, i, dbos.WithQueue(queue.Name))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return 0, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        handles[i] = handle</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    results := make([]int, 10)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    for i, handle := range handles {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return 0, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        results[i] = result</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Printf(&quot;Successfully completed %d tasks\n&quot;, len(results))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return len(results), nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbosContext, err := dbos.NewDBOSContext(context.Background(), dbos.Config{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        AppName:     &quot;dbos-starter&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        DatabaseURL: os.Getenv(&quot;DBOS_SYSTEM_DATABASE_URL&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    })</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Initializing DBOS failed: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    queue := dbos.NewWorkflowQueue(dbosContext, &quot;queue&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.RegisterWorkflow(dbosContext, queueWorkflow)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.RegisterWorkflow(dbosContext, taskWorkflow)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    err = dbos.Launch(dbosContext)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        panic(fmt.Sprintf(&quot;Launching DBOS failed: %v&quot;, err))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    defer dbos.Shutdown(dbosContext, 5 * time.Second)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    r := gin.Default()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    r.GET(&quot;/&quot;, func(c *gin.Context) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        handle, err := dbos.RunWorkflow(dbosContext, queueWorkflow, queue)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            c.JSON(http.StatusInternalServerError, gin.H{&quot;error&quot;: fmt.Sprintf(&quot;Error in DBOS workflow: %v&quot;, err)})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            c.JSON(http.StatusInternalServerError, gin.H{&quot;error&quot;: fmt.Sprintf(&quot;Error in DBOS workflow: %v&quot;, err)})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        c.JSON(http.StatusOK, gin.H{&quot;result&quot;: result})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    })</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    r.Run(&quot;:8080&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Documentation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows provide </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">durable execution</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> so you can write programs that are </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">resilient to any failure</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows are comprised of steps, which wrap ordinary Go functions.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If a workflow is interrupted for any reason (e.g., an executor restarts or crashes), when your program restarts the workflow automatically resumes execution from the last completed step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To write a workflow, register a Go function with </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RegisterWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflow registration must happen before launching the DBOS context with </span><span class="token code-snippet code keyword" style="color:#66d9ef">`dbos.Launch()`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The function&#x27;s signature must match:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type Workflow[P any, R any] func(ctx DBOSContext, input P) (R, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">In other words, a workflow must take in a DBOS context and one other input of any serializable (json-encodable) type and must return one output of any serializable type and error.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func stepOne(ctx context.Context) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Step one completed&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;success&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func stepTwo(ctx context.Context) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Step two completed&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;success&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func workflow(ctx dbos.DBOSContext, _ string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    _, err := dbos.RunAsStep(ctx, stepOne)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;failure&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    _, err = dbos.RunAsStep(ctx, stepTwo)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;failure&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;success&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ... // Create the DBOS context</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.RegisterWorkflow(dbosContext, workflow)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ... // Launch DBOS after registering all workflows</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Call workflows with </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RunWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This starts the workflow in the background and returns a workflow handle from which you can access information about the workflow or wait for it to complete and return its result.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Here&#x27;s an example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func runWorkflowExample(dbosContext dbos.DBOSContext, input string) error {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handle, err := dbos.RunWorkflow(dbosContext, workflow, input)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Workflow result:&quot;, result)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Workflow IDs and Idempotency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Every time you execute a workflow, that execution is assigned a unique ID, by default a UUID.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can access this ID through </span><span class="token code-snippet code keyword" style="color:#66d9ef">`GetWorkflowID`</span><span class="token plain">, or from the handle&#x27;s </span><span class="token code-snippet code keyword" style="color:#66d9ef">`GetWorkflowID`</span><span class="token plain"> method.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflow IDs are useful for communicating with workflows and developing interactive workflows.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can set the workflow ID of a workflow using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithWorkflowID`</span><span class="token plain"> when calling </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RunWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflow IDs must be </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">globally unique</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> for your application.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">An assigned workflow ID acts as an idempotency key: if a workflow is called multiple times with the same ID, it executes only once.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is useful if your operations have side effects like making a payment or sending an email.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func exampleWorkflow(ctx dbos.DBOSContext, input string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    workflowID, err := dbos.GetWorkflowID(ctx)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Printf(&quot;Running workflow with ID: %s\n&quot;, workflowID)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;success&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func example(dbosContext dbos.DBOSContext, input string) error {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    myID := &quot;unique-workflow-id-123&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handle, err := dbos.RunWorkflow(dbosContext, exampleWorkflow, input, dbos.WithWorkflowID(myID))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        log.Fatal(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        log.Fatal(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Result:&quot;, result)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Determinism</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows are in most respects normal Go functions.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">They can have loops, branches, conditionals, and so on.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">However, a workflow function must be </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">deterministic</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: if called multiple times with the same inputs, it should invoke the same steps with the same inputs in the same order (given the same return values from those steps).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If you need to perform a non-deterministic operation like accessing the database, calling a third-party API, generating a random number, or getting the local time, you shouldn&#x27;t do it directly in a workflow function.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Instead, you should do all non-deterministic operations in steps.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::warning</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Go&#x27;s goroutine scheduler and </span><span class="token code-snippet code keyword" style="color:#66d9ef">`select`</span><span class="token plain"> operation are non-deterministic. You should use them only inside steps, or use the durable </span><span class="token code-snippet code keyword" style="color:#66d9ef">`dbos.Go`</span><span class="token plain"> and </span><span class="token code-snippet code keyword" style="color:#66d9ef">`dbos.Select`</span><span class="token plain"> functions instead.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">don&#x27;t do this</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func exampleWorkflow(ctx dbos.DBOSContext, input string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    randomChoice := rand.Intn(2)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if randomChoice == 0 {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return dbos.RunAsStep(ctx, stepOne)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    } else {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return dbos.RunAsStep(ctx, stepTwo)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Instead, do this:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func generateChoice(ctx context.Context) (int, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return rand.Intn(2), nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func exampleWorkflow(ctx dbos.DBOSContext, input string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    randomChoice, err := dbos.RunAsStep(ctx, generateChoice)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if randomChoice == 0 {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return dbos.RunAsStep(ctx, stepOne)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    } else {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return dbos.RunAsStep(ctx, stepTwo)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Workflow Timeouts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can set a timeout for a workflow using its input </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSContext`</span><span class="token plain">. Use </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithTimeout`</span><span class="token plain"> to obtain a cancellable </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSContext`</span><span class="token plain">, as you would with a normal </span><span class="token code-snippet code keyword" style="color:#66d9ef">`context.Context`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When the timeout expires, the workflow and all its children are cancelled. Cancelling a workflow sets its status to CANCELLED and preempts its execution at the beginning of its next step. You can detach a child workflow by passing it an uncancellable context, which you can obtain with </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithoutCancel`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Timeouts are </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">start-to-completion</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: if a workflow is enqueued, the timeout does not begin until the workflow is dequeued and starts execution. Also, timeouts are durable: they are stored in the database and persist across restarts, so workflows can have very long timeouts.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func exampleWorkflow(ctx dbos.DBOSContext, input string) (string, error) {}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">timeoutCtx, cancelFunc := dbos.WithTimeout(dbosCtx, 12*time.Hour)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">handle, err := dbos.RunWorkflow(timeoutCtx, exampleWorkflow, &quot;wait-for-cancel&quot;)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can also manually cancel the workflow by calling its </span><span class="token code-snippet code keyword" style="color:#66d9ef">`cancel`</span><span class="token plain"> function (or calling CancelWorkflow).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Durable Sleep</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Sleep`</span><span class="token plain"> to put your workflow to sleep for any period of time.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This sleep is </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">durable</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token entity named-entity">&amp;mdash;</span><span class="token plain">DBOS saves the wakeup time in the database so that even if the workflow is interrupted and restarted multiple times while sleeping, it still wakes up on schedule.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Sleeping is useful for scheduling a workflow to run in the future (even days, weeks, or months from now).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func exampleWorkflow(ctx dbos.DBOSContext, input struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	TimeToSleep time.Duration</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	Task        string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	// Sleep for the specified duration</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	_, err := dbos.Sleep(ctx, input.TimeToSleep)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">		return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	// Execute the task after sleeping</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	result, err := dbos.RunAsStep(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">		ctx,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">		func(stepCtx context.Context) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">			return fmt.Sprintf(&quot;Completed: %s&quot;, input.Task), nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">		},</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">		return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">	return result, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go"></span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Concurrent Steps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">DBOS provides durable </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Go`</span><span class="token plain"> and </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Select`</span><span class="token plain"> functions to run multiple steps concurrently within a workflow while preserving durability guarantees.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">These are durable alternatives to Go&#x27;s native goroutines and </span><span class="token code-snippet code keyword" style="color:#66d9ef">`select`</span><span class="token plain"> statement.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`Go`</span><span class="token plain"> launches a step asynchronously and returns a channel that will receive the result when the step completes.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`Select`</span><span class="token plain"> waits for the first result from multiple concurrent steps.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func workflow(ctx dbos.DBOSContext, _ string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Launch two concurrent steps</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ch1, err := dbos.Go(ctx, func(ctx context.Context) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return queryServiceA(ctx)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    })</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ch2, err := dbos.Go(ctx, func(ctx context.Context) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return queryServiceB(ctx)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    })</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Wait for the first result</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    result, err := dbos.Select(ctx, []&lt;-chan dbos.StepOutcome[string]{ch1, ch2})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return result, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Scheduled Workflows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can schedule workflows to run automatically at specified times using cron syntax with seconds precision.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Scheduled workflows are useful for running recurring tasks like data backups, report generation, or cleanup operations.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To create a scheduled workflow, use </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithSchedule`</span><span class="token plain"> when registering your workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The workflow must have a single </span><span class="token code-snippet code keyword" style="color:#66d9ef">`time.Time`</span><span class="token plain"> input parameter, representing the scheduled execution time.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Example syntax:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func frequentTask(ctx dbos.DBOSContext, scheduledTime time.Time) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Printf(&quot;Performing a scheduled task at: %s\n&quot;, scheduledTime.Format(time.RFC3339))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ... // Perform a scheduled task operations</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return result, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func dailyBackup(ctx dbos.DBOSContext, scheduledTime time.Time) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Printf(&quot;Running daily backup at: %s\n&quot;, scheduledTime.Format(time.RFC3339))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ... // Perform daily backup operations</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return result, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbosContext := ... // Initialize DBOS</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Register a workflow to run daily at 2:00 AM</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.RegisterWorkflow(dbosContext, dailyBackup,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithSchedule(&quot;0 0 2 * * *&quot;)) // Cron: daily at 2:00 AM</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Register a workflow to run every 15 minutes</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.RegisterWorkflow(dbosContext, frequentTask,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithSchedule(&quot;0 */15 * * * * &quot;)) // Cron: every 15 minutes</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Launch DBOS - scheduled workflows will start automatically</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    err := dbos.Launch(dbosContext)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        log.Fatal(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Workflow Versioning and Recovery</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Because DBOS recovers workflows by re-executing them using information saved in the database, a workflow cannot safely be recovered if its code has changed since the workflow was started.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To guard against this, DBOS </span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token italic content">versions</span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token plain"> applications and their workflows.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When DBOS is launched, it computes an application version from a hash of the application source code (this can be overridden through configuration).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">All workflows are tagged with the application version on which they started.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When DBOS tries to recover workflows, it only recovers workflows whose version matches the current application version.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This prevents unsafe recovery of workflows that depend on different code.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You cannot change the version of a workflow, but you can use </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ForkWorkflow`</span><span class="token plain"> to restart a workflow from a specific step on a specific code version.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For more information on managing workflow recovery when self-hosting production DBOS applications, check out the guide.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Workflow Attempts and Recovery</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Attempts`</span><span class="token plain"> field in </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WorkflowStatus`</span><span class="token plain"> tracks how many times a workflow has been executed.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> On first execution, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Attempts`</span><span class="token plain"> is set to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`1`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> If the workflow is enqueued but not yet dequeued, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Attempts`</span><span class="token plain"> is </span><span class="token code-snippet code keyword" style="color:#66d9ef">`0`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Each time the workflow is recovered (e.g., after a crash) or dequeued for execution, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Attempts`</span><span class="token plain"> is incremented by </span><span class="token code-snippet code keyword" style="color:#66d9ef">`1`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can limit the number of attempts using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithMaxRetries`</span><span class="token plain"> when registering a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithMaxRetries(n)`</span><span class="token plain"> is set, the workflow may be attempted at most </span><span class="token code-snippet code keyword" style="color:#66d9ef">`n + 1`</span><span class="token plain"> times (one initial execution plus </span><span class="token code-snippet code keyword" style="color:#66d9ef">`n`</span><span class="token plain"> retries).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If this limit is exceeded, the workflow&#x27;s status is set to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`MAX_RECOVERY_ATTEMPTS_EXCEEDED`</span><span class="token plain"> and it will no longer be recovered automatically.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ResumeWorkflow`</span><span class="token plain"> to manually resume a workflow that has exceeded its maximum attempts after fixing the underlying issue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">// Register a workflow that can be attempted at most 4 times (1 initial + 3 retries)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">dbos.RegisterWorkflow(dbosContext, myWorkflow, dbos.WithMaxRetries(3))</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Steps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When using DBOS workflows, you should call any function that performs complex operations or accesses external APIs or services as a </span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token italic content">step</span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If a workflow is interrupted, upon restart it automatically resumes execution from the </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">last completed step</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RunAsStep`</span><span class="token plain"> to call a function as a step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For a function to be used as a step, it should return a serializable (json-encodable) value and an error and have this signature:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type Step[R any] func(ctx context.Context) (R, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Here&#x27;s a simple example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func generateRandomNumber(ctx context.Context) (int, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return rand.Int(), nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func workflowFunction(ctx dbos.DBOSContext, n int) (int, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    randomNumber, err := dbos.RunAsStep(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        ctx,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        generateRandomNumber,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithStepName(&quot;generateRandomNumber&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    )</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return 0, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return randomNumber, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can pass arguments into a step by wrapping it in an anonymous function, like this:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func generateRandomNumber(ctx context.Context, n int) (int, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return rand.IntN(n), nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func workflowFunction(ctx dbos.DBOSContext, n int) (int, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    randomNumber, err := dbos.RunAsStep(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        ctx,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        func(stepCtx context.Context) (int, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return generateRandomNumber(stepCtx, n)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        },</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithStepName(&quot;generateRandomNumber&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    )</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return 0, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return randomNumber, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You should make a function a step if you&#x27;re using it in a DBOS workflow and it performs a </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">nondeterministic</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> operation.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">A nondeterministic operation is one that may return different outputs given the same inputs.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Common nondeterministic operations include:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Accessing an external API or service, like serving a file from AWS S3, calling an external API like Stripe, or accessing an external data store like Elasticsearch.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Accessing files on disk.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Generating a random number.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Getting the current time.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">cannot</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> call, start, or enqueue workflows from within steps.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You also cannot call DBOS methods like </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Send`</span><span class="token plain"> or </span><span class="token code-snippet code keyword" style="color:#66d9ef">`SetEvent`</span><span class="token plain"> from within steps.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">These operations should be performed from workflow functions.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can call one step from another step, but the called step becomes part of the calling step&#x27;s execution rather than functioning as a separate step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Configurable Retries</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can optionally configure a step to automatically retry any error a set number of times with exponential backoff.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is useful for automatically handling transient failures, like making requests to unreliable APIs.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retries are configurable through step options that can be passed to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RunAsStep`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Available retry configuration options include:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithStepName`</span><span class="token plain"> - Custom name for the step (default to the Go runtime reflection value)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithStepMaxRetries`</span><span class="token plain"> - Maximum number of times this step is automatically retried on failure (default 0)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithMaxInterval`</span><span class="token plain"> - Maximum delay between retries (default 5s)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithBackoffFactor`</span><span class="token plain"> - Exponential backoff multiplier between retries (default 2.0)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithBaseInterval`</span><span class="token plain"> - Initial delay between retries (default 100ms)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, let&#x27;s configure this step to retry failures (such as if the site to be fetched is temporarily down) up to 10 times:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func fetchStep(ctx context.Context, url string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    resp, err := http.Get(url)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    defer resp.Body.Close()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    body, err := io.ReadAll(resp.Body)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return string(body), nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func fetchWorkflow(ctx dbos.DBOSContext, inputURL string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return dbos.RunAsStep(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        ctx,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        func(stepCtx context.Context) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return fetchStep(stepCtx, inputURL)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        },</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithStepName(&quot;fetchFunction&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithStepMaxRetries(10),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithMaxInterval(30*time.Second),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithBackoffFactor(2.0),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithBaseInterval(500*time.Millisecond),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    )</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If a step exhausts all retry attempts, it returns an error to the calling workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Communication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">DBOS provides a few different ways to communicate with your workflows.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Send messages to workflows</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Publish events from workflows for clients to read</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Stream values from workflows to clients</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Workflow Messaging and Notifications</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can send messages to a specific workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is useful for signaling a workflow or sending notifications to it while it&#x27;s running.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">&lt;img src={require(&#x27;@site/static/img/workflow-communication/workflow-messages.png&#x27;).default} alt=&quot;DBOS Steps&quot; width=&quot;750&quot; className=&quot;custom-img&quot;/&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Send</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func Send[P any](ctx DBOSContext, destinationID string, message P, topic string) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can call </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Send()`</span><span class="token plain"> to send a message to a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Messages can optionally be associated with a topic and are queued on the receiver per topic.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Recv</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func Recv[R any](ctx DBOSContext, topic string, timeout time.Duration) (R, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows can call </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Recv()`</span><span class="token plain"> to receive messages sent to them, optionally for a particular topic.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Each call to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Recv()`</span><span class="token plain"> waits for and consumes the next message to arrive in the queue for the specified topic, returning an error if the wait times out.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If the topic is not specified, this method only receives messages sent without a topic.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Messages Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Messages are especially useful for sending notifications to a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, in an e-commerce application, the checkout workflow, after redirecting customers to a secure payments service, must wait for a notification from that service that the payment has finished processing.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To wait for this notification, the payments workflow uses </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Recv()`</span><span class="token plain">, executing failure-handling code if the notification doesn&#x27;t arrive in time:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">const PaymentStatusTopic = &quot;payment_status&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func checkoutWorkflow(ctx dbos.DBOSContext, orderData OrderData) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Process initial checkout steps...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Wait for payment notification with a 5-minute timeout</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    notification, err := dbos.Recv[PaymentNotification](ctx, PaymentStatusTopic, 5*time.Minute)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        ... // Handle timeout or other errors</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Handle the notification</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if notification.Status == &quot;completed&quot; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">      ... // Handle the notification.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    } else {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">      ... // Handle a failure</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">A webhook waits for the payment processor to send the notification, then uses </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Send()`</span><span class="token plain"> to forward it to the workflow:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func paymentWebhookHandler(w http.ResponseWriter, r *http.Request) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Parse the notification from the payment processor</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    notification := ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Retrieve the workflow ID from notification metadata</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    workflowID := ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Send the notification to the waiting workflow</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    err := dbos.Send(dbosContext, workflowID, notification, PaymentStatusTopic)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        http.Error(w, &quot;Failed to send notification&quot;, http.StatusInternalServerError)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Reliability Guarantees</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">All messages are persisted to the database, so if </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Send`</span><span class="token plain"> completes successfully, the destination workflow is guaranteed to be able to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Recv`</span><span class="token plain"> it.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If you&#x27;re sending a message from a workflow, DBOS guarantees exactly-once delivery.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Workflow Events</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows can publish </span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token italic content">events</span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token plain">, which are key-value pairs associated with the workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">They are useful for publishing information about the status of a workflow or to send a result to clients while the workflow is running.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">&lt;img src={require(&#x27;@site/static/img/workflow-communication/workflow-events.png&#x27;).default} alt=&quot;DBOS Steps&quot; width=&quot;750&quot; className=&quot;custom-img&quot;/&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> SetEvent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func SetEvent[P any](ctx DBOSContext, key string, message P) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Any workflow can call </span><span class="token code-snippet code keyword" style="color:#66d9ef">`SetEvent`</span><span class="token plain"> to publish a key-value pair, or update its value if has already been published.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> GetEvent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func GetEvent[R any](ctx DBOSContext, targetWorkflowID, key string, timeout time.Duration) (R, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can call </span><span class="token code-snippet code keyword" style="color:#66d9ef">`GetEvent`</span><span class="token plain"> to retrieve the value published by a particular workflow ID for a particular key.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If the event does not yet exist, this call waits for it to be published, returning an error if the wait times out.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Events Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Events are especially useful for writing interactive workflows that communicate information to their caller.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, in an e-commerce application, the checkout workflow, after validating an order, directs the customer to a secure payments service to handle credit card processing.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To communicate the payments URL to the customer, it uses events.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The checkout workflow emits the payments URL using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`SetEvent()`</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">const PaymentURLKey = &quot;payment_url&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func checkoutWorkflow(ctx dbos.DBOSContext, orderData OrderData) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Process order validation...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    paymentsURL := ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    err := dbos.SetEvent(ctx, PaymentURLKey, paymentsURL)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;&quot;, fmt.Errorf(&quot;failed to set payment URL event: %w&quot;, err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Continue with checkout process...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The HTTP handler that originally started the workflow uses </span><span class="token code-snippet code keyword" style="color:#66d9ef">`GetEvent()`</span><span class="token plain"> to await this URL, then redirects the customer to it:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func webCheckoutHandler(dbosContext dbos.DBOSContext, w http.ResponseWriter, r *http.Request) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    orderData := parseOrderData(r) // Parse order from request</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handle, err := dbos.RunWorkflow(dbosContext, checkoutWorkflow, orderData)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        http.Error(w, &quot;Failed to start checkout&quot;, http.StatusInternalServerError)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Wait up to 30 seconds for the payment URL event</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    url, err := dbos.GetEvent[string](dbosContext, handle.GetWorkflowID(), PaymentURLKey, 30*time.Second)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        // Handle a timeout</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Redirect the customer</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Reliability Guarantees</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">All events are persisted to the database, so the latest version of an event is always retrievable.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Additionally, if </span><span class="token code-snippet code keyword" style="color:#66d9ef">`GetEvent`</span><span class="token plain"> is called in a workflow, the retrieved value is persisted in the database so workflow recovery can use that value, even if the event is later updated.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Workflow Streaming</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows can stream data in real time to clients.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is useful for streaming results from a long-running workflow or LLM call, or for monitoring and progress reporting.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Writing to Streams</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WriteStream[P any](ctx DBOSContext, key string, value P) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can write values to a stream from a workflow or its steps.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">A workflow may have any number of streams, each identified by a unique key.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When you are done writing to a stream, you should close it with </span><span class="token code-snippet code keyword" style="color:#66d9ef">`CloseStream`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Otherwise, streams are automatically closed when the workflow terminates.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func CloseStream(ctx DBOSContext, key string) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">DBOS streams are immutable and append-only.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Writes to a stream from a workflow happen exactly-once.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Writes to a stream from a step happen at-least-once; if a step fails and is retried, it may write to the stream multiple times.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Reading from Streams</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func ReadStream[R any](ctx DBOSContext, workflowID string, key string) ([]R, bool, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can read values from a stream from anywhere.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This function reads all values from a stream identified by a workflow ID and key.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">It blocks until the stream is closed or the workflow becomes inactive (status is not </span><span class="token code-snippet code keyword" style="color:#66d9ef">`PENDING`</span><span class="token plain"> or </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ENQUEUED`</span><span class="token plain">).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">It returns the values, whether the stream is closed, and any error.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can also read from a stream asynchronously, which returns a channel:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func ReadStreamAsync[R any](ctx DBOSContext, workflowID string, key string) (&lt;-chan StreamValue[R], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type StreamValue[R any] struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Value  R     // The stream value (zero value if error/closed)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Err    error // Error if one occurred (nil otherwise)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Closed bool  // Whether the stream is closed</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Streaming Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func producerWorkflow(ctx dbos.DBOSContext, _ string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    err := dbos.WriteStream(ctx, &quot;progress&quot;, &quot;step 1 complete&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    err = dbos.WriteStream(ctx, &quot;progress&quot;, &quot;step 2 complete&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    err = dbos.CloseStream(ctx, &quot;progress&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return &quot;&quot;, err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;done&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">// Blocking read</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">values, closed, err := dbos.ReadStream[string](ctx, workflowID, &quot;progress&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">// Async read: process values as they arrive</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">ch, err := dbos.ReadStreamAsync[string](ctx, workflowID, &quot;progress&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">for streamValue := range ch {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if streamValue.Err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return streamValue.Err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if streamValue.Closed {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        break</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Printf(&quot;Received: %s\n&quot;, streamValue.Value)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can also read from a stream from outside a DBOS application with a DBOS Client using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ClientReadStream`</span><span class="token plain"> or </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ClientReadStreamAsync`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Queues</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use queues to run many workflows at once with managed concurrency.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Queues provide </span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token italic content">flow control</span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token plain">, letting you manage how many workflows run at once or how often workflows are started.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To create a queue, use </span><span class="token code-snippet code keyword" style="color:#66d9ef">`NewWorkflowQueue`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">queue := dbos.NewWorkflowQueue(dbosContext, &quot;example_queue&quot;)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can then enqueue any workflow using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithQueue`</span><span class="token plain"> when calling </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RunWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Enqueuing a function submits it for execution and returns a handle to it.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Queued tasks are started in first-in, first-out (FIFO) order.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func processTask(ctx dbos.DBOSContext, task string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Process the task...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return fmt.Sprintf(&quot;Processed: %s&quot;, task), nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func example(dbosContext dbos.DBOSContext, queue dbos.WorkflowQueue) error {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Enqueue a workflow</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    task := &quot;example_task&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handle, err := dbos.RunWorkflow(dbosContext, processTask, task, dbos.WithQueue(queue.Name))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Get the result</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Task result:&quot;, result)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Queue Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Here&#x27;s an example of a workflow using a queue to process tasks concurrently:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func taskWorkflow(ctx dbos.DBOSContext, task string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Process the task...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return fmt.Sprintf(&quot;Processed: %s&quot;, task), nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func queueWorkflow(ctx dbos.DBOSContext, queue dbos.WorkflowQueue) ([]string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Enqueue each task so all tasks are processed concurrently</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    tasks := []string{&quot;task1&quot;, &quot;task2&quot;, &quot;task3&quot;, &quot;task4&quot;, &quot;task5&quot;}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    var handles []dbos.WorkflowHandle[string]</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    for _, task := range tasks {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        handle, err := dbos.RunWorkflow(ctx, taskWorkflow, task, dbos.WithQueue(queue.Name))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return nil, fmt.Errorf(&quot;failed to enqueue task %s: %w&quot;, task, err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        handles = append(handles, handle)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Wait for each task to complete and retrieve its result</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    var results []string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    for i, handle := range handles {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return nil, fmt.Errorf(&quot;task %d failed: %w&quot;, i, err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        results = append(results, result)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return results, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func example(dbosContext dbos.DBOSContext, queue dbos.WorkflowQueue) error {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handle, err := dbos.RunWorkflow(dbosContext, queueWorkflow, queue)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    results, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    for _, result := range results {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        fmt.Println(result)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Enqueueing from Another Application</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Often, you want to enqueue a workflow from outside your DBOS application.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, let&#x27;s say you have an API server and a data processing service.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You&#x27;re using DBOS to build a durable data pipeline in the data processing service.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When the API server receives a request, it should enqueue the data pipeline for execution on the data processing service.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use the DBOS Client to enqueue workflows from outside your DBOS application by connecting directly to your DBOS application&#x27;s system database.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Since the DBOS Client is designed to be used from outside your DBOS application, workflow and queue metadata must be specified explicitly.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, this code enqueues the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`dataPipeline`</span><span class="token plain"> workflow on the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`pipelineQueue`</span><span class="token plain"> queue with a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ProcessInput`</span><span class="token plain"> argument:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type ProcessInput struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    TaskID string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Data   string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">type ProcessOutput struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Result string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Status string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">config := dbos.ClientConfig{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    DatabaseURL: os.Getenv(&quot;DBOS_SYSTEM_DATABASE_URL&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">client, err := dbos.NewClient(context.Background(), config)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    log.Fatal(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">defer client.Shutdown(5 * time.Second)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">handle, err := dbos.Enqueue[ProcessInput, ProcessOutput](</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    client,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;pipelineQueue&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;dataPipeline&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ProcessInput{TaskID: &quot;task-123&quot;, Data: &quot;data&quot;},</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    log.Fatal(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Managing Concurrency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can control how many workflows from a queue run simultaneously by configuring concurrency limits.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This helps prevent resource exhaustion when workflows consume significant memory or processing power.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Worker Concurrency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Worker concurrency sets the maximum number of workflows from a queue that can run concurrently on a single DBOS process.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is particularly useful for resource-intensive workflows to avoid exhausting the resources of any process.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, this queue has a worker concurrency of 5, so each process will run at most 5 workflows from this queue simultaneously:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">queue := dbos.NewWorkflowQueue(dbosContext, &quot;example_queue&quot;,  dbos.WithWorkerConcurrency(5))</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Global Concurrency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Global concurrency limits the total number of workflows from a queue that can run concurrently across all DBOS processes in your application.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, this queue will have a maximum of 10 workflows running simultaneously across your entire application.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::warning</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Worker concurrency limits are recommended for most use cases.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Take care when using a global concurrency limit as any </span><span class="token code-snippet code keyword" style="color:#66d9ef">`PENDING`</span><span class="token plain"> workflow on the queue counts toward the limit, including workflows from previous application versions</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">queue := dbos.NewWorkflowQueue(dbosContext, &quot;example_queue&quot;, dbos.WithGlobalConcurrency(10))</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Rate Limiting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can set </span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token italic content">rate limits</span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token plain"> for a queue, limiting the number of functions that it can start in a given period.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Rate limits are global across all DBOS processes using this queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, this queue has a limit of 100 workflows with a period of 60 seconds, so it may not start more than 100 workflows in 60 seconds:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">queue := dbos.NewWorkflowQueue(dbosContext, &quot;example_queue&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithRateLimiter(&amp;dbos.RateLimiter{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        Limit:  100,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        Period: 60 * time.Second, // 60 seconds</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }))</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Rate limits are especially useful when working with a rate-limited API, such as many LLM APIs.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Deduplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can set a deduplication ID for an enqueued workflow using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithDeduplicationID`</span><span class="token plain"> when calling </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RunWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">At any given time, only one workflow with a specific deduplication ID can be enqueued in the specified queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If a workflow with a deduplication ID is currently enqueued or actively executing (status </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ENQUEUED`</span><span class="token plain"> or </span><span class="token code-snippet code keyword" style="color:#66d9ef">`PENDING`</span><span class="token plain">), subsequent workflow enqueue attempts with the same deduplication ID in the same queue will return an error.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, this is useful if you only want to have one workflow active at a time per user</span><span class="token entity named-entity">&amp;mdash;</span><span class="token plain">set the deduplication ID to the user&#x27;s ID.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Example syntax:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func taskWorkflow(ctx dbos.DBOSContext, task string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Process the task...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;completed&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func example(dbosContext dbos.DBOSContext, queue dbos.WorkflowQueue) error {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    task := &quot;example_task&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    deduplicationID := &quot;user_12345&quot; // Use user ID for deduplication</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handle, err := dbos.RunWorkflow(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbosContext, taskWorkflow, task,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithQueue(queue.Name),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithDeduplicationID(deduplicationID))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        // Handle deduplication error or other failures</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return fmt.Errorf(&quot;failed to enqueue workflow: %w&quot;, err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return fmt.Errorf(&quot;workflow failed: %w&quot;, err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Printf(&quot;Workflow completed: %s\n&quot;, result)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Priority</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can set a priority for an enqueued workflow using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithPriority`</span><span class="token plain"> when calling </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RunWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows with the same priority are dequeued in </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">FIFO (first in, first out)</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> order. Priority values can range from </span><span class="token code-snippet code keyword" style="color:#66d9ef">`1`</span><span class="token plain"> to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`2,147,483,647`</span><span class="token plain">, where </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">a low number indicates a higher priority</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If using priority, you must set </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithPriorityEnabled`</span><span class="token plain"> on your queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::tip</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows without assigned priorities have the highest priority and are dequeued before workflows with assigned priorities.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To use priorities in a queue, you must enable it when creating the queue:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">queue := dbos.NewWorkflowQueue(dbosContext, &quot;example_queue&quot;, dbos.WithPriorityEnabled())</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Example syntax:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func taskWorkflow(ctx dbos.DBOSContext, task string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Process the task...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;completed&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func example(dbosContext dbos.DBOSContext, queue dbos.WorkflowQueue) error {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    task := &quot;example_task&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    priority := uint(10) // Lower number = higher priority</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handle, err := dbos.RunWorkflow(dbosContext, taskWorkflow, task,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithQueue(queue.Name),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithPriority(priority))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return fmt.Errorf(&quot;workflow failed: %w&quot;, err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Printf(&quot;Workflow completed: %s\n&quot;, result)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Partitioned Queues</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can partition queues to distribute work across dynamically created queue partitions.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When you enqueue a workflow on a partitioned queue, you must supply a queue partition key.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">In partitioned queues, all flow control (including concurrency and rate limits) is applied to individual partitions instead of the queue as a whole.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, to allow each user to run at most one task at a time:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">partitionedQueue := dbos.NewWorkflowQueue(dbosContext, &quot;user-tasks&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithPartitionQueue(),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithGlobalConcurrency(1),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">// Enqueue workflows with partition keys</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">// Each user&#x27;s tasks run with separate concurrency limits</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">handle, err := dbos.RunWorkflow(dbosContext, processTask, taskData,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithQueue(&quot;user-tasks&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithQueuePartitionKey(userID),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Debouncing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Debouncing delays a workflow&#x27;s execution until some time has passed since it was last called.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is useful when rapid successive triggers should be coalesced into a single workflow execution.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func processInput(ctx dbos.DBOSContext, input string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Printf(&quot;Processing input: %s\n&quot;, input)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;processed&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbosContext, _ := dbos.NewDBOSContext(context.Background(), dbos.Config{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        AppName:     &quot;debounce-example&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        DatabaseURL: os.Getenv(&quot;DBOS_SYSTEM_DATABASE_URL&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    })</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.RegisterWorkflow(dbosContext, processInput)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Create a debouncer with a maximum timeout of 30 seconds</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    debouncer := dbos.NewDebouncer(dbosContext, processInput,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        dbos.WithDebouncerTimeout(30*time.Second))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.Launch(dbosContext)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    defer dbos.Shutdown(dbosContext, 5*time.Second)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // Each call to Debounce pushes back the workflow start time by the delay.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // The workflow runs with the most recent input once the delay expires.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handle, err := debouncer.Debounce(dbosContext, &quot;user-123&quot;, 5*time.Second, &quot;first input&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        log.Fatal(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    // If this call arrives within 5 seconds, the delay resets and the input updates</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handle, err = debouncer.Debounce(dbosContext, &quot;user-123&quot;, 5*time.Second, &quot;updated input&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        log.Fatal(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Result:&quot;, result) // Processed with &quot;updated input&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> ListenQueues</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can configure which queues the current DBOS process should listen to for workflow execution using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ListenQueues`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">By default, all registered queues are listened to. This allows multiple DBOS processes to share the same queue registry but listen to different subsets of queues.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">queue1 := dbos.NewWorkflowQueue(ctx, &quot;queue-1&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">queue2 := dbos.NewWorkflowQueue(ctx, &quot;queue-2&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">queue3 := dbos.NewWorkflowQueue(ctx, &quot;queue-3&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">// This process only listens to queue1 and queue2.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">dbos.ListenQueues(ctx, queue1, queue2)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">dbos.Launch(ctx)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`ListenQueues`</span><span class="token plain"> must be called before </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Launch()`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">#</span><span class="token title important"> Reference</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">A DBOS Context is at the center of a DBOS-enabled application. Use it to register workflows, queues and perform workflow management tasks.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSContext`</span><span class="token plain"> extends Go&#x27;s </span><span class="token code-snippet code keyword" style="color:#66d9ef">`context.Context`</span><span class="token plain"> interface and carries essential state across workflow execution. Workflows and steps receive a new </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSContext`</span><span class="token plain"> spun out of the root </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSContext`</span><span class="token plain"> you manage. In addition, a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSContext`</span><span class="token plain"> can be used to set workflow timeouts.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Lifecycle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Initialization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can create a DBOS context using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`NewDBOSContext`</span><span class="token plain">, which takes a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Config`</span><span class="token plain"> object where </span><span class="token code-snippet code keyword" style="color:#66d9ef">`AppName`</span><span class="token plain"> and one of </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DatabaseURL`</span><span class="token plain"> or </span><span class="token code-snippet code keyword" style="color:#66d9ef">`SystemDBPool`</span><span class="token plain"> are mandatory.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func NewDBOSContext(ctx context.Context, inputConfig Config) (DBOSContext, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type Config struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    AppName            string        // Application name for identification (required)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    DatabaseURL        string        // DatabaseURL is a PostgreSQL connection string to your system database. Either this or SystemDBPool is required.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    SystemDBPool       *pgxpool.Pool // SystemDBPool is a connection pool DBOS can use to access your system database. Optional but takes precedence over DatabaseURL if both are provided.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    DatabaseSchema     string        // Database schema name (defaults to &quot;dbos&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Logger             *slog.Logger  // Custom logger instance (defaults to a new slog logger)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    AdminServer        bool          // Enable Transact admin HTTP server (disabled by default)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    AdminServerPort    int           // Port for the admin HTTP server (default: 3001)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ConductorURL       string        // DBOS conductor service URL (optional)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ConductorAPIKey    string        // DBOS conductor API key (optional)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ApplicationVersion string        // Application version (optional)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ExecutorID         string        // Executor ID (optional)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    EnablePatching     bool          // Enable the patching system for Patch/DeprecatePatch (default: false)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">dbosContext, err := dbos.NewDBOSContext(context.Background(), dbos.Config{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    AppName:     &quot;dbos-starter&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    DatabaseURL: os.Getenv(&quot;DBOS_SYSTEM_DATABASE_URL&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    panic(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The newly created DBOSContext must be launched with </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Launch()`</span><span class="token plain"> before use and should be shut down with Shutdown() at program termination.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> launch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">dbos.Launch(ctx DBOSContext) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Launch the following resources managed by a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSContext`</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> A system database connection pool</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> A workflow scheduler</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> A workflow queue runner</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> (Optionally) an admin server</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> (Optionally) a Conductor connection</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">In addition, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Launch()`</span><span class="token plain"> may perform workflow recovery.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`Launch()`</span><span class="token plain"> should be called by your program during startup before running any workflows.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Shutdown</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">dbos.Shutdown(ctx DBOSContext, timeout time.Duration)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Gracefully shutdown the DBOS runtime, waiting for workflows to complete and cleaning up resources. When you shutdown a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSContext`</span><span class="token plain">, the underlying </span><span class="token code-snippet code keyword" style="color:#66d9ef">`context.Context`</span><span class="token plain"> will be cancelled, which signals all DBOS resources they should stop executing, including workflows and steps.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">timeout</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The time to wait for DBOS resources to gracefully terminate.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Context management</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> WithTimeout</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithTimeout(ctx DBOSContext, timeout time.Duration) (DBOSContext, context.CancelFunc)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithTimeout`</span><span class="token plain"> returns a copy of the DBOS context with a timeout. The returned context will be canceled after the specified duration. See workflow timeouts for usage.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> WithoutCancel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithoutCancel(ctx DBOSContext) DBOSContext</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithoutCancel`</span><span class="token plain"> returns a copy of the DBOS context that is not canceled when the parent context is canceled. This is useful to detach child workflows from their parent&#x27;s timeout.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Context metadata</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> GetApplicationVersion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func GetApplicationVersion() string</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`GetApplicationVersion`</span><span class="token plain"> returns the application version for this context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> GetExecutorID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func GetExecutorID() string</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`GetExecutorID`</span><span class="token plain"> returns the executor ID for this context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Communication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> GetEvent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func GetEvent[R any](ctx DBOSContext, targetWorkflowID, key string, timeout time.Duration) (R, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve the latest value of an event published by the workflow identified by </span><span class="token code-snippet code keyword" style="color:#66d9ef">`targetWorkflowID`</span><span class="token plain"> to the key </span><span class="token code-snippet code keyword" style="color:#66d9ef">`key`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If the event does not yet exist, wait for it to be published, returning an error if the wait times out.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">targetWorkflowID</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The identifier of the workflow whose events to retrieve.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">key</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The key of the event to retrieve.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">timeout</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: A timeout. If the wait times out, return an error.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> SetEvent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func SetEvent[P any](ctx DBOSContext, key string, message P) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Create and associate with this workflow an event with key </span><span class="token code-snippet code keyword" style="color:#66d9ef">`key`</span><span class="token plain"> and value </span><span class="token code-snippet code keyword" style="color:#66d9ef">`value`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If the event already exists, update its value.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Can only be called from within a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">key</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The key of the event.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">message</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The value of the event. Must be serializable.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Send</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func Send[P any](ctx DBOSContext, destinationID string, message P, topic string) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Send a message to the workflow identified by </span><span class="token code-snippet code keyword" style="color:#66d9ef">`destinationID`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Messages can optionally be associated with a topic.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">destinationID</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The workflow to which to send the message.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">message</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The message to send. Must be serializable.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">topic</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: A topic with which to associate the message. Messages are enqueued per-topic on the receiver.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Recv</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func Recv[R any](ctx DBOSContext, topic string, timeout time.Duration) (R, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Receive and return a message sent to this workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Can only be called from within a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Messages are dequeued first-in, first-out from a queue associated with the topic.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Calls to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Recv`</span><span class="token plain"> wait for the next message in the queue, returning an error if the wait times out.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">topic</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: A topic queue on which to wait.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">timeout</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: A timeout duration. If the wait times out, return an error.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Streams</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> WriteStream</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WriteStream[P any](ctx DBOSContext, key string, value P) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Write a value to a durable stream.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">May only be called from within a workflow or step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Writes from a workflow are exactly-once; writes from a step are at-least-once.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> CloseStream</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func CloseStream(ctx DBOSContext, key string) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Close a durable stream.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">After closing, no more values can be written to the stream.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Streams are also automatically closed when the workflow terminates.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> ReadStream</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func ReadStream[R any](ctx DBOSContext, workflowID string, key string) ([]R, bool, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Read all values from a durable stream.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Blocks until the stream is closed or the workflow becomes inactive.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> ReadStreamAsync</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func ReadStreamAsync[R any](ctx DBOSContext, workflowID string, key string) (&lt;-chan StreamValue[R], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Read values from a durable stream asynchronously.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Returns immediately with a channel that receives values as they are written to the stream.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Sleep</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func Sleep(ctx DBOSContext, duration time.Duration) (time.Duration, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Sleep for the given duration.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">May only be called from within a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This sleep is durable</span><span class="token entity named-entity">&amp;mdash;</span><span class="token plain">it records its intended wake-up time in the database so if it is interrupted and recovers, it still wakes up at the intended time.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">duration</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The duration to sleep.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> RetrieveWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func RetrieveWorkflow[R any](ctx DBOSContext, workflowID string) (*workflowPollingHandle[R], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve the handle of a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">workflowID</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The ID of the workflow whose handle to retrieve.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Management Methods</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> ListWorkflows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func ListWorkflows(ctx DBOSContext, opts ...ListWorkflowsOption) ([]WorkflowStatus, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve a list of </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WorkflowStatus`</span><span class="token plain"> of all workflows matching specified criteria.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Example usage:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">// List all successful workflows from the last 24 hours</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">workflows, err := dbos.ListWorkflows(ctx,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithStatus([]dbos.WorkflowStatusType{dbos.WorkflowStatusSuccess}),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithStartTime(time.Now().Add(-24*time.Hour)),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithLimit(100))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    log.Fatal(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">// List workflows by specific IDs without loading input/output data</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">workflows, err := dbos.ListWorkflows(ctx,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithWorkflowIDs([]string{&quot;workflow1&quot;, &quot;workflow2&quot;}),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithLoadInput(false),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithLoadOutput(false))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    log.Fatal(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithAppVersion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithAppVersion(appVersion string) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve workflows tagged with this application version.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithEndTime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithEndTime(endTime time.Time) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve workflows started before this timestamp.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithLimit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithLimit(limit int) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve up to this many workflows.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithLoadInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithLoadInput(loadInput bool) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">WithLoadInput controls whether to load workflow input data (default: true).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithLoadOutput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithLoadOutput(loadOutput bool) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">WithLoadOutput controls whether to load workflow output data (default: true).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithName</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithName(name string) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Filter workflows by the specified workflow function name.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithOffset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithOffset(offset int) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Skip this many workflows from the results returned (for pagination).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithSortDesc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithSortDesc(sortDesc bool) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Sort the results in descending (true) or ascending (false) order by workflow start time.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithStartTime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithStartTime(startTime time.Time) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve workflows started after this timestamp.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithStatus</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithStatus(status []WorkflowStatusType) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Filter workflows by status. Multiple statuses can be specified.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithUser</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithUser(user string) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Filter workflows run by this authenticated user.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithWorkflowIDs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithWorkflowIDs(workflowIDs []string) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Filter workflows by specific workflow IDs.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithWorkflowIDPrefix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithWorkflowIDPrefix(prefix string) ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Filter workflows whose IDs start with the specified prefix.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithQueuesOnly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithQueuesOnly() ListWorkflowsOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Return only workflows that are currently in a queue (queue name is not null, status is </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ENQUEUED`</span><span class="token plain"> or </span><span class="token code-snippet code keyword" style="color:#66d9ef">`PENDING`</span><span class="token plain">).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> GetWorkflowSteps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func GetWorkflowSteps(ctx DBOSContext, workflowID string) ([]StepInfo, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">GetWorkflowSteps retrieves the execution steps of a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is a list of </span><span class="token code-snippet code keyword" style="color:#66d9ef">`StepInfo`</span><span class="token plain"> objects, with the following structure:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type StepInfo struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    StepID          int    // The sequential ID of the step within the workflow</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    StepName        string // The name of the step function</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Output          any    // The output returned by the step (if any)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Error           error  // The error returned by the step (if any)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ChildWorkflowID string  // If the step starts or retrieves the result of a workflow, its ID</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">workflowID</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The ID of the workflow whose steps to retrieve.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> CancelWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func CancelWorkflow(ctx DBOSContext, workflowID string) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Cancel a workflow. This sets its status to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`CANCELLED`</span><span class="token plain">, removes it from its queue (if it is enqueued) and preempts its execution (interrupting it at the beginning of its next step).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">workflowID</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The ID of the workflow to cancel.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> ResumeWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func ResumeWorkflow[R any](ctx DBOSContext, workflowID string) (*WorkflowHandle[R], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Resume a workflow. This immediately starts it from its last completed step. You can use this to resume workflows that are cancelled or have exceeded their maximum recovery attempts. You can also use this to start an enqueued workflow immediately, bypassing its queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">workflowID</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The ID of the workflow to resume.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> ForkWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func ForkWorkflow[R any](ctx DBOSContext, input ForkWorkflowInput) (WorkflowHandle[R], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Start a new execution of a workflow from a specific step. The input step ID (</span><span class="token code-snippet code keyword" style="color:#66d9ef">`startStep`</span><span class="token plain">) must match the step number of the step returned by workflow introspection. The specified </span><span class="token code-snippet code keyword" style="color:#66d9ef">`startStep`</span><span class="token plain"> is the step from which the new workflow will start, so any steps whose ID is less than </span><span class="token code-snippet code keyword" style="color:#66d9ef">`startStep`</span><span class="token plain"> will not be re-executed.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">input</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: A </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ForkWorkflowInput`</span><span class="token plain"> struct where </span><span class="token code-snippet code keyword" style="color:#66d9ef">`OriginalWorkflowID`</span><span class="token plain"> is mandatory.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type ForkWorkflowInput struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    OriginalWorkflowID string // Required: The UUID of the original workflow to fork from</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ForkedWorkflowID   string // Optional: Custom workflow ID for the forked workflow (auto-generated if empty)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    StartStep          uint   // Optional: Step to start the forked workflow from (default: 0)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ApplicationVersion string // Optional: Application version for the forked workflow (inherits from original if empty)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Workflow Status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Some workflow introspection and management methods return a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WorkflowStatus`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This object has the following definition:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type WorkflowStatus struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ID                 string             `json:&quot;workflow_uuid&quot;`       // Unique identifier for the workflow</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Status             WorkflowStatusType `json:&quot;status&quot;`              // Current execution status</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Name               string             `json:&quot;name&quot;`                // Function name of the workflow</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    AuthenticatedUser  *string            `json:&quot;authenticated_user&quot;`  // User who initiated the workflow (if applicable)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    AssumedRole        *string            `json:&quot;assumed_role&quot;`        // Role assumed during execution (if applicable)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    AuthenticatedRoles *string            `json:&quot;authenticated_roles&quot;` // Roles available to the user (if applicable)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Output             any                `json:&quot;output&quot;`              // Workflow output (available after completion)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Error              error              `json:&quot;error&quot;`               // Error information (if status is ERROR)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ExecutorID         string             `json:&quot;executor_id&quot;`         // ID of the executor running this workflow</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    CreatedAt          time.Time          `json:&quot;created_at&quot;`          // When the workflow was created</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    UpdatedAt          time.Time          `json:&quot;updated_at&quot;`          // When the workflow status was last updated</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ApplicationVersion string             `json:&quot;application_version&quot;` // Version of the application that created this workflow</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ApplicationID      string             `json:&quot;application_id&quot;`      // Application identifier</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Attempts           int                `json:&quot;attempts&quot;`            // Number of execution attempts</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    QueueName          string             `json:&quot;queue_name&quot;`          // Queue name (if workflow was enqueued)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Timeout            time.Duration      `json:&quot;timeout&quot;`             // Workflow timeout duration</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Deadline           time.Time          `json:&quot;deadline&quot;`            // Absolute deadline for workflow completion</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    StartedAt          time.Time          `json:&quot;started_at&quot;`          // When the workflow execution actually started</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    DeduplicationID    string             `json:&quot;deduplication_id&quot;`    // Deduplication identifier (if applicable)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Input              any                `json:&quot;input&quot;`               // Input parameters passed to the workflow</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Priority           int                `json:&quot;priority&quot;`            // Execution priority (lower numbers have higher priority)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WorkflowStatusType</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WorkflowStatusType`</span><span class="token plain"> represents the execution status of a workflow:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type WorkflowStatusType string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">const (</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    WorkflowStatusPending                     WorkflowStatusType = &quot;PENDING&quot;                        // Workflow is running or ready to run</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    WorkflowStatusEnqueued                    WorkflowStatusType = &quot;ENQUEUED&quot;                       // Workflow is queued and waiting for execution</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    WorkflowStatusSuccess                     WorkflowStatusType = &quot;SUCCESS&quot;                        // Workflow completed successfully</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    WorkflowStatusError                       WorkflowStatusType = &quot;ERROR&quot;                          // Workflow completed with an error</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    WorkflowStatusCancelled                   WorkflowStatusType = &quot;CANCELLED&quot;                      // Workflow was cancelled (manually or due to timeout)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    WorkflowStatusMaxRecoveryAttemptsExceeded WorkflowStatusType = &quot;MAX_RECOVERY_ATTEMPTS_EXCEEDED&quot; // Workflow exceeded maximum retry attempts</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> DBOS Variables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> GetWorkflowID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func GetWorkflowID(ctx DBOSContext) (string, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Return the ID of the current workflow, if in a workflow. Returns an error if not called from within a workflow context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> GetStepID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func GetStepID(ctx DBOSContext) (int, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Return the unique ID of the current step within a workflow. Returns an error if not called from within a step context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOS context.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflow queues allow you to ensure that workflow functions will be run, without starting them immediately.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Queues are useful for controlling the number of workflows run in parallel, or the rate at which they are started.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">All queues should be created before DBOS is launched.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> NewWorkflowQueue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func NewWorkflowQueue(dbosCtx DBOSContext, name string, options ...queueOption) WorkflowQueue</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">NewWorkflowQueue creates a new workflow queue with the specified name and configuration options.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Queues must be created before DBOS is launched.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can enqueue a workflow using the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithQueue`</span><span class="token plain"> parameter of </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RunWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">dbosCtx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOSContext.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">name</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The name of the queue.  Must be unique among all queues in the application.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">options</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Functional options for the queue, documented below.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Example Syntax:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">queue := dbos.NewWorkflowQueue(ctx, &quot;email-queue&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithWorkerConcurrency(5),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithRateLimiter(&amp;dbos.RateLimiter{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        Limit:  100,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        Period: 60 * time.Second, // 100 workflows per minute</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithPriorityEnabled(),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">// Enqueue workflows to this queue:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">handle, err := dbos.RunWorkflow(ctx, SendEmailWorkflow, emailData, dbos.WithQueue(&quot;email-queue&quot;))</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithWorkerConcurrency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithWorkerConcurrency(concurrency int) queueOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Set the maximum number of workflows from this queue that may run concurrently within a single DBOS process.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithGlobalConcurrency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithGlobalConcurrency(concurrency int) queueOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Set the maximum number of workflows from this queue that may run concurrently. Defaults to 0 (no limit).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This concurrency limit is global across all DBOS processes using this queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important">  WithMaxTasksPerIteration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithMaxTasksPerIteration(maxTasks int) queueOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Sets the maximum number of workflows that can be dequeued in a single iteration.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This controls batch sizes for queue processing.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important">  WithPriorityEnabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithPriorityEnabled() queueOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Enable setting priority for workflows on this queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important">  WithRateLimiter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithRateLimiter(limiter *RateLimiter) queueOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type RateLimiter struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Limit  int     // Maximum number of workflows to start within the period</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Period time.Duration // Time period for the rate limit</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">A limit on the maximum number of functions which may be started in a given period.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important">  WithPartitionQueue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithPartitionQueue() queueOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Enable partitioning for this queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When enabled, workflows can be enqueued with a partition key using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithQueuePartitionKey`</span><span class="token plain">, and each partition has its own concurrency limits.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> RegisterWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func RegisterWorkflow[P any, R any](ctx DBOSContext, fn Workflow[P, R], opts ...WorkflowRegistrationOption)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Register a function as a DBOS workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">All workflows must be registered before the context is launched.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflow functions must be compatible with the following signature:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type Workflow[P any, R any] func(ctx DBOSContext, input P) (R, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOSContext.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">fn</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The workflow function to register.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">opts</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Functional options for workflow registration, documented below.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithMaxRetries</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithMaxRetries(maxRetries int) WorkflowRegistrationOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Configure the maximum number of times execution of a workflow may be attempted.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This acts as a dead letter queue so that a buggy workflow that crashes its application (for example, by running it out of memory) does not do so infinitely.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If a workflow exceeds this limit, its status is set to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`MAX_RECOVERY_ATTEMPTS_EXCEEDED`</span><span class="token plain"> and it may no longer be executed.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithSchedule</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithSchedule(schedule string) WorkflowRegistrationOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Registers the workflow as a scheduled workflow using cron syntax.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The schedule string follows standard cron format with second precision.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Scheduled workflows automatically receive a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`time.Time`</span><span class="token plain"> input parameter.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithWorkflowName</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithWorkflowName(name string) WorkflowRegistrationOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Register a workflow with a custom name.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If not provided, the name of the workflow function is used.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> RunWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func RunWorkflow[P any, R any](ctx DBOSContext, fn Workflow[P, R], input P, opts ...WorkflowOption) (WorkflowHandle[R], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Execute a workflow function.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The workflow may execute immediately or be enqueued for later execution based on options.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Returns a WorkflowHandle that can be used to check the workflow&#x27;s status or wait for its completion and retrieve its results.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOSContext.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">fn</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The workflow function to execute.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">input</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> The input to the workflow function.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">opts</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Functional options for workflow execution, documented below.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Example Syntax</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func workflow(ctx dbos.DBOSContext, input string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return &quot;success&quot;, nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func example(input string) error {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    handle, err := dbos.RunWorkflow(dbosContext, workflow, input)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        return err</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    fmt.Println(&quot;Workflow result:&quot;, result)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return nil</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithWorkflowID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithWorkflowID(id string) WorkflowOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Run the workflow with a custom workflow ID.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If not specified, a UUID workflow ID is generated.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithQueue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithQueue(queueName string) WorkflowOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Enqueue the workflow to the specified queue instead of executing it immediately.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Queued workflows will be dequeued and executed according to the queue&#x27;s configuration.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithDeduplicationID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithDeduplicationID(id string) WorkflowOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Set a deduplication ID for this workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Should be used alongside </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithQueue`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">At any given time, only one workflow with a specific deduplication ID can be enqueued in a given queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithPriority</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithPriority(priority uint) WorkflowOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Set a queue priority for the workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Should be used alongside </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithQueue`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows with the same priority are dequeued in </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">FIFO (first in, first out)</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> order.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Priority values can range from </span><span class="token code-snippet code keyword" style="color:#66d9ef">`1`</span><span class="token plain"> to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`2,147,483,647`</span><span class="token plain">, where </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">a low number indicates a higher priority</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows without assigned priorities have the highest priority and are dequeued before workflows with assigned priorities.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithQueuePartitionKey</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithQueuePartitionKey(partitionKey string) WorkflowOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Set a queue partition key for the workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Use if and only if the queue is partitioned (created with </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithPartitionQueue`</span><span class="token plain">).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithApplicationVersion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithApplicationVersion(version string) WorkflowOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Set the application version for this workflow, overriding the version in DBOSContext.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithAuthenticatedUser</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithAuthenticatedUser(user string) WorkflowOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Associate the workflow execution with a user name. Useful to define workflow identity.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> RunAsStep</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func RunAsStep[R any](ctx DBOSContext, fn Step[R], opts ...StepOption) (R, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Execute a function as a step in a durable workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">ctx</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The DBOSContext.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">fn</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The step to execute, typically wrapped in an anonymous function. Syntax shown below.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">opts</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Functional options for step execution, documented below.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Example Syntax:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Any Go function can be a step as long as it outputs one json-encodable value and an error.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To pass inputs into a function being called as a step, wrap it in an anonymous function as shown below:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func step(ctx context.Context, input string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    output := ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    return output</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">func workflow(ctx dbos.DBOSContext, input string) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    output, err := dbos.RunAsStep(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        ctx,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        func(stepCtx context.Context) (string, error) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">            return step(stepCtx, input)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">        }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    )</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithStepName</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithStepName(name string) StepOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Set a custom name for a step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithStepMaxRetries</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithStepMaxRetries(maxRetries int) StepOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Set the maximum number of times this step is automatically retired on failure.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">A value of 0 (the default) indicates no retries.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithMaxInterval</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithMaxInterval(interval time.Duration) StepOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">WithMaxInterval sets the maximum delay between retries. Default value is 5s.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithBackoffFactor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithBackoffFactor(factor float64) StepOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">WithBackoffFactor sets the exponential backoff multiplier between retries. Default value is 2.0.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WithBaseInterval</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func WithBaseInterval(interval time.Duration) StepOption</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">WithBaseInterval sets the initial delay between retries. Default value is 100ms.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func Go[R any](ctx DBOSContext, fn Step[R], opts ...StepOption) (chan StepOutcome[R], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Launch a step asynchronously and return a channel that will receive the result when the step completes.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is a durable alternative to Go&#x27;s native goroutines. Can only be called from within a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type StepOutcome[R any] struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Result R</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Err    error</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Select</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func Select[R any](ctx DBOSContext, channels []&lt;-chan StepOutcome[R]) (R, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Wait for and return the first result from multiple channels obtained from </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Go`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is a durable alternative to Go&#x27;s native </span><span class="token code-snippet code keyword" style="color:#66d9ef">`select`</span><span class="token plain"> statement. Can only be called from within a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> WorkflowHandle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type WorkflowHandle[R any] interface {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    GetResult(opts ...GetResultOption) (R, error)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    GetStatus() (WorkflowStatus, error)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    GetWorkflowID() string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">WorkflowHandle provides methods to interact with a running or completed workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The type parameter </span><span class="token code-snippet code keyword" style="color:#66d9ef">`R`</span><span class="token plain"> represents the expected return type of the workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Handles can be used to wait for workflow completion, check status, and retrieve results.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WorkflowHandle.GetResult</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">WorkflowHandle.GetResult(opts ...GetResultOption) (R, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Wait for the workflow to complete and return its result.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WorkflowHandle.GetStatus</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">WorkflowHandle.GetStatus() (WorkflowStatus, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve the WorkflowStatus of the workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> WorkflowHandle.GetWorkflowID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">WorkflowHandle.GetWorkflowID() string</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve the ID of the workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`Client`</span><span class="token plain"> provides a programmatic way to interact with your DBOS application from external code.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`Client`</span><span class="token plain"> includes methods similar to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSContext`</span><span class="token plain"> that can be used outside of a DBOS application.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::note</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code-snippet code keyword" style="color:#66d9ef">`Client`</span><span class="token plain"> is included in the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`dbos`</span><span class="token plain"> package, the same package that is used by DBOS applications.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Where DBOS applications use the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSContext`</span><span class="token plain"> methods,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">external applications use </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Client`</span><span class="token plain"> methods instead.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type Client interface {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Enqueue(queueName, workflowName string, input any, opts ...EnqueueOption) (WorkflowHandle[any], error)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ListWorkflows(opts ...ListWorkflowsOption) ([]WorkflowStatus, error)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Send(destinationID string, message any, topic string) error</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    GetEvent(targetWorkflowID, key string, timeout time.Duration) (any, error)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    RetrieveWorkflow(workflowID string) (WorkflowHandle[any], error)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    CancelWorkflow(workflowID string) error</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ResumeWorkflow(workflowID string) (WorkflowHandle[any], error)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ForkWorkflow(input ForkWorkflowInput) (WorkflowHandle[any], error)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    GetWorkflowSteps(workflowID string) ([]StepInfo, error)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ClientReadStream(workflowID string, key string) ([]any, bool, error)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ClientReadStreamAsync(workflowID string, key string) (&lt;-chan StreamValue[any], error)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Shutdown(timeout time.Duration)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Constructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func NewClient(ctx context.Context, config ClientConfig) (Client, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ctx`</span><span class="token plain">: A context for initialization operations</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`config`</span><span class="token plain">: A </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ClientConfig`</span><span class="token plain"> object with connection and application settings</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type ClientConfig struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    DatabaseURL        string        // DatabaseURL is a PostgreSQL connection string. Either this or SystemDBPool is required.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    SystemDBPool       *pgxpool.Pool // SystemDBPool is a custom System Database Pool. It&#x27;s optional and takes precedence over DatabaseURL if both are provided.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    DatabaseSchema string            // Database schema name (defaults to &quot;dbos&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Logger             *slog.Logger  // Optional custom logger</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Returns:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> A new </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Client`</span><span class="token plain"> instance or an error if initialization fails</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Example syntax:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This DBOS client connects to the system database specified in the configuration:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">config := dbos.ClientConfig{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    DatabaseURL: os.Getenv(&quot;DBOS_SYSTEM_DATABASE_URL&quot;),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">client, err := dbos.NewClient(context.Background(), config)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    log.Fatal(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">defer client.Shutdown(5 * time.Second)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">A client manages a connection pool to the DBOS system database. Calling </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Shutdown`</span><span class="token plain"> on a client will release the connection pool.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Shutdown</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">Shutdown(timeout time.Duration)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Gracefully shuts down the client and releases the system database connection pool.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`timeout`</span><span class="token plain">: Maximum time to wait for graceful shutdown</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Interaction Methods</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Enqueue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func Enqueue[P any, R any](</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    c Client,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    queueName string,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    workflowName string,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    input P,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    opts ...EnqueueOption</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">) (WorkflowHandle[R], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Enqueue a workflow for processing and return a handle to it, similar to RunWorkflow with the WithQueue option.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Returns a WorkflowHandle.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When enqueuing a workflow from the DBOS client, you must specify the name of the workflow to enqueue (rather than passing a workflow function as with </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RunWorkflow`</span><span class="token plain">.)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Required parameters:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">*</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`c`</span><span class="token plain">: The DBOS client instance</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">*</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`queueName`</span><span class="token plain">: The name of the queue on which to enqueue the workflow</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">*</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`workflowName`</span><span class="token plain">: The name of the workflow function being enqueued</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">*</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`input`</span><span class="token plain">: The input to pass to the workflow</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Optional configuration via </span><span class="token code-snippet code keyword" style="color:#66d9ef">`EnqueueOption`</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">*</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithEnqueueWorkflowID(id string)`</span><span class="token plain">: The unique ID for the enqueued workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If left undefined, DBOS Client will generate a UUID.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Please see Workflow IDs and Idempotency for more information.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">*</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithEnqueueApplicationVersion(version string)`</span><span class="token plain">: The version of your application that should process this workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If left undefined, it will use the current application version.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">*</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithEnqueueTimeout(timeout time.Duration)`</span><span class="token plain">: Set a timeout for the enqueued workflow. When the timeout expires, the workflow </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">and all its children</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> are cancelled (except if the child&#x27;s context has been made uncancellable using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithoutCancel`</span><span class="token plain">). The timeout does not begin until the workflow is dequeued and starts execution.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">*</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithEnqueueDeduplicationID(id string)`</span><span class="token plain">: At any given time, only one workflow with a specific deduplication ID can be enqueued in the specified queue. If a workflow with a deduplication ID is currently enqueued or actively executing (status </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ENQUEUED`</span><span class="token plain"> or </span><span class="token code-snippet code keyword" style="color:#66d9ef">`PENDING`</span><span class="token plain">), subsequent workflow enqueue attempts with the same deduplication ID in the same queue will fail.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">*</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WithEnqueuePriority(priority uint)`</span><span class="token plain">: The priority of the enqueued workflow in the specified queue. Workflows with the same priority are dequeued in </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">FIFO (first in, first out)</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> order. Priority values can range from </span><span class="token code-snippet code keyword" style="color:#66d9ef">`1`</span><span class="token plain"> to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`2,147,483,647`</span><span class="token plain">, where </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">a low number indicates a higher priority</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">. Workflows without assigned priorities have the highest priority and are dequeued before workflows with assigned priorities.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Example syntax:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">type ProcessInput struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    TaskID string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Data   string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">type ProcessOutput struct {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Result string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    Status string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">handle, err := dbos.Enqueue[ProcessInput, ProcessOutput](</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    client,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;process_queue&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    &quot;ProcessWorkflow&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    ProcessInput{TaskID: &quot;task-123&quot;, Data: &quot;data&quot;},</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithEnqueueTimeout(30 * time.Minute),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    dbos.WithEnqueuePriority(5),</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    log.Fatal(err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">result, err := handle.GetResult()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">if err != nil {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    log.Printf(&quot;Workflow failed: %v&quot;, err)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">} else {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">    log.Printf(&quot;Result: %+v&quot;, result)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-go">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> RetrieveWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">RetrieveWorkflow(workflowID string) (WorkflowHandle[any], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve the handle of a workflow with identity </span><span class="token code-snippet code keyword" style="color:#66d9ef">`workflowID`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Similar to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RetrieveWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`workflowID`</span><span class="token plain">: The identifier of the workflow whose handle to retrieve</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Returns:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> The WorkflowHandle of the workflow whose ID is </span><span class="token code-snippet code keyword" style="color:#66d9ef">`workflowID`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Send</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">Send(destinationID string, message any, topic string) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Sends a message to a specified workflow. Similar to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`Send`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`destinationID`</span><span class="token plain">: The workflow to which to send the message</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`message`</span><span class="token plain">: The message to send. Must be serializable</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`topic`</span><span class="token plain">: A topic with which to associate the message. Messages are enqueued per-topic on the receiver</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> GetEvent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">GetEvent(targetWorkflowID, key string, timeout time.Duration) (any, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve the latest value of an event published by the workflow identified by </span><span class="token code-snippet code keyword" style="color:#66d9ef">`targetWorkflowID`</span><span class="token plain"> to the key </span><span class="token code-snippet code keyword" style="color:#66d9ef">`key`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If the event does not yet exist, wait for it to be published, returning an error if the wait times out.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Similar to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`GetEvent`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`targetWorkflowID`</span><span class="token plain">: The identifier of the workflow whose events to retrieve</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`key`</span><span class="token plain">: The key of the event to retrieve</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#66d9ef">`timeout`</span><span class="token plain">: A timeout duration. If the wait times out, return an error</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Returns:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> The value of the event published by </span><span class="token code-snippet code keyword" style="color:#66d9ef">`targetWorkflowID`</span><span class="token plain"> with name </span><span class="token code-snippet code keyword" style="color:#66d9ef">`key`</span><span class="token plain">, or an error if the wait times out</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Management Methods</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> ListWorkflows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">ListWorkflows(opts ...ListWorkflowsOption) ([]WorkflowStatus, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve a list of </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WorkflowStatus`</span><span class="token plain"> of all workflows matching specified criteria.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Similar to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ListWorkflows`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Options:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Options are provided via </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ListWorkflowsOption`</span><span class="token plain"> functions. See </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ListWorkflows`</span><span class="token plain"> for available options.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::warning</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The client </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ListWorkflows`</span><span class="token plain"> method does not include workflow inputs and outputs in its results.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> GetWorkflowSteps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">GetWorkflowSteps(workflowID string) ([]StepInfo, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">List the steps of a given workflow. Returned entries do not include step outputs.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> CancelWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">CancelWorkflow(workflowID string) error</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Cancel a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This sets its status to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`CANCELLED`</span><span class="token plain">, removes it from its queue (if it is enqueued) and preempts its execution (interrupting it at the beginning of its next step).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Similar to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`CancelWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> ResumeWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">ResumeWorkflow(workflowID string) (WorkflowHandle[any], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Resume a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This immediately starts it from its last completed step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use this to resume workflows that are cancelled or have exceeded their maximum recovery attempts.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can also use this to start an enqueued workflow immediately, bypassing its queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Similar to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ResumeWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> ForkWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">ForkWorkflow(input ForkWorkflowInput) (WorkflowHandle[any], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Similar to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ForkWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> NewDebouncerClient</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func NewDebouncerClient[P any, R any](workflowName string, client Client, opts ...DebouncerOption) *DebouncerClient[P, R]</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Create a new debouncer client for use from outside a DBOS application.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Similar to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`NewDebouncer`</span><span class="token plain"> but uses a Client instead of a DBOSContext and takes a workflow name string instead of a function reference.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> ClientReadStream</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func ClientReadStream[R any](c Client, workflowID string, key string) ([]R, bool, error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Read all values from a durable stream produced by a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Blocks until the stream is closed or the workflow becomes inactive.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Similar to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ReadStream`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> ClientReadStreamAsync</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">go</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-go">func ClientReadStreamAsync[R any](c Client, workflowID string, key string) (&lt;-chan StreamValue[R], error)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Read values from a durable stream asynchronously.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Returns immediately with a channel that receives values as they are written to the stream.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Similar to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ReadStreamAsync`</span><span class="token plain">.</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/golang/integrating-dbos"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Add DBOS To Your App</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/golang/tutorials/workflow-tutorial"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Workflows</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-use" class="table-of-contents__link toc-highlight">How To Use</a></li><li><a href="#prompt" class="table-of-contents__link toc-highlight">Prompt</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Follow Us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/dbos-inc/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://bsky.app/profile/dbos.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bluesky<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/DBOS_Inc" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter/X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.dbos.dev/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.dbos.dev/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Questions or Comments?</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/fMwQjeW5zg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat with us on Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:contact@dbos.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Write to us at contact@dbos.dev<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://dbos.dev" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/dbos-logo.png" alt="DBOS Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="100"><img src="/img/dbos-logo-dark.png" alt="DBOS Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="100"></a></div><div class="footer__copyright">Copyright © 2026 DBOS, Inc. | <a href="https://www.dbos.dev/privacy" target="_blank">Privacy Policy</a></div></div></div></footer></div>
</body>
</html>