"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[1354],{4538:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>u,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"java/reference/queues","title":"Queues","description":"Workflow queues ensure that workflow functions will be run, without starting them immediately.","source":"@site/docs/java/reference/queues.md","sourceDirName":"java/reference","slug":"/java/reference/queues","permalink":"/java/reference/queues","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":40,"frontMatter":{"sidebar_position":40,"title":"Queues"},"sidebar":"tutorialSidebar","previous":{"title":"DBOS Methods & Variables","permalink":"/java/reference/methods"},"next":{"title":"DBOS Client","permalink":"/java/reference/client"}}');var i=r(4848),s=r(8453);const u={sidebar_position:40,title:"Queues"},o=void 0,a={},l=[{value:"Queue",id:"queue",level:3},{value:"DBOS.registerQueue",id:"dbosregisterqueue",level:3}];function c(e){const n={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Workflow queues ensure that workflow functions will be run, without starting them immediately.\nQueues are useful for controlling the number of workflows run in parallel, or the rate at which they are started."}),"\n",(0,i.jsx)(n.p,{children:"All queues must be created before DBOS is launched, as this allows recovery to proceed correctly."}),"\n",(0,i.jsx)(n.h3,{id:"queue",children:"Queue"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"new Queue(String name)\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public record Queue(\n    String name,\n    Integer concurrency,\n    Integer workerConcurrency,\n    boolean priorityEnabled,\n    boolean partitionedEnabled,\n    RateLimit rateLimit\n) { \n    public Queue withName(String name);\n    public Queue withConcurrency(Integer concurrency);\n    public Queue withWorkerConcurrency(Integer workerConcurrency);\n    public Queue withRateLimit(RateLimit rateLimit) {\n    public Queue withRateLimit(int limit, double period);\n    public Queue withPriorityEnabled(boolean priorityEnabled);\n    public Queue withPartitionedEnabled(boolean partitionedEnabled);\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Create a new workflow queue with the specified name and optional configuration parameters.\nQueues must be created and registered with ",(0,i.jsx)(n.a,{href:"#dbosregisterqueue",children:(0,i.jsx)(n.code,{children:"DBOS.registerQueue"})})," before DBOS is launched.\nYou can enqueue a workflow using the ",(0,i.jsx)(n.code,{children:"withQueue"})," parameter of ",(0,i.jsx)(n.a,{href:"/java/reference/workflows-steps#startworkflow",children:(0,i.jsx)(n.code,{children:"startWorkflow"})}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"name"}),": The name of the queue. Must be unique among all queues in the application."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"workerConcurrency"}),": The maximum number of workflows from this queue that may run concurrently within a single DBOS process."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"concurrency"}),": The maximum number of workflows from this queue that may run concurrently. This concurrency limit is global across all DBOS processes using this queue."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"rateLimit"}),": A limit on the maximum number of functions (",(0,i.jsx)(n.code,{children:"limit"}),") that may be started in a given period (",(0,i.jsx)(n.code,{children:"period"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"priorityEnabled"}),": Enable setting priority for workflows on this queue."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"partitionedEnabled"}),": Enable partitioning on this queue."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Syntax:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'Queue queue = new Queue("example-queue")\n  .withWorkerConcurrency(1);\n'})}),"\n",(0,i.jsx)(n.h3,{id:"dbosregisterqueue",children:"DBOS.registerQueue"}),"\n",(0,i.jsx)(n.p,{children:"Queues must be registered before DBOS is launched:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"static Queue registerQueue(Queue queue);\n"})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>u,x:()=>o});var t=r(6540);const i={},s=t.createContext(i);function u(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:u(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);