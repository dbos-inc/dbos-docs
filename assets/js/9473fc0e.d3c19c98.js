"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[5714],{6775:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"production/checklist","title":"Production Checklist","description":"This page describes best practices you should follow when operating a DBOS application in production.","source":"@site/docs/production/checklist.md","sourceDirName":"production","slug":"/production/checklist","permalink":"/production/checklist","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Production Checklist","toc_max_heading_level":3},"sidebar":"tutorialSidebar","previous":{"title":"Fault-Tolerant Checkout","permalink":"/java/examples/widget-store"},"next":{"title":"DBOS Conductor","permalink":"/production/conductor"}}');var i=o(4848),s=o(8453);const a={sidebar_position:5,title:"Production Checklist",toc_max_heading_level:3},r=void 0,c={},l=[{value:"Managing Postgres",id:"managing-postgres",level:2},{value:"Scalability",id:"scalability",level:2},{value:"Availability",id:"availability",level:2},{value:"Upgrading the DBOS Library",id:"upgrading-the-dbos-library",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",p:"p",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"This page describes best practices you should follow when operating a DBOS application in production."}),"\n",(0,i.jsx)(t.h2,{id:"managing-postgres",children:"Managing Postgres"}),"\n",(0,i.jsx)(t.p,{children:"DBOS is entirely built on Postgres.\nHere are some recommendations for configuring a Postgres database to best work with DBOS."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Use any Postgres"})," - DBOS is compatible with any Postgres database, including standard self-hosted Postgres, RDS, Aurora, Google Cloud SQL, Azure PostgreSQL, Supabase, Neon, Planetscale, TimescaleDB, etc."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"If using a connection pooler, use it session mode"})," - Connect your DBOS applications to your Postgres database either directly or using a connection pooler in session mode. Do not use a connection pooler in transaction mode as some Postgres features that DBOS uses (e.g., LISTEN/NOTIFY) are not compatible with it. ",(0,i.jsx)(t.a,{href:"https://www.pgbouncer.org/features.html",children:"This page"})," documents the differences."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Configure a retention policy"})," - You should configure a ",(0,i.jsx)(t.a,{href:"/production/retention",children:"retention policy"})," for the workflows in your DBOS application to limit the total amount of storage DBOS uses."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Manage the DBOS schema"})," - DBOS creates tables for its internal state in its ",(0,i.jsx)(t.a,{href:"/explanations/system-tables",children:"system database"}),".\nBy default, a DBOS application automatically creates these on startup.\nHowever, in production environments, a DBOS application may not run with sufficient privilege to create databases or tables.\nIn that case, the ",(0,i.jsx)(t.a,{href:"/python/reference/cli#dbos-migrate",children:(0,i.jsx)(t.code,{children:"dbos migrate"})})," command in Python, the ",(0,i.jsx)(t.a,{href:"/golang/reference/cli",children:(0,i.jsx)(t.code,{children:"dbos migrate"})})," in Go, or the ",(0,i.jsx)(t.a,{href:"/typescript/reference/cli#npx-dbos-schema",children:(0,i.jsx)(t.code,{children:"dbos schema"})})," command in TypeScript can be run with a privileged user to create all DBOS database tables or migrate them to the latest version.\nThen, a DBOS application can run with lower privilege (requiring only access to the DBOS tables in the system database)."]}),"\n",(0,i.jsx)(t.h2,{id:"scalability",children:"Scalability"}),"\n",(0,i.jsx)(t.p,{children:"You can easily scale a DBOS application by adding more servers to it, so the scalability of DBOS is fundamentally determined by the database it is connected to.\nWe recommend taking these steps in Postgres to guarantee the scalability of your application."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Monitor Connection Usage"})," - You can check the maximum number of connections your Postgres database can accept by running ",(0,i.jsx)(t.code,{children:"SHOW max_connections;"}),".\nTypically, a Postgres database can support 100 connections per gigabyte of memory.\nYou should make sure you have enough connections to support all your DBOS application servers.\nYou can configure the maximum number of connections a DBOS application can make through the ",(0,i.jsx)(t.code,{children:"sys_db_pool_size"}),"/",(0,i.jsx)(t.code,{children:"systemDatabasePoolSize"})," configuration parameter.\nWe do not recommend setting this to less than 5."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Monitor Database Usage"})," - A DBOS workflow requires two-three database writes (one at the beginning to checkpoint its input, one at the end to checkpoint its outcome, and optionally one to dequeue it if it was enqueued) plus one additional write per step (to checkpoint the step's outcome).\nDepending on size, a Postgres database can perform between 1K-10K writes per second.\nThus, an application can perform between 1K-10K workflows or steps per second, depending on database size.\nIf your expected load exceeds 1K workflows or steps per second, you should perform load tests to verify your Postgres database can handle the load.\nIf it exceeds 10K workflows or steps per second, we recommend sharding workflows across multiple Postgres servers."]}),"\n",(0,i.jsx)(t.h2,{id:"availability",children:"Availability"}),"\n",(0,i.jsx)(t.p,{children:"To maximize availability of your DBOS application, we recommend using a highly available Postgres database.\nMost cloud Postgres providers provide multi-AZ replication with automatic failover, so your database can seamlessly fail over to a backup if anything goes wrong.\nNote that there is nothing DBOS-specific about this\u2014we recommend following industry best practices for maximizing Postgres availability."}),"\n",(0,i.jsx)(t.p,{children:"If your Postgres database does become unavailable, all DBOS applications connected to it will pause workflow execution until they reconnect.\nWhen your database becomes available again, they will seamlessly resume."}),"\n",(0,i.jsx)(t.p,{children:"It is worth noting that DBOS Conductor is entirely out-of-band and off your application's workflow execution path.\nThus, its availability does not affect the availability of your applications.\nIf your connection to Conductor is interrupted, your applications will continue operating normally.\nAll Conductor features (recovery, observability, workflow management) will automatically resume once connectivity is restored."}),"\n",(0,i.jsx)(t.h2,{id:"upgrading-the-dbos-library",children:"Upgrading the DBOS Library"}),"\n",(0,i.jsxs)(t.p,{children:["We recommend regularly upgrading the DBOS library to its latest version to take advantage of new features.\nAll implementations of the DBOS library follow strict semantic versioning.\nMinor version upgrades do not introduce breaking changes.\nMajor version upgrades may introduce breaking changes, but these are always documented in the release notes.\nNew library versions are always announced on GitHub (",(0,i.jsx)(t.a,{href:"https://github.com/dbos-inc/dbos-transact-py/releases",children:"Python"}),", ",(0,i.jsx)(t.a,{href:"https://github.com/dbos-inc/dbos-transact-ts/releases",children:"TypeScript"}),", ",(0,i.jsx)(t.a,{href:"https://github.com/dbos-inc/dbos-transact-golang/releases",children:"Go"}),", ",(0,i.jsx)(t.a,{href:"https://github.com/dbos-inc/dbos-transact-java/releases",children:"Java"}),") and on the ",(0,i.jsx)(t.a,{href:"https://discord.com/invite/jsmC6pXGgX",children:"community Discord"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>a,x:()=>r});var n=o(6540);const i={},s=n.createContext(i);function a(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);