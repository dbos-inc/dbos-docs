"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[3887],{1955:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"python/tutorials/scheduled-workflows","title":"Scheduled Workflows","description":"Learn how to run DBOS workflows on a schedule.","source":"@site/docs/python/tutorials/scheduled-workflows.md","sourceDirName":"python/tutorials","slug":"/python/tutorials/scheduled-workflows","permalink":"/python/tutorials/scheduled-workflows","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":70,"frontMatter":{"sidebar_position":70,"title":"Scheduled Workflows","description":"Learn how to run DBOS workflows on a schedule."},"sidebar":"tutorialSidebar","previous":{"title":"Upgrading Workflow Code","permalink":"/python/tutorials/upgrading-workflows"},"next":{"title":"Logging & Tracing","permalink":"/python/tutorials/logging-and-tracing"}}');var r=t(4848),s=t(8453);const i={sidebar_position:70,title:"Scheduled Workflows",description:"Learn how to run DBOS workflows on a schedule."},c=void 0,a={},d=[{value:"How Scheduling Works",id:"how-scheduling-works",level:3}];function l(e){const o={a:"a",code:"code",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.p,{children:["You can schedule DBOS ",(0,r.jsx)(o.a,{href:"/python/tutorials/workflow-tutorial",children:"workflows"})," to run exactly once per time interval.\nTo do this, annotate the workflow with the ",(0,r.jsx)(o.a,{href:"/python/reference/decorators#scheduled",children:(0,r.jsx)(o.code,{children:"@DBOS.scheduled"})})," decorator and specify the schedule in ",(0,r.jsx)(o.a,{href:"https://en.wikipedia.org/wiki/Cron",children:"crontab"})," syntax.  For example:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"@DBOS.scheduled('* * * * *') # crontab syntax to run once every minute\n@DBOS.workflow()\ndef example_scheduled_workflow(scheduled_time: datetime, actual_time: datetime):\n    DBOS.logger.info(\"I am a workflow scheduled to run once a minute. \")\n"})}),"\n",(0,r.jsxs)(o.p,{children:["Scheduled workflows must take in exactly two arguments: the time that the run was scheduled (as a ",(0,r.jsx)(o.code,{children:"datetime"}),") and the time the run was actually started (as a ",(0,r.jsx)(o.code,{children:"datetime"}),").  Note that this means scheduled workflows should either be plain functions, or be ",(0,r.jsx)(o.code,{children:"@staticmethod"})," class members."]}),"\n",(0,r.jsxs)(o.p,{children:["To learn more about crontab syntax, see ",(0,r.jsx)(o.a,{href:"https://docs.gitlab.com/ee/topics/cron/",children:"this guide"})," or ",(0,r.jsx)(o.a,{href:"https://crontab.guru/",children:"this crontab editor"}),". DBOS uses ",(0,r.jsx)(o.a,{href:"https://pypi.org/project/croniter/",children:"croniter"})," to parse cron schedules, which is able to do second repetition and by default we use seconds as the first field.\nThe specification for the DBOS variant can be found in the ",(0,r.jsx)(o.a,{href:"/python/reference/decorators#scheduled",children:"decorator reference"}),"."]}),"\n",(0,r.jsx)(o.h3,{id:"how-scheduling-works",children:"How Scheduling Works"}),"\n",(0,r.jsxs)(o.p,{children:["Under the hood, DBOS constructs an ",(0,r.jsx)(o.a,{href:"/python/tutorials/workflow-tutorial#workflow-ids-and-idempotency",children:"idempotency key"})," for each workflow invocation.  The key is a concatenation of the function name and the scheduled time, ensuring each scheduled invocation occurs exactly once while your application is active."]})]})}function h(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,o,t)=>{t.d(o,{R:()=>i,x:()=>c});var n=t(6540);const r={},s=n.createContext(r);function i(e){const o=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(s.Provider,{value:o},e.children)}}}]);