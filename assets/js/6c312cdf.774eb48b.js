"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[729],{2275:(e,l,o)=>{o.d(l,{Ay:()=>t,RM:()=>i});var n=o(4848),s=o(8453);const i=[];function a(e){const l={a:"a",code:"code",p:"p",pre:"pre",...(0,s.R)(),...e.components},{TabItem:o,Tabs:i}=l;return o||c("TabItem",!0),i||c("Tabs",!0),(0,n.jsxs)(i,{groupId:"operating-systems",className:"small-tabs",children:[(0,n.jsxs)(o,{value:"maclinux",label:"macOS or Linux",children:[(0,n.jsx)(l.p,{children:"Run the following commands in your terminal:"}),(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-bash",children:'curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash\n\nexport NVM_DIR="$HOME/.nvm"\n[ -s "$NVM_DIR/nvm.sh" ] && \\. "$NVM_DIR/nvm.sh"  # This loads nvm\n\nnvm install 22\nnvm use 22\n'})})]}),(0,n.jsx)(o,{value:"win-ps",label:"Windows",children:(0,n.jsxs)(l.p,{children:["Download Node.js 20 or later from the ",(0,n.jsx)(l.a,{href:"https://nodejs.org/en/download",children:"official Node.js download page"})," and install it.\nAfter installing Node.js, create the following folder: ",(0,n.jsx)(l.code,{children:"C:\\Users\\%user%\\AppData\\Roaming\\npm"}),"\n(",(0,n.jsx)(l.code,{children:"%user%"})," is the Windows user on which you are logged in)."]})})]})}function t(e={}){const{wrapper:l}={...(0,s.R)(),...e.components};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}function c(e,l){throw new Error("Expected "+(l?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},3805:(e,l,o)=>{o.r(l),o.d(l,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"production/dbos-cloud/deploying-to-cloud","title":"Deploying to DBOS Cloud","description":"Any application built with DBOS can be deployed to DBOS Cloud.","source":"@site/docs/production/dbos-cloud/deploying-to-cloud.md","sourceDirName":"production/dbos-cloud","slug":"/production/dbos-cloud/deploying-to-cloud","permalink":"/production/dbos-cloud/deploying-to-cloud","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"Deploying to DBOS Cloud","hide_table_of_contents":true},"sidebar":"tutorialSidebar","previous":{"title":"Deploying With Google Cloud Run","permalink":"/production/hosting-with-cloud-run"},"next":{"title":"Application Management","permalink":"/production/dbos-cloud/application-management"}}');var s=o(4848),i=o(8453),a=o(2275);const t={sidebar_position:10,title:"Deploying to DBOS Cloud",hide_table_of_contents:!0},c=void 0,r={},d=[{value:"Deploying Your App to DBOS Cloud",id:"deploying-your-app-to-dbos-cloud",level:2},{value:"1. Install the DBOS Cloud CLI",id:"1-install-the-dbos-cloud-cli",level:4},...a.RM,{value:"2. Create a requirements.txt File",id:"2-create-a-requirementstxt-file",level:4},{value:"3. Define a Start Command",id:"3-define-a-start-command",level:4},{value:"4. Deploy to DBOS Cloud",id:"4-deploy-to-dbos-cloud",level:4},{value:"1. Install the DBOS Cloud CLI",id:"1-install-the-dbos-cloud-cli-1",level:4},{value:"2. Define a Start Command",id:"2-define-a-start-command",level:4},{value:"3. Deploy to DBOS Cloud",id:"3-deploy-to-dbos-cloud",level:4},{value:"1. Install the DBOS Cloud CLI",id:"1-install-the-dbos-cloud-cli-2",level:4},...a.RM,{value:"2. Configure DBOS",id:"2-configure-dbos",level:4},{value:"3. Provide a configuration file",id:"3-provide-a-configuration-file",level:4},{value:"4. Deploy to DBOS Cloud",id:"4-deploy-to-dbos-cloud-1",level:4},{value:"DBOS Cloud How-Tos",id:"dbos-cloud-how-tos",level:2},{value:"HTTP Serving &amp; Port Numbers",id:"http-serving--port-numbers",level:3},{value:"Environment Management",id:"environment-management",level:3},{value:"Database Setup",id:"database-setup",level:3},{value:"System Database",id:"system-database",level:4},{value:"Cloud-Provided Application Databases",id:"cloud-provided-application-databases",level:4}];function u(e){const l={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:o,LargeTabItem:n,LargeTabs:t}=l;return o||p("Details",!0),n||p("LargeTabItem",!0),t||p("LargeTabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.p,{children:"Any application built with DBOS can be deployed to DBOS Cloud.\nDBOS Cloud is a serverless platform for durably executed applications.\nIt provides:"}),"\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.a,{href:"/production/dbos-cloud/application-management",children:(0,s.jsx)(l.strong,{children:"Application hosting and autoscaling"})}),": Managed hosting of your application in the cloud, automatically scaling to millions of users. Applications are charged only for the CPU time they actually consume."]}),"\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.a,{href:"/production/dbos-cloud/application-management",children:(0,s.jsx)(l.strong,{children:"Managed workflow recovery"})}),": If a cloud executor is interrupted, crashed, or restarted, each of its workflows is automatically recovered by another executor."]}),"\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.a,{href:"/production/dbos-cloud/workflow-management",children:(0,s.jsx)(l.strong,{children:"Workflow and queue management"})}),": Dashboards of all active and past workflows and all queued tasks, including their status, inputs, outputs, and steps. Cancel, resume, or restart any workflow execution and manage the tasks in your distributed queues."]}),"\n"]}),"\n",(0,s.jsx)(l.h2,{id:"deploying-your-app-to-dbos-cloud",children:"Deploying Your App to DBOS Cloud"}),"\n",(0,s.jsxs)(t,{groupId:"language",queryString:"language",children:[(0,s.jsxs)(n,{value:"python",label:"Python",children:[(0,s.jsx)(l.h4,{id:"1-install-the-dbos-cloud-cli",children:"1. Install the DBOS Cloud CLI"}),(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.p,{children:"The Cloud CLI requires Node.js 20 or later."})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsxs)(o,{children:[(0,s.jsx)("summary",{children:"Instructions to install Node.js"}),(0,s.jsx)(a.Ay,{})]})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.p,{children:"Run this command to install it."})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-shell",children:"npm i -g @dbos-inc/dbos-cloud@latest\n"})})})]}),(0,s.jsx)(l.h4,{id:"2-create-a-requirementstxt-file",children:"2. Create a requirements.txt File"}),(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsxs)("article",{className:"col col--6",children:[(0,s.jsxs)(l.p,{children:["Create a ",(0,s.jsx)(l.code,{children:"requirements.txt"})," file listing your application's dependencies."]}),(0,s.jsxs)(l.p,{children:["As DBOS Cloud uses OpenTelemetry to export your application's logs and traces, you should install the DBOS OpenTelemetry dependencies through ",(0,s.jsx)(l.code,{children:"pip install dbos[otel]"})," before generating ",(0,s.jsx)(l.code,{children:"requirements.txt"}),"."]})]}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-shell",children:"pip freeze > requirements.txt\n"})})})]}),(0,s.jsx)(l.h4,{id:"3-define-a-start-command",children:"3. Define a Start Command"}),(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsxs)("article",{className:"col col--6",children:[(0,s.jsxs)(l.p,{children:["Set the ",(0,s.jsx)(l.code,{children:"start"})," command in the ",(0,s.jsx)(l.code,{children:"runtimeConfig"})," section of your ",(0,s.jsx)(l.a,{href:"/python/reference/configuration",children:(0,s.jsx)(l.code,{children:"dbos-config.yaml"})})," to your application's launch command."]}),(0,s.jsx)(l.p,{children:"If your application includes an HTTP server, configure it to listen on port 8000."}),(0,s.jsxs)(l.p,{children:["To test that it works, try launching your application with ",(0,s.jsx)(l.code,{children:"dbos start"}),"."]})]}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-yaml",children:'runtimeConfig:\n  start:\n    - "fastapi run"\n'})})})]}),(0,s.jsx)(l.h4,{id:"4-deploy-to-dbos-cloud",children:"4. Deploy to DBOS Cloud"}),(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.p,{children:"Run this single command to deploy your application to DBOS Cloud!"})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-shell",children:"dbos-cloud app deploy\n"})})})]})]}),(0,s.jsxs)(n,{value:"typescript",label:"TypeScript",children:[(0,s.jsx)(l.h4,{id:"1-install-the-dbos-cloud-cli-1",children:"1. Install the DBOS Cloud CLI"}),(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.p,{children:"Run this command to install the Cloud CLI globally."})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-shell",children:"npm i -g @dbos-inc/dbos-cloud@latest\n"})})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.p,{children:"As DBOS Cloud uses OpenTelemetry to export your application's logs and traces, you must install the DBOS OpenTelemetry dependencies into your application:"})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-shell",children:"npm i @dbos-inc/otel@latest\n"})})})]}),(0,s.jsx)(l.h4,{id:"2-define-a-start-command",children:"2. Define a Start Command"}),(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsxs)("article",{className:"col col--6",children:[(0,s.jsxs)(l.p,{children:["Set the ",(0,s.jsx)(l.code,{children:"start"})," command in the ",(0,s.jsx)(l.code,{children:"runtimeConfig"})," section of your ",(0,s.jsx)(l.a,{href:"/typescript/reference/configuration",children:(0,s.jsx)(l.code,{children:"dbos-config.yaml"})})," to your application's launch command."]}),(0,s.jsx)(l.p,{children:"If your application includes an HTTP server, configure it to listen on port 3000."}),(0,s.jsxs)(l.p,{children:["To test that it works, try launching your application with ",(0,s.jsx)(l.code,{children:"npx dbos start"}),"."]})]}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-yaml",children:'runtimeConfig:\n  start:\n    - "npm start"\n'})})})]}),(0,s.jsx)(l.h4,{id:"3-deploy-to-dbos-cloud",children:"3. Deploy to DBOS Cloud"}),(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.p,{children:"Run this single command to deploy your application to DBOS Cloud!"})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-shell",children:"dbos-cloud app deploy\n"})})})]})]}),(0,s.jsxs)(n,{value:"golang",label:"Go",children:[(0,s.jsx)(l.h4,{id:"1-install-the-dbos-cloud-cli-2",children:"1. Install the DBOS Cloud CLI"}),(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.p,{children:"The Cloud CLI requires Node.js 20 or later."})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsxs)(o,{children:[(0,s.jsx)("summary",{children:"Instructions to install Node.js"}),(0,s.jsx)(a.Ay,{})]})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.p,{children:"Run this command to install it."})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-shell",children:"npm i -g @dbos-inc/dbos-cloud@latest\n"})})})]}),(0,s.jsx)(l.h4,{id:"2-configure-dbos",children:"2. Configure DBOS"}),(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsxs)("article",{className:"col col--6",children:[(0,s.jsxs)(l.p,{children:["Your DBOSContext ",(0,s.jsx)(l.a,{href:"/golang/reference/dbos-context",children:"Config"})," must be set with:"]}),(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.code,{children:"AdminServer"})," enabled and listening on port 3001 (the default port)"]}),"\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.code,{children:"DatabaseURL"})," (or your custom ",(0,s.jsx)(l.code,{children:"pgxpool"}),") must point to an environment variable named ",(0,s.jsx)(l.code,{children:"DBOS_SYSTEM_DATABASE_URL"})]}),"\n"]})]}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-go",children:'dbos.Config{\n    AppName:     "dbos-starter",\n    DatabaseURL: os.Getenv("DBOS_SYSTEM_DATABASE_URL"),\n    AdminServer: true,\n}\n'})})})]}),(0,s.jsx)(l.h4,{id:"3-provide-a-configuration-file",children:"3. Provide a configuration file"}),(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsxs)("article",{className:"col col--6",children:[(0,s.jsxs)(l.p,{children:["In a file named ",(0,s.jsx)(l.code,{children:"dbos-config.yaml"}),", set these fields:"]}),(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.code,{children:"name"}),": your application name. Must match ",(0,s.jsx)(l.code,{children:"AppName"})," in your ",(0,s.jsx)(l.code,{children:"dbos.Config"})]}),"\n",(0,s.jsxs)(l.li,{children:[(0,s.jsx)(l.code,{children:"language"}),": must be ",(0,s.jsx)(l.code,{children:"go"})]}),"\n"]})]}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-yaml",children:"name: your-app-name\nlanguage: go\n"})})})]}),(0,s.jsx)(l.h4,{id:"4-deploy-to-dbos-cloud-1",children:"4. Deploy to DBOS Cloud"}),(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsxs)("article",{className:"col col--6",children:[(0,s.jsxs)(l.p,{children:["Finally, build your application under the name ",(0,s.jsx)(l.code,{children:"main"}),", against linux/adm64, then run this command to deploy your application to DBOS Cloud!"]}),(0,s.jsx)(l.admonition,{type:"info",children:(0,s.jsx)(l.p,{children:"DBOS Cloud will serve HTTP traffic on port 8080. Make sure to use that port when configuring web servers."})})]}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-shell",children:"GOOS=linux GOARCH=amd64 go build -o main .\ndbos-cloud app deploy\n"})})})]})]})]}),"\n",(0,s.jsx)(l.h2,{id:"dbos-cloud-how-tos",children:"DBOS Cloud How-Tos"}),"\n",(0,s.jsx)(l.h3,{id:"http-serving--port-numbers",children:"HTTP Serving & Port Numbers"}),"\n",(0,s.jsx)(l.p,{children:"DBOS Cloud provides your application with an HTTPS URL and routes traffic to it.\nIt expects applications to listen for HTTP requests on port 3000 (TypeScript) or port 8000 (Python)."}),"\n",(0,s.jsx)(l.h3,{id:"environment-management",children:"Environment Management"}),"\n",(0,s.jsxs)(l.p,{children:["We recommend you configure your application with environment variables.\nYou can use ",(0,s.jsx)(l.a,{href:"/production/dbos-cloud/secrets",children:"DBOS Cloud secrets"})," to pass environment variables to your cloud application.\nYou can even ",(0,s.jsx)(l.a,{href:"/production/dbos-cloud/secrets#importing-secrets",children:"import secrets"})," into DBOS Cloud from a ",(0,s.jsx)(l.code,{children:".env"})," file."]}),"\n",(0,s.jsx)(l.h3,{id:"database-setup",children:"Database Setup"}),"\n",(0,s.jsx)(l.h4,{id:"system-database",children:"System Database"}),"\n",(0,s.jsxs)(l.p,{children:["DBOS Cloud automatically constructs a system database for your application.\nYou can access it at ",(0,s.jsx)(l.code,{children:"DBOS_SYSTEM_DATABASE_URL"}),".\nYou should not attempt to override or modify this URL."]}),"\n",(0,s.jsx)(l.h4,{id:"cloud-provided-application-databases",children:"Cloud-Provided Application Databases"}),"\n",(0,s.jsxs)(l.p,{children:["You may connect an application database to your application through DBOS Cloud.\nIf you do, connection information is provided via the ",(0,s.jsx)(l.code,{children:"DBOS_DATABASE_URL"})," environment variable."]}),"\n",(0,s.jsxs)(l.p,{children:["You may optionally direct DBOS Cloud to run migrations to set up your application's database schema by specifying migration commands in your ",(0,s.jsx)(l.code,{children:"dbos-config.yaml"})," file:"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{className:"language-yaml",children:"migrate:\n  - npx knex migrate:latest\n"})}),"\n",(0,s.jsxs)(l.p,{children:["DBOS Cloud will provide a database URL to your migrations through the ",(0,s.jsx)(l.code,{children:"DBOS_DATABASE_URL"})," environment variable."]})]})}function h(e={}){const{wrapper:l}={...(0,i.R)(),...e.components};return l?(0,s.jsx)(l,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}function p(e,l){throw new Error("Expected "+(l?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,l,o)=>{o.d(l,{R:()=>a,x:()=>t});var n=o(6540);const s={},i=n.createContext(s);function a(e){const l=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function t(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(i.Provider,{value:l},e.children)}}}]);