"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[916],{8901:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var i=n(4848),r=n(8453);const o={sidebar_position:30,title:"Project Structure",description:"Learn about the structure of a DBOS project",pagination_next:null},s=void 0,c={id:"typescript/tutorials/application-structure-explanation",title:"Project Structure",description:"Learn about the structure of a DBOS project",source:"@site/docs/typescript/tutorials/application-structure-explanation.md",sourceDirName:"typescript/tutorials",slug:"/typescript/tutorials/application-structure-explanation",permalink:"/typescript/tutorials/application-structure-explanation",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:30,frontMatter:{sidebar_position:30,title:"Project Structure",description:"Learn about the structure of a DBOS project",pagination_next:null},sidebar:"tutorialSidebar",previous:{title:"Self-Hosting",permalink:"/typescript/tutorials/self-hosting"}},a={},l=[];function d(e){const t={a:"a",code:"code",em:"em",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["When you initialize a DBOS project with ",(0,i.jsx)(t.code,{children:"npx @dbos-inc/create"}),", it has the following structure:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"dbos-hello-app/\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 dbos-config.yaml\n\u251c\u2500\u2500 eslint.config.js\n\u251c\u2500\u2500 jest.config.js\n\u251c\u2500\u2500 knexfile.js\n\u251c\u2500\u2500 migrations/\n\u251c\u2500\u2500 node_modules/\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 package-lock.json\n\u251c\u2500\u2500 src/\n\u2502   |\u2500\u2500 operations.ts\n\u2502   \u2514\u2500\u2500 operations.test.ts\n\u251c\u2500\u2500 start_postgres_docker.js\n\u2514\u2500\u2500 tsconfig.json\n"})}),"\n",(0,i.jsxs)(t.p,{children:["The two most important files in a DBOS project are ",(0,i.jsx)(t.code,{children:"dbos-config.yaml"})," and ",(0,i.jsx)(t.code,{children:"src/operations.ts"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"dbos-config.yaml"})," defines the configuration of a DBOS project, including database connection information, migration configuration, and global logging configuration.\nAll options are documented in our ",(0,i.jsx)(t.a,{href:"../reference/configuration",children:"configuration reference"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"src/operations.ts"})," is the ",(0,i.jsx)(t.em,{children:"entrypoint"}),", where DBOS looks for your code.\nAt startup, the DBOS runtime automatically loads all classes that are exported or (directly and indirectly) referenced from this file, serving their endpoints and registering their decorated functions.\nMore precisely, DBOS assumes your compiled code is exported from ",(0,i.jsx)(t.code,{children:"dist/operations.js"}),", the default location to which ",(0,i.jsx)(t.code,{children:"src/operations.ts"})," is compiled.\nIf you're writing a small application, you can write all your code directly in this file.\nIn a larger application, you can write your code wherever you want, but should use ",(0,i.jsx)(t.code,{children:"src/operations.ts"})," as an index file, exporting code written elsewhere:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"// Placed in operations.ts:\nexport { OperationClass1, OperationClass2 } from './FileA';\nexport { OperationClass3 } from './operations/FileB';\n"})}),"\n",(0,i.jsxs)(t.p,{children:["It is not necessary to export classes that are already referenced by the entrypoint file(s), as these will be loaded and decorated methods will be registered.\nYou can also define multiple entrypoint files using the ",(0,i.jsx)(t.code,{children:"runtimeConfig"})," section of the ",(0,i.jsx)(t.a,{href:"../reference/configuration#runtime",children:"configuration"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"As for the rest of the directory:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"src/operations.test.ts"})," contains example unit tests written with ",(0,i.jsx)(t.a,{href:"https://jestjs.io/",children:"Jest"})," and our ",(0,i.jsx)(t.a,{href:"/typescript/tutorials/testing-tutorial",children:"testing runtime"}),". ",(0,i.jsx)(t.code,{children:"jest.config.js"})," contains Jest configuration."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"knexfile.js"})," is a configuration file for ",(0,i.jsx)(t.a,{href:"https://knexjs.org",children:"Knex"}),", which we use as a query builder and migration tool."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"migrations"})," is initialized with a Knex database migration used in the ",(0,i.jsx)(t.a,{href:"../../quickstart",children:"quickstart guide"}),".  You can replace this with your own migration files."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"node_modules"}),", ",(0,i.jsx)(t.code,{children:"package.json"}),", ",(0,i.jsx)(t.code,{children:"package-lock.json"}),", and ",(0,i.jsx)(t.code,{children:"tsconfig.json"})," are needed by all Node/Typescript projects. ",(0,i.jsx)(t.code,{children:"eslint.config.js"})," is used by the JavaScript/TypeScript linter, ",(0,i.jsx)(t.a,{href:"https://eslint.org/",children:"ESLint"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"start_postgres_docker.js"})," is a convenience script that initializes a Docker Postgres container for use in the ",(0,i.jsx)(t.a,{href:"../../quickstart",children:"quickstart"}),". You can modify this script if you want to use Docker-hosted Postgres for local development."]}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>c});var i=n(6540);const r={},o=i.createContext(r);function s(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);