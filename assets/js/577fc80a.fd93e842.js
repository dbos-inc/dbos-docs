"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[904],{1164:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>i});var o=t(4848),s=t(8453);const i=[];function a(e){const n={a:"a",code:"code",p:"p",pre:"pre",...(0,s.R)(),...e.components},{TabItem:t,Tabs:i}=n;return t||r("TabItem",!0),i||r("Tabs",!0),(0,o.jsxs)(i,{groupId:"operating-systems",className:"small-tabs",children:[(0,o.jsxs)(t,{value:"maclinux",label:"macOS or Linux",children:[(0,o.jsx)(n.p,{children:"Run the following commands in your terminal:"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash\n\nexport NVM_DIR="$HOME/.nvm"\n[ -s "$NVM_DIR/nvm.sh" ] && \\. "$NVM_DIR/nvm.sh"  # This loads nvm\n\nnvm install 22\nnvm use 22\n'})})]}),(0,o.jsx)(t,{value:"win-ps",label:"Windows",children:(0,o.jsxs)(n.p,{children:["Download Node.js 20 or later from the ",(0,o.jsx)(n.a,{href:"https://nodejs.org/en/download",children:"official Node.js download page"})," and install it.\nAfter installing Node.js, create the following folder: ",(0,o.jsx)(n.code,{children:"C:\\Users\\%user%\\AppData\\Roaming\\npm"}),"\n(",(0,o.jsx)(n.code,{children:"%user%"})," is the Windows user on which you are logged in)."]})})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}function r(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},3874:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"python/examples/cron-starter","title":"Cloud Cron Quickstart","description":"Let\'s say you want to run some code on a schedule.  For example, you want to:","source":"@site/docs/python/examples/cron-starter.md","sourceDirName":"python/examples","slug":"/python/examples/cron-starter","permalink":"/python/examples/cron-starter","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"displayed_sidebar":"examplesSidebar","sidebar_position":10,"title":"Cloud Cron Quickstart","hide_table_of_contents":true},"sidebar":"examplesSidebar","previous":{"title":"Earthquake Tracker","permalink":"/python/examples/earthquake-tracker"},"next":{"title":"Fault-Tolerant Checkout","permalink":"/typescript/examples/checkout-tutorial"}}');var s=t(4848),i=t(8453);t(1164);const a={displayed_sidebar:"examplesSidebar",sidebar_position:10,title:"Cloud Cron Quickstart",hide_table_of_contents:!0},l=void 0,r={},c=[{value:"Tutorial",id:"tutorial",level:3},{value:"1. Select the Cloud Cron Starter",id:"1-select-the-cloud-cron-starter",level:4},{value:"2. Connect to GitHub and Deploy to DBOS Cloud",id:"2-connect-to-github-and-deploy-to-dbos-cloud",level:4},{value:"3. View Your Application",id:"3-view-your-application",level:4},{value:"4. Start Building",id:"4-start-building",level:4},{value:"Next Steps",id:"next-steps",level:3},{value:"Running It Locally",id:"running-it-locally",level:3},{value:"1. Git Clone Your Application",id:"1-git-clone-your-application",level:4},{value:"2. Set up a virtual environment",id:"2-set-up-a-virtual-environment",level:4},{value:"3. Start Your Appliation",id:"3-start-your-appliation",level:4}];function d(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{TabItem:o,Tabs:a}=n;return o||h("TabItem",!0),a||h("Tabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Let's say you want to run some code ",(0,s.jsx)(n.strong,{children:"on a schedule"}),".  For example, you want to:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Record a stock's price once a minute."}),"\n",(0,s.jsx)(n.li,{children:"Migrate some data from one database to another once an hour."}),"\n",(0,s.jsx)(n.li,{children:"Send emails to inactive users once a week."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This kind of code isn't easy to manage because the server running it has to always be \"on\"\u2014you can't just run it on your laptop."}),"\n",(0,s.jsxs)(n.p,{children:["In this tutorial, we'll show you how to use DBOS to ",(0,s.jsx)(n.strong,{children:"run code on a schedule in the cloud"})," so you don't have to worry about maintaining it.\nYou'll learn how to write a scheduled (cron) function in ",(0,s.jsx)(n.strong,{children:"just 6 lines of Python code"})," and deploy it to the cloud with ",(0,s.jsx)(n.strong,{children:"a single click"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"tutorial",children:"Tutorial"}),"\n",(0,s.jsx)(n.h4,{id:"1-select-the-cloud-cron-starter",children:"1. Select the Cloud Cron Starter"}),"\n",(0,s.jsxs)(n.p,{children:["Visit ",(0,s.jsx)(n.a,{href:"https://console.dbos.dev/launch",children:"https://console.dbos.dev/launch"})," and select the DBOS Cron Starter.\nWhen prompted, create a database for your app with default settings."]}),"\n",(0,s.jsx)("img",{src:t(5335).A,alt:"Cloud Console Templates",width:"800",className:"custom-img"}),"\n",(0,s.jsx)(n.h4,{id:"2-connect-to-github-and-deploy-to-dbos-cloud",children:"2. Connect to GitHub and Deploy to DBOS Cloud"}),"\n",(0,s.jsx)(n.p,{children:"To ensure you can easily update your project after deploying it, DBOS will create a GitHub repository for you.\nYou can deploy directly from that GitHub repository to DBOS Cloud."}),"\n",(0,s.jsx)(n.p,{children:"First, sign in to your GitHub account.\nThen, set your repository name and whether it should be public or private."}),"\n",(0,s.jsx)(n.p,{children:'Next, click "Create GitHub Repo and Deploy" and DBOS will clone a copy of the source code into your GitHub account, then deploy your project to DBOS Cloud.\nIn less than a minute, your app should deploy successfully.'}),"\n",(0,s.jsx)("img",{src:t(1695).A,alt:"Deploy with GitHub",width:"1000",className:"custom-img"}),"\n",(0,s.jsx)(n.h4,{id:"3-view-your-application",children:"3. View Your Application"}),"\n",(0,s.jsx)(n.p,{children:"At this point, your app is running code on a schedule in the cloud!\nVisit its URL to see it\u2014it should look like this:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Cloud Cron Starter",src:t(4979).A+"",width:"711",height:"889"})}),"\n",(0,s.jsxs)(n.p,{children:["To see your new app's code, visit your new GitHub repository and open ",(0,s.jsx)(n.code,{children:"app/main.py"}),".\nThe app schedules a function incrementing a counter to run once a minute (the cron syntax ",(0,s.jsx)(n.code,{children:"* * * * *"}),' means "once a minute").\nThe app page displays the current value of the counter.']}),"\n",(0,s.jsx)(n.h4,{id:"4-start-building",children:"4. Start Building"}),"\n",(0,s.jsxs)(n.p,{children:["To start building, edit your application on GitHub (source code is in ",(0,s.jsx)(n.code,{children:"app/main.py"}),'), commit your changes, then press "Deploy From GitHub" on your ',(0,s.jsx)(n.a,{href:"https://console.dbos.dev/applications",children:"applications page"})," to see your changes reflected in the live application."]}),"\n",(0,s.jsx)("img",{src:t(8061).A,alt:"Deploy with GitHub",width:"800",className:"custom-img"}),"\n",(0,s.jsx)(n.h3,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.p,{children:["You can adapt this 6-line starter to implement your own scheduled job.\nReplace ",(0,s.jsx)(n.code,{children:"scheduled_function"})," with your own function to run it on a schedule!\nSome useful implementation notes:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Schedules are specified in crontab syntax.\nFor example, ",(0,s.jsx)(n.code,{children:"* * * * *"}),' means "run once a minute."\nTo learn more about crontab syntax, see ',(0,s.jsx)(n.a,{href:"https://docs.gitlab.com/ee/topics/cron/",children:"this guide"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["The two arguments passed into ",(0,s.jsx)(n.code,{children:"scheduled_function"})," are the time the run was scheduled (as a ",(0,s.jsx)(n.code,{children:"datetime"}),") and the time the run was actually started (as a ",(0,s.jsx)(n.code,{children:"datetime"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["For more information, see the ",(0,s.jsx)(n.a,{href:"/python/tutorials/scheduled-workflows",children:"scheduling documentation"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Here are two larger examples built with DBOS scheduling:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/python/examples/hacker-news-bot",children:(0,s.jsx)(n.strong,{children:"Hacker News Slackbot"})}),": Periodically search Hacker News for people commenting about serverless computing and post the comments to Slack."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/python/examples/earthquake-tracker",children:(0,s.jsx)(n.strong,{children:"Earthquake Tracker"})}),": Use a scheduled job to scrape earthquake data from the USGS, then build a real-time earthquake dashboard over it."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"running-it-locally",children:"Running It Locally"}),"\n",(0,s.jsx)(n.p,{children:"You can also run your application locally for development and testing."}),"\n",(0,s.jsx)(n.h4,{id:"1-git-clone-your-application",children:"1. Git Clone Your Application"}),"\n",(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(n.p,{children:"Clone your application from git and enter its directory."})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git clone <your-git-url>\ncd dbos-cron-starter\n"})})})]}),"\n",(0,s.jsx)(n.h4,{id:"2-set-up-a-virtual-environment",children:"2. Set up a virtual environment"}),"\n",(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(n.p,{children:"Create a virtual environment and install dependencies."})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsxs)(a,{groupId:"operating-systems",className:"small-tabs",children:[(0,s.jsx)(o,{value:"maclinux",label:"macOS or Linux",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"python3 -m venv .venv\nsource .venv/bin/activate\npip install -r requirements.txt\n"})})}),(0,s.jsx)(o,{value:"win-ps",label:"Windows (PowerShell)",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"python3 -m venv .venv\n.venv\\Scripts\\activate.ps1\npip install -r requirements.txt\n"})})}),(0,s.jsx)(o,{value:"win-cmd",label:"Windows (cmd)",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"python3 -m venv .venv\n.venv\\Scripts\\activate.bat\npip install -r requirements.txt\n"})})})]})})]}),"\n",(0,s.jsx)(n.h4,{id:"3-start-your-appliation",children:"3. Start Your Appliation"}),"\n",(0,s.jsxs)("section",{className:"row list",children:[(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsxs)(n.p,{children:["Start your application with ",(0,s.jsx)(n.code,{children:"dbos start"}),", then visit ",(0,s.jsx)(n.a,{href:"http://localhost:8000",children:(0,s.jsx)(n.code,{children:"http://localhost:8000"})})," to see it!"]})}),(0,s.jsx)("article",{className:"col col--6",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"dbos start\n"})})})]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},5335:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/1-pick-template-1881b2907a4dece0d05d91813ac17af4.png"},1695:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/2-ready-deploy-d8c1db058b5a94e15696f97bfbf54f58.png"},8061:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/4-app-page-e690dec0fa39d55e66fb85012d5a796f.png"},4979:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/cron-starter-464c48ee715d8e185b16d3c9050d31c0.png"},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var o=t(6540);const s={},i=o.createContext(s);function a(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);