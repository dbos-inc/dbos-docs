"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[1195],{4560:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"cloud-tutorials/application-management","title":"Application Management","description":"Learn how to manage DBOS Cloud applications","source":"@site/docs/cloud-tutorials/application-management.md","sourceDirName":"cloud-tutorials","slug":"/cloud-tutorials/application-management","permalink":"/cloud-tutorials/application-management","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Application Management","description":"Learn how to manage DBOS Cloud applications","pagination_prev":null},"sidebar":"tutorialSidebar","next":{"title":"Account Management","permalink":"/cloud-tutorials/account-management"}}');var a=i(4848),s=i(8453);const t={sidebar_position:1,title:"Application Management",description:"Learn how to manage DBOS Cloud applications",pagination_prev:null},l=void 0,r={},c=[{value:"Deploying Applications",id:"deploying-applications",level:3},{value:"Dependency Management",id:"dependency-management",level:4},{value:"Customizing MicroVM Setup",id:"customizing-microvm-setup",level:4},{value:"Ignoring files with .dbosignore",id:"ignoring-files-with-dbosignore",level:4},{value:"Monitoring and Debugging Applications",id:"monitoring-and-debugging-applications",level:3},{value:"Managing Application Versions",id:"managing-application-versions",level:3},{value:"Updating Applications",id:"updating-applications",level:3},{value:"Deleting Applications",id:"deleting-applications",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{TabItem:i,Tabs:o}=n;return i||u("TabItem",!0),o||u("Tabs",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h3,{id:"deploying-applications",children:"Deploying Applications"}),"\n",(0,a.jsx)(n.p,{children:"To deploy your application to DBOS Cloud or update an existing application, run this command in its root directory:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"dbos-cloud app deploy\n"})}),"\n",(0,a.jsx)(n.p,{children:"Each time you deploy an application, the following steps execute:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Upload"}),": An archive of your application folder is created and uploaded to DBOS Cloud. This archive can be up to 500 MB in size."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Configuration"}),": Your application's dependencies ",(0,a.jsx)(n.a,{href:"#dependency-management",children:"are installed"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Migration"}),": If you specify database migrations in your ",(0,a.jsx)(n.code,{children:"dbos-config.yaml"}),", these are run on your cloud database."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Deployment"}),": Your application is deployed to a number of ",(0,a.jsx)(n.a,{href:"https://firecracker-microvm.github.io/",children:"Firecracker microVMs"}),".\nBy default, these have 1 vCPU and 512MB of RAM.\nThe amount of memory allocated to each microVM is ",(0,a.jsx)(n.a,{href:"/cloud-tutorials/cloud-cli#dbos-cloud-app-update",children:"configurable"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["After an application is deployed, it is assigned a domain of the form ",(0,a.jsx)(n.code,{children:"https://<username>-<app-name>.cloud.dbos.dev/"}),".\nIf your account is part of an ",(0,a.jsx)(n.a,{href:"/cloud-tutorials/account-management#organization-management",children:"organization"}),", organization name is used instead of username."]}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Applications should serve requests from port 8000 (Python\u2014the default port for FastAPI and Gunicorn) or 3000 (TypeScript\u2014the default port for Express and Koa)."}),"\n",(0,a.jsx)(n.li,{children:"Multiple applications can connect to the same Postgres database server\u2014they are deployed to isolated databases on that server."}),"\n",(0,a.jsxs)(n.li,{children:["You don't have to worry about setting database server connection parameters like ",(0,a.jsx)(n.code,{children:"hostname"})," or ",(0,a.jsx)(n.code,{children:"password"})," to deploy an application to the cloud\u2014DBOS automatically applies the connection information of your cloud database server."]}),"\n",(0,a.jsx)(n.li,{children:"You cannot change the database of a deployed application. You must delete and re-deploy the application."}),"\n"]})}),"\n",(0,a.jsx)(n.h4,{id:"dependency-management",children:"Dependency Management"}),"\n",(0,a.jsxs)(o,{groupId:"database-clients",children:[(0,a.jsx)(i,{value:"python",label:"Python",children:(0,a.jsxs)(n.p,{children:["For Python applications, DBOS Cloud installs all dependencies from your ",(0,a.jsx)(n.code,{children:"requirements.txt"})," file.\nThe maximum size of your application after all dependencies are installed is 2 GB."]})}),(0,a.jsxs)(i,{value:"typescript",label:"TypeScript",children:[(0,a.jsxs)(n.p,{children:["For TypeScript applications, DBOS Cloud installs all dependencies from your ",(0,a.jsx)(n.code,{children:"package-lock.json"})," file (or from ",(0,a.jsx)(n.code,{children:"package.json"})," if no lockfile is provided).\nThe maximum size of your application after all dependencies are installed is 2 GB."]}),(0,a.jsxs)(n.p,{children:["After all dependencies are installed, your application is compiled using ",(0,a.jsx)(n.code,{children:"npm run build"}),"."]})]})]}),"\n",(0,a.jsx)(n.h4,{id:"customizing-microvm-setup",children:"Customizing MicroVM Setup"}),"\n",(0,a.jsxs)(n.p,{children:["DBOS Pro subscribers can provide a ",(0,a.jsx)(n.em,{children:"setup script"})," that runs before their application is configured.\nThis script can customize the runtime environment for your application, for example installing system packages and libraries."]}),"\n",(0,a.jsxs)(n.p,{children:["A setup script must be specified in your ",(0,a.jsx)(n.code,{children:"dbos-config.yaml"})," like so:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="dbos-config.yaml"',children:'runtimeConfig:\n    # Script DBOS Cloud runs to customize your application runtime.\n    # Requires a DBOS Pro subscription.\n    setup:\n        - "./build.sh"\n    # Command DBOS Cloud executes to start your application.\n    start: <your-start-command>\n'})}),"\n",(0,a.jsx)(n.p,{children:"A setup script may install system packages or libraries or otherwise customize the microVM image. For example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",metastring:'title="build.sh"',children:"#!/bin/bash\n\n# Install the traceroute package for use in your application\napt install traceroute\n"})}),"\n",(0,a.jsx)(n.h4,{id:"ignoring-files-with-dbosignore",children:"Ignoring files with .dbosignore"}),"\n",(0,a.jsxs)(n.p,{children:["A ",(0,a.jsx)(n.code,{children:".dbosignore"})," file at the root of your project instructs the DBOS Cloud CLI to exclude resources from application deployment.\nThe syntax for this file is similar to ",(0,a.jsx)(n.code,{children:".gitignore"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Patterns are compatible with the ",(0,a.jsx)(n.a,{href:"https://www.npmjs.com/package/fast-glob",children:"fast-glob library"})]}),"\n",(0,a.jsxs)(n.li,{children:["Lines ending with ",(0,a.jsx)(n.code,{children:"/"})," are transformed into a recursive ignore ",(0,a.jsx)(n.code,{children:"/**"})," to exclude everything within a directory."]}),"\n",(0,a.jsxs)(n.li,{children:["Lines starting with ",(0,a.jsx)(n.code,{children:"#"})," are ignored."]}),"\n",(0,a.jsx)(n.li,{children:"Some patterns are automatically excluded:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"**/.dbos/**\n**/node_modules/**\n**/dist/**\n**/.git/**\n**/dbos-config.yaml\n**/venv/**\n**/.venv/**\n**/.python-version\n"})}),"\n",(0,a.jsx)(n.h3,{id:"monitoring-and-debugging-applications",children:"Monitoring and Debugging Applications"}),"\n",(0,a.jsx)(n.p,{children:"Here are some useful tools to monitor and debug applications:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.a,{href:"https://console.dbos.dev",children:"cloud console"})," provides a web UI for viewing your applications and their traces and logs."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["To retrieve the last ",(0,a.jsx)(n.code,{children:"N"})," seconds of your application's logs, run ",(0,a.jsx)(n.a,{href:"/cloud-tutorials/cloud-cli#dbos-cloud-app-logs",children:(0,a.jsx)(n.code,{children:"dbos-cloud app logs -l <N>"})}),". Note that new log entries take a few seconds to appear."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["To retrieve the status of a particular application, run ",(0,a.jsx)(n.a,{href:"/cloud-tutorials/cloud-cli#dbos-cloud-app-status",children:(0,a.jsx)(n.code,{children:"dbos-cloud app status <app-name>"})}),". To list all applications, run ",(0,a.jsx)(n.a,{href:"/cloud-tutorials/cloud-cli#dbos-cloud-app-list",children:(0,a.jsx)(n.code,{children:"dbos-cloud app list"})}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"managing-application-versions",children:"Managing Application Versions"}),"\n",(0,a.jsxs)(n.p,{children:["Each time you deploy an application, it creates a new version with a unique ID.\nYou can view all previous versions of your application from the ",(0,a.jsx)(n.a,{href:"https://console.dbos.dev",children:"cloud console"})," or list them by running:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"dbos-cloud app versions <app-name>\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You can redeploy a previous version of your application by passing ",(0,a.jsx)(n.code,{children:"--previous-version <version-id>"})," to the ",(0,a.jsx)(n.a,{href:"/cloud-tutorials/cloud-cli#dbos-cloud-app-deploy",children:(0,a.jsx)(n.code,{children:"app deploy"})})," command."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"dbos-cloud app deploy --previous-version <version-id>\n"})}),"\n",(0,a.jsx)(n.p,{children:"This will fail if the previous and current versions use different database schemas."}),"\n",(0,a.jsx)(n.h3,{id:"updating-applications",children:"Updating Applications"}),"\n",(0,a.jsx)(n.p,{children:"To update your application metadata, run:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"dbos-cloud app update <app-name>\n"})}),"\n",(0,a.jsxs)(n.p,{children:["See the ",(0,a.jsx)(n.a,{href:"/cloud-tutorials/cloud-cli#dbos-cloud-app-update",children:"DBOS Cloud CLI reference"})," for a list of properties you can update. Note that updating an application metadata does not trigger a redeploy of the code, which you can do with the ",(0,a.jsx)(n.a,{href:"/cloud-tutorials/cloud-cli#dbos-cloud-app-deploy",children:(0,a.jsx)(n.code,{children:"app deploy"})})," command."]}),"\n",(0,a.jsx)(n.h3,{id:"deleting-applications",children:"Deleting Applications"}),"\n",(0,a.jsx)(n.p,{children:"To delete an application, run:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"dbos-cloud app delete <app-name>\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You can also drop the application database with the ",(0,a.jsx)(n.code,{children:"--dropdb"})," argument.\nAs each application has its own isolated database, this does not affect your other applications."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"dbos-cloud app delete <app-name> --dropdb\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"warning",children:(0,a.jsx)(n.p,{children:"This is a destructive operation and cannot be undone."})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}function u(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>l});var o=i(6540);const a={},s=o.createContext(a);function t(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);