"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[8905],{6515:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"python/tutorials/debugging","title":"Debugging","description":"Learn how to debug your DBOS Python workflows.","source":"@site/docs/python/tutorials/debugging.md","sourceDirName":"python/tutorials","slug":"/python/tutorials/debugging","permalink":"/python/tutorials/debugging","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":18,"frontMatter":{"sidebar_position":18,"title":"Debugging","description":"Learn how to debug your DBOS Python workflows."},"sidebar":"tutorialSidebar","previous":{"title":"Working With Python Classes","permalink":"/python/tutorials/classes"},"next":{"title":"Testing Your App","permalink":"/python/tutorials/testing"}}');var i=o(4848),s=o(8453);const a={sidebar_position:18,title:"Debugging",description:"Learn how to debug your DBOS Python workflows."},l=void 0,r={},d=[{value:"Preliminaries",id:"preliminaries",level:2},{value:"Local Replay Debugging",id:"local-replay-debugging",level:2},{value:"Cloud Replay Debugging",id:"cloud-replay-debugging",level:2},{value:"DBOS Console Integration",id:"dbos-console-integration",level:2},{value:"Log Into to DBOS Cloud",id:"log-into-to-dbos-cloud",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",p:"p",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["DBOS applications automatically save their state to Postgres every time a workflow step is executed.\nWhile this is primarily done for ",(0,i.jsx)(t.a,{href:"/why-dbos",children:"reliablity and fault-tolerance"}),", the saved state can also be used for debugging purposes.\nThe DBOS Debugger enables you to replay the execution of your application workflows, step through the recorded states and identify the root cause of bugs more efficiently."]}),"\n",(0,i.jsx)(t.h2,{id:"preliminaries",children:"Preliminaries"}),"\n",(0,i.jsxs)(t.p,{children:["The DBOS Debugger is an extension to ",(0,i.jsx)(t.a,{href:"https://code.visualstudio.com/",children:"Visual Studio Code"})," (aka VS Code), a free cross-platform interactive development environment.\nIf you don't already have VS Code installed, please see ",(0,i.jsx)(t.a,{href:"https://code.visualstudio.com/docs/setup/setup-overview",children:"their official documentation"})," to get started."]}),"\n",(0,i.jsxs)(t.p,{children:["The DBOS Debugger can be installed from the ",(0,i.jsx)(t.a,{href:"https://marketplace.visualstudio.com/items?itemName=dbos-inc.dbos-ttdbg",children:"VS Code Marketplace website"}),"\nor or by searching the ",(0,i.jsx)(t.a,{href:"https://code.visualstudio.com/docs/editor/extension-marketplace",children:"Extension Marketplace"}),' inside VS Code for "DBOS".']}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Installing the DBOS Debugger Extension Screenshot",src:o(3479).A+"",width:"384",height:"283"})}),"\n",(0,i.jsxs)(t.p,{children:["Additionally, the official ",(0,i.jsx)(t.a,{href:"https://marketplace.visualstudio.com/items?itemName=ms-python.python",children:"VS Code Python extension"})," is needed to debug DBOS Python applications.\nFor more information about this extension, please see the ",(0,i.jsx)(t.a,{href:"https://code.visualstudio.com/docs/python/python-quick-start",children:"official VS Code documentation"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"local-replay-debugging",children:"Local Replay Debugging"}),"\n",(0,i.jsxs)(t.p,{children:["Once the DBOS Debugger extension is installed, VS Code will display a ",(0,i.jsx)(t.a,{href:"https://code.visualstudio.com/blogs/2017/02/12/code-lens-roundup",children:"CodeLens"}),"\nlabeled ",(0,i.jsx)(t.code,{children:"\ud83d\udd01 Replay Debug"})," on every ",(0,i.jsx)(t.a,{href:"/python/tutorials/workflow-tutorial",children:"workflow function"})," in your application."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Local Replay Debugging Code Lens",src:o(8296).A+"",width:"1028",height:"402"})}),"\n",(0,i.jsxs)(t.p,{children:["The debugger will pick the database connection information from the ",(0,i.jsx)(t.code,{children:"dbos-config.yaml"})," file."]}),"\n",(0,i.jsxs)(t.p,{children:["If you click on the Replay Debug CodeLens, a list of recent ",(0,i.jsx)(t.a,{href:"./workflow-tutorial#workflow-ids-and-idempotency",children:"workflow IDs"})," will be shown.\nYou can filter the list of workflow IDs by entering a value in the text box above the list.\nIf the workflow you wish to debug does not appear in the list, select the pencil icon in the upper right hand corner of the picker window to manually enter a workflow ID."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Workflow ID picker",src:o(5139).A+"",width:"772",height:"331"})}),"\n",(0,i.jsxs)(t.p,{children:["After selecting a workflow ID, the DBOS debugger will automatically launch your application with the ",(0,i.jsx)(t.a,{href:"../reference/cli#dbos-debug",children:(0,i.jsx)(t.code,{children:"dbos debug"})}),"\ncommand with the VS Code Python debugger attached.\nFrom here, you can step through your DBOS workflow and inspect variables as you would when debugging any other Python application."]}),"\n",(0,i.jsx)(t.admonition,{title:"Note",type:"info",children:(0,i.jsxs)(t.p,{children:["You can only step through workflow code when using the Replay Debugger.\n",(0,i.jsx)(t.a,{href:"/python/tutorials/step-tutorial",children:"Step"})," and ",(0,i.jsx)(t.a,{href:"/python/tutorials/transaction-tutorial",children:"transaction"})," functions are skipped when Replay Debugging.\nThe results returned from step and transaction functions when the workflow originally ran are retrieved and returned automatically without excecuting the function body."]})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Python debugger at breakpoint",src:o(5401).A+"",width:"807",height:"261"})}),"\n",(0,i.jsx)(t.h2,{id:"cloud-replay-debugging",children:"Cloud Replay Debugging"}),"\n",(0,i.jsxs)(t.p,{children:["You can also replay debug DBOS applications deployed to DBOS Cloud.\nIf your application is deployed to DBOS Cloud and you are logged into DBOS Cloud in the DBOS Debugger, you will see an additional\n",(0,i.jsx)(t.code,{children:"\u2601\ufe0f Cloud Replay Debug"})," CodeLens attached to your DBOS workflow functions."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Cloud Replay Debugging Code Lens",src:o(470).A+"",width:"1029",height:"398"})}),"\n",(0,i.jsxs)(t.p,{children:["Cloud replay debugging works the same as local replay debugging.\nThe only difference is the database your application connects to.\nWhen cloud replay debugging, the DBOS Debugger retrieves the DBOS Cloud database connection information\nand passes it to the ",(0,i.jsx)(t.code,{children:"dbos debug"})," command via environment variables, overriding the database connection information in the ",(0,i.jsx)(t.code,{children:"dbos-config.yaml"})," file."]}),"\n",(0,i.jsx)(t.h2,{id:"dbos-console-integration",children:"DBOS Console Integration"}),"\n",(0,i.jsxs)(t.p,{children:["When using the cloud replay debugger, an additional button appears in the upper right corner of the pick list next to the pencil icon.\nThis button launches your default browser and navigates to the ",(0,i.jsx)(t.a,{href:"/production/dbos-cloud/workflow-management",children:"DBOS Cloud Workflow Manager page"}),"."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Workflow Picker with DBOS Console button",src:o(6124).A+"",width:"761",height:"338"})}),"\n",(0,i.jsx)(t.p,{children:"In the DBOS Cloud Workflow Manager, a new control button appears that allows you to select the workflow that you wish to debug.\nSelecting the debug button in this view will navigate the user back to VS Code, where the debugger will launch the selected workflow."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"DBOS Cloud Workflow Manager with Debug control",src:o(9142).A+"",width:"1628",height:"896"})}),"\n",(0,i.jsx)(t.admonition,{title:"Note",type:"info",children:(0,i.jsx)(t.p,{children:"For your safety, VS Code will ask for confirmation before navigating to the Workflow Manager page and when navigating back to VS Code.\nIf desired, you can configure VS Code not to prompt on these navigation events in the future."})}),"\n",(0,i.jsx)(t.h2,{id:"log-into-to-dbos-cloud",children:"Log Into to DBOS Cloud"}),"\n",(0,i.jsxs)(t.p,{children:["To login to DBOS Cloud in the DBOS Debugger, navigate to the DBOS Cloud view and select the ",(0,i.jsx)(t.code,{children:"Log Into DBOS Cloud"})," menu item."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Log Into DBOS Cloud",src:o(7695).A+"",width:"595",height:"328"})}),"\n",(0,i.jsxs)(t.p,{children:["Alternatively, you can open the VS Code ",(0,i.jsx)(t.a,{href:"https://code.visualstudio.com/docs/getstarted/userinterface#_command-palette",children:"Command Palette"}),"\nand run the ",(0,i.jsx)(t.code,{children:"DBOS: Log Into DBOS Cloud"})," command directly."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Log Into DBOS Cloud Command Palette",src:o(6486).A+"",width:"763",height:"354"})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},3479:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/ttdbg-ext-install-f6b82b2b82731ee209831d1d8b6962e2.png"},7695:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/ttdbg-login-cloud-da931ca54928afb9f34970ecfbe73d30.png"},6486:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/ttdbg-login-cmd-palette-3a4a6a656eee470d9bbb8b14d1409d3d.png"},5401:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/ttdb-debug-breakpoint-da7cb629e299f0f242703c16d08be334.png"},5139:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/ttdb-wfid-picker-6a0d3c663eb86f9d0cea974b150887b9.png"},470:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/ttdbg-cloud-replay-34e82d723dfb4da2b3b0d203508b379c.png"},8296:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/ttdbg-local-replay-3d43a9f6e790db084027c5ac04f4bbb0.png"},9142:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/console-debug-picker-f1630c098529d19970ce6c6d8058719e.png"},6124:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/ttdbg-wfid-picker-with-console-51ec15a6bb77c506304dcf5d2cf62f1b.png"},8453:(e,t,o)=>{o.d(t,{R:()=>a,x:()=>l});var n=o(6540);const i={},s=n.createContext(i);function a(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);