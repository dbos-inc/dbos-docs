"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[411],{2178:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>p,frontMatter:()=>t,metadata:()=>l,toc:()=>c});var i=a(5893),o=a(1151);const t={sidebar_position:2,title:"Cloud Application Management",description:"Learn how to manage DBOS Cloud applications"},s=void 0,l={id:"cloud-tutorials/application-management",title:"Cloud Application Management",description:"Learn how to manage DBOS Cloud applications",source:"@site/docs/cloud-tutorials/application-management.md",sourceDirName:"cloud-tutorials",slug:"/cloud-tutorials/application-management",permalink:"/cloud-tutorials/application-management",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Cloud Application Management",description:"Learn how to manage DBOS Cloud applications"},sidebar:"tutorialSidebar",previous:{title:"Cloud Database Management",permalink:"/cloud-tutorials/database-management"},next:{title:"Cloud Account Management",permalink:"/cloud-tutorials/account-management"}},r={},c=[{value:"Deploying Applications",id:"deploying-applications",level:3},{value:"Monitoring and Debugging Applications",id:"monitoring-and-debugging-applications",level:3},{value:"Managing Application Versions",id:"managing-application-versions",level:3},{value:"Deleting Applications",id:"deleting-applications",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"In this guide, you'll learn how to manage applications in DBOS Cloud."}),"\n",(0,i.jsx)(n.h3,{id:"deploying-applications",children:"Deploying Applications"}),"\n",(0,i.jsx)(n.p,{children:"To deploy your application to DBOS Cloud, run this command in its root directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"npx dbos-cloud app deploy\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Your application is deployed using the name in its ",(0,i.jsx)(n.code,{children:"package.json"}),".\nApplication names should be between 3 and 30 characters and must contain only lowercase letters and numbers, dashes (",(0,i.jsx)(n.code,{children:"-"}),"), and underscores (",(0,i.jsx)(n.code,{children:"_"}),"). Application names are unique within an ",(0,i.jsx)(n.a,{href:"account-management#organization-management",children:"organization"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["When you deploy an application for the first time, the command prompts you to choose which ",(0,i.jsx)(n.a,{href:"/cloud-tutorials/database-management",children:"database instance"})," to connect your app to, or to provision one if you have none. Multiple applications can use the same database instance (server) but must use separate databases within that server (the ",(0,i.jsx)(n.code,{children:"app_db_name"})," field in ",(0,i.jsx)(n.a,{href:"../api-reference/configuration#database",children:(0,i.jsx)(n.code,{children:"dbos-config.yaml"})}),")."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You can specify a particular database instance through the ",(0,i.jsx)(n.code,{children:"-d <database-instance-name>"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["During the first deployment, you can enable time travel for your application with ",(0,i.jsx)(n.code,{children:"--enable-timetravel"}),". You can delete and re-deploy an existing application to enable time travel."]}),"\n"]})}),"\n",(0,i.jsx)(n.p,{children:"When you deploy an application, the DBOS Cloud CLI will create an archive of your application folder and upload it to DBOS Cloud. This archive can be up to 500MB in size."}),"\n",(0,i.jsxs)(n.p,{children:["During deploy, DBOS Cloud first runs ",(0,i.jsx)(n.a,{href:"/api-reference/cli#npx-dbos-migrate",children:(0,i.jsx)(n.code,{children:"npx dbos migrate"})})," on your application database to apply all schema migrations you've defined.\nIt then builds and starts your application."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"DBOS Cloud will prune all development dependencies to reduce your application size. Make sure to explicitly install runtime dependencies."})}),"\n",(0,i.jsx)(n.p,{children:"After your application is deployed, DBOS Cloud hosts it at this URL, which is also printed by the deploy command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"https://<username>-<app-name>.cloud.dbos.dev/\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["If your account belongs to an ",(0,i.jsx)(n.a,{href:"/cloud-tutorials/account-management#organization-management",children:"organization"}),", applications are hosted at ",(0,i.jsx)(n.code,{children:"https://<organization-name>-<app-name>.cloud.dbos.dev/"})]})}),"\n",(0,i.jsxs)(n.p,{children:["If you edit your application or schema, run ",(0,i.jsx)(n.code,{children:"npx dbos-cloud app deploy"})," again to apply the latest migrations and upgrade to the latest version."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You don't have to worry about changing database server connection parameters like ",(0,i.jsx)(n.code,{children:"hostname"})," or ",(0,i.jsx)(n.code,{children:"password"})," in ",(0,i.jsx)(n.a,{href:"/api-reference/configuration",children:(0,i.jsx)(n.code,{children:"dbos-config.yaml"})})," to deploy an application to the cloud\u2014DBOS automatically applies the connection information of your cloud database instance."]}),"\n",(0,i.jsxs)(n.li,{children:["You cannot change the application database (",(0,i.jsx)(n.code,{children:"app_db_name"}),") of a deployed application. You must delete and re-deploy the application."]}),"\n",(0,i.jsxs)(n.li,{children:["While database instances can be shared across applications, application databases (",(0,i.jsx)(n.code,{children:"app_db_name"}),") cannot."]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"monitoring-and-debugging-applications",children:"Monitoring and Debugging Applications"}),"\n",(0,i.jsx)(n.p,{children:"DBOS provides many tools to monitor and debug applications:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To get a high-level view of all your applications and their traces and logs, check out ",(0,i.jsx)(n.a,{href:"./monitoring-dashboard",children:"our monitoring dashboard"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To replay DBOS Cloud execution traces locally, check out our ",(0,i.jsx)(n.a,{href:"./timetravel-debugging",children:"time travel debugger"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To retrieve the last ",(0,i.jsx)(n.code,{children:"N"})," seconds of your application's logs, run in your application root directory ",(0,i.jsx)(n.a,{href:"/api-reference/cloud-cli#npx-dbos-cloud-app-logs",children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app logs -l <N>"})}),". Note that new log entries take a few seconds to appear."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To retrieve the status of a particular application, run ",(0,i.jsx)(n.a,{href:"/api-reference/cloud-cli#npx-dbos-cloud-app-status",children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app status <app-name>"})}),". To retrieve the statuses of all applications, run ",(0,i.jsx)(n.a,{href:"/api-reference/cloud-cli#npx-dbos-cloud-app-list",children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app list"})}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Applications run in ",(0,i.jsx)(n.a,{href:"https://firecracker-microvm.github.io/",children:"Firecracker microVMs"})," with 1vCPU and 512MB of RAM. Note that files on disk are ephemeral and not persisted between deployments."]}),"\n",(0,i.jsx)(n.h3,{id:"managing-application-versions",children:"Managing Application Versions"}),"\n",(0,i.jsx)(n.p,{children:"Each time you deploy an application, it creates a new version with a unique ID.\nTo list all previous versions of your application, run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app versions <app-name>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can redeploy a previous version of your application by passing ",(0,i.jsx)(n.code,{children:"--previous-version <version-id>"})," to the ",(0,i.jsx)(n.a,{href:"/api-reference/cloud-cli#npx-dbos-cloud-app-deploy",children:(0,i.jsx)(n.code,{children:"app deploy"})})," command."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"npx dbos-cloud app deploy --previous-version <version-id>\n"})}),"\n",(0,i.jsx)(n.p,{children:"However, this will fail if the previous and current versions have different database schemas."}),"\n",(0,i.jsx)(n.p,{children:"Also, note DBOS Cloud will keep running Transact workflows from previous versions until they complete. This means you need to be mindful of non-backward-compatible database schema migrations, as they could break running workflows."}),"\n",(0,i.jsxs)(n.p,{children:["For more information on schema management, see our ",(0,i.jsx)(n.a,{href:"/cloud-tutorials/database-management#database-schema-management",children:"schema management guide"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"deleting-applications",children:"Deleting Applications"}),"\n",(0,i.jsx)(n.p,{children:"To delete an application, run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"npx dbos-cloud app delete <app-name>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can also delete the application database with the ",(0,i.jsx)(n.code,{children:"--dropdb"})," argument:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"npx dbos-cloud app delete <app-name> --dropdb\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"This is a destructive operation and cannot be undone."})})]})}function p(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,a)=>{a.d(n,{Z:()=>l,a:()=>s});var i=a(7294);const o={},t=i.createContext(o);function s(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);