"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[1629],{7470:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"production/self-hosting/retention","title":"Workflow Retention Policies","description":"Retention policies require DBOS Python >= 1.5.0 or DBOS TypeScript >= 2.10.24","source":"@site/docs/production/self-hosting/retention.md","sourceDirName":"production/self-hosting","slug":"/production/self-hosting/retention","permalink":"/production/self-hosting/retention","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":95,"frontMatter":{"sidebar_position":95,"title":"Workflow Retention Policies"},"sidebar":"tutorialSidebar","previous":{"title":"Deploying With Kubernetes","permalink":"/production/self-hosting/hosting-with-kubernetes"},"next":{"title":"Admin API Reference","permalink":"/production/self-hosting/admin-api"}}');var n=o(4848),s=o(8453);const r={sidebar_position:95,title:"Workflow Retention Policies"},l=void 0,a={},d=[{value:"Time Threshold",id:"time-threshold",level:3},{value:"Rows Threshold",id:"rows-threshold",level:3},{value:"Global Timeout",id:"global-timeout",level:3}];function c(e){const t={a:"a",admonition:"admonition",h3:"h3",p:"p",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsx)(t.p,{children:"Retention policies require DBOS Python >= 1.5.0 or DBOS TypeScript >= 2.10.24"})}),"\n",(0,n.jsxs)(t.p,{children:["If you are using ",(0,n.jsx)(t.a,{href:"/production/self-hosting/conductor",children:"Conductor"}),", you can configure workflow history retention policies for your application from the Retention Policy page of the DBOS Console.\nThese settings let you configure how long workflow history is retained in your application's ",(0,n.jsx)(t.a,{href:"/explanations/system-tables",children:"system database"}),".\nThis is useful for managing the database disk usage of workflow history."]}),"\n",(0,n.jsx)("img",{src:o(4815).A,alt:"Retention Page",width:"1000",className:"custom-img"}),"\n",(0,n.jsx)(t.h3,{id:"time-threshold",children:"Time Threshold"}),"\n",(0,n.jsx)(t.p,{children:"If a time threshold is set, workflow history is only retained for X hours.\nHistory of completed workflows that started more than X hours ago is automatically deleted.\nTime-based retention is disabled by default."}),"\n",(0,n.jsx)(t.h3,{id:"rows-threshold",children:"Rows Threshold"}),"\n",(0,n.jsx)(t.p,{children:"If the rows threshold is set, history is only retained for the last X completed workflows.\nHistory of additional completed workflows is automatically deleted.\nBy default, the rows threshold is set to 1M rows.\nYou can set both a rows threshold an a time threshold."}),"\n",(0,n.jsx)(t.h3,{id:"global-timeout",children:"Global Timeout"}),"\n",(0,n.jsx)(t.p,{children:"If a global timeout is set, any workflow that has not completed X hours after it was created (started or enqueued) is automatically cancelled.\nBy default, the global timeout is disabled."})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},4815:(e,t,o)=>{o.d(t,{A:()=>i});const i=o.p+"assets/images/retention-conductor-d8ba1157c564f4e907a998c9f7a99c37.png"},8453:(e,t,o)=>{o.d(t,{R:()=>r,x:()=>l});var i=o(6540);const n={},s=i.createContext(n);function r(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);