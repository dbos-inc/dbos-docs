"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[5436],{6103:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var s=n(4848),t=n(8453);const r={sidebar_position:16,title:"Using Libraries",description:"Learn how to use DBOS library functions"},o=void 0,a={id:"typescript/tutorials/using-libraries",title:"Using Libraries",description:"Learn how to use DBOS library functions",source:"@site/docs/typescript/tutorials/using-libraries.md",sourceDirName:"typescript/tutorials",slug:"/typescript/tutorials/using-libraries",permalink:"/typescript/tutorials/using-libraries",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:16,frontMatter:{sidebar_position:16,title:"Using Libraries",description:"Learn how to use DBOS library functions"},sidebar:"tutorialSidebar",previous:{title:"Using TypeORM",permalink:"/typescript/tutorials/using-typeorm"},next:{title:"Integrating with Kafka",permalink:"/typescript/tutorials/kafka-integration"}},c={},l=[{value:"Installing and Importing a Library",id:"installing-and-importing-a-library",level:3},{value:"Calling Simple Functions",id:"calling-simple-functions",level:3},{value:"Working With Configured Classes",id:"working-with-configured-classes",level:3}];function d(e){const i={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.p,{children:["In this guide, you'll learn how to use DBOS library functions.  Examples will be based on ",(0,s.jsx)(i.a,{href:"https://www.npmjs.com/package/@dbos-inc/communicator-email-ses",children:(0,s.jsx)(i.code,{children:"@dbos-inc/communicator-email-ses"})}),", a DBOS library for sending emails using ",(0,s.jsx)(i.a,{href:"https://aws.amazon.com/ses/",children:"AWS Simple Email Service"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"installing-and-importing-a-library",children:"Installing and Importing a Library"}),"\n",(0,s.jsx)(i.p,{children:"First, install the library."}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"npm install @dbos-inc/communicator-email-ses\n"})}),"\n",(0,s.jsx)(i.p,{children:"Second, import the key classes from the library for use in your source files:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-typescript",children:'import { SendEmailCommunicator } from "@dbos-inc/communicator-email-ses";\n'})}),"\n",(0,s.jsx)(i.h3,{id:"calling-simple-functions",children:"Calling Simple Functions"}),"\n",(0,s.jsxs)(i.p,{children:["Libraries such as ",(0,s.jsx)(i.code,{children:"@dbos-inc/communicator-bcrypt"})," or ",(0,s.jsx)(i.code,{children:"@dbos-inc/communicator-datetime"})," are comprised of functions that can be invoked from their classes.  Using the context (named ",(0,s.jsx)(i.code,{children:"ctx"})," below), the ",(0,s.jsx)(i.code,{children:"invoke"})," method can be used to call the library function:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-typescript",children:"ctx.invoke(BcryptCommunicator).bcryptHash('myString');\n"})}),"\n",(0,s.jsx)(i.h3,{id:"working-with-configured-classes",children:"Working With Configured Classes"}),"\n",(0,s.jsxs)(i.p,{children:["While libraries such as ",(0,s.jsx)(i.code,{children:"@dbos-inc/communicator-bcrypt"})," or ",(0,s.jsx)(i.code,{children:"@dbos-inc/communicator-datetime"})," have simple functions that can be called directly from their classes, more complex DBOS libraries use ",(0,s.jsx)(i.a,{href:"./configured-instances",children:'"configured instances"'})," so that they can be used in multiple scenarios within the same application.  To create and configure an instance:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-typescript",children:"import { configureInstance } from \"@dbos-inc/dbos-sdk\";\nimport { SendEmailCommunicator } from \"@dbos-inc/communicator-email-ses\";\n\nconst sesMailer = configureInstance(SendEmailCommunicator, 'marketing', {awscfgname: 'marketing_email_aws_config'});\n"})}),"\n",(0,s.jsxs)(i.p,{children:["Note that the ",(0,s.jsx)(i.code,{children:"configureInstance"})," call above serves multiple purposes:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Creates an instance of ",(0,s.jsx)(i.code,{children:"SendEmailCommunicator"})]}),"\n",(0,s.jsx)(i.li,{children:"Provides the instance with enough information to find essential configuration information (AWS region, access key, and secret) from the configuration file"}),"\n",(0,s.jsx)(i.li,{children:"Registers the instance under the name 'marketing'"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["To invoke a function on the configured instance, use the context (named ",(0,s.jsx)(i.code,{children:"ctx"})," below) provided within a handler or workflow:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-typescript",children:"ctx.invoke(sesMailer).sendEmail(\n{\n   to: [ctx.getConfig('marketing_mailing_list_address', 'dbos@nowhere.dev')],\n   from: ctx.getConfig('marketing_from_address', 'info@dbos.dev'),\n   subject: 'New SES Library Version Released',\n   bodyText: 'Check mailbox to see if this library is able to send mail about itself.',\n   // ...\n},\n"})})]})}function m(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>a});var s=n(6540);const t={},r=s.createContext(t);function o(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);