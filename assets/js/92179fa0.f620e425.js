"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[404],{1457:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>i,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"python/tutorials/classes","title":"Working With Python Classes","description":"You can add DBOS decorators to your Python class instance methods.","source":"@site/docs/python/tutorials/classes.md","sourceDirName":"python/tutorials","slug":"/python/tutorials/classes","permalink":"/python/tutorials/classes","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15,"title":"Working With Python Classes"},"sidebar":"tutorialSidebar","previous":{"title":"Authentication and Authorization","permalink":"/python/tutorials/authentication-authorization"},"next":{"title":"Debugging","permalink":"/python/tutorials/debugging"}}');var o=t(4848),a=t(8453);const c={sidebar_position:15,title:"Working With Python Classes"},r=void 0,i={},l=[{value:"Static Methods and Class Methods",id:"static-methods-and-class-methods",level:3}];function d(e){const s={code:"code",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:["You can add DBOS decorators to your Python class instance methods.\nYou can add step decorators to any class methods, but to add a workflow decorator to a class method, its class must inherit from ",(0,o.jsx)(s.code,{children:"DBOSConfiguredInstance"})," and must be decorated with ",(0,o.jsx)(s.code,{children:"@DBOS.dbos_class"}),".\nFor example:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:'@DBOS.dbos_class()\nclass URLFetcher(DBOSConfiguredInstance):\n    def __init__(self, url: str):\n        self.url = url\n        super().__init__(config_name=url)\n\n    @DBOS.workflow()\n    def fetch_workflow(self):\n        return self.fetch_url()\n\n    @DBOS.step()\n    def fetch_url(self):\n        return requests.get(self.url).text\n    \nexample_fetcher = URLFetcher("https://example.com")\nprint(example_fetcher.fetch_workflow())\n'})}),"\n",(0,o.jsxs)(s.p,{children:["When you create a new instance of a DBOS class,  ",(0,o.jsx)(s.code,{children:"DBOSConfiguredInstance"})," must be instantiated with a ",(0,o.jsx)(s.code,{children:"config_name"}),".\nThis ",(0,o.jsx)(s.code,{children:"config_name"})," should be a unique identifier of the instance.\nAdditionally, all DBOS-decorated classes must be instantiated before ",(0,o.jsx)(s.code,{children:"DBOS.launch()"})," is called."]}),"\n",(0,o.jsxs)(s.p,{children:["The reason for these requirements is to enable workflow recovery.\nWhen you create a new instance of a DBOS class, DBOS stores it in a global registry indexed by ",(0,o.jsx)(s.code,{children:"config_name"}),".\nWhen DBOS needs to recover a workflow belonging to that class, it looks up the class instance using ",(0,o.jsx)(s.code,{children:"config_name"})," so it can run the workflow using the right instance of its class.\nIf ",(0,o.jsx)(s.code,{children:"config_name"})," is not supplied, or if DBOS classes are dynamically instantiated after ",(0,o.jsx)(s.code,{children:"DBOS.launch()"}),", then DBOS may not find the class instance it needs to recover a workflow."]}),"\n",(0,o.jsx)(s.h3,{id:"static-methods-and-class-methods",children:"Static Methods and Class Methods"}),"\n",(0,o.jsxs)(s.p,{children:["You can add DBOS decorators to static methods and class methods of any class, even if it does not inherit from ",(0,o.jsx)(s.code,{children:"DBOSConfiguredInstance"}),", because such methods do not access class instance variables.\nIf the class contains a DBOS workflow, it must be decorated with ",(0,o.jsx)(s.code,{children:"@DBOS.dbos_class()"}),".\nFor example:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:"@DBOS.dbos_class()\nclass ExampleClass()\n        @staticmethod\n        @DBOS.workflow()\n        def staticmethod_workflow():\n            return\n\n        @classmethod\n        @DBOS.workflow()\n        def classmethod_workflow(cls):\n            return\n"})})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>c,x:()=>r});var n=t(6540);const o={},a=n.createContext(o);function c(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);