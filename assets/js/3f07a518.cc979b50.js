"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[8682],{7714:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"java/reference/client","title":"DBOS Client","description":"DBOSClient provides a programmatic way to interact with your DBOS application from external code.","source":"@site/docs/java/reference/client.md","sourceDirName":"java/reference","slug":"/java/reference/client","permalink":"/java/reference/client","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":50,"frontMatter":{"sidebar_position":50,"title":"DBOS Client","toc_max_heading_level":3},"sidebar":"tutorialSidebar","previous":{"title":"Queues","permalink":"/java/reference/queues"},"next":{"title":"DBOS Plugin Architecture","permalink":"/java/reference/plugins"}}');var o=r(4848),t=r(8453);const s={sidebar_position:50,title:"DBOS Client",toc_max_heading_level:3},l=void 0,a={},d=[{value:"DBOSClient",id:"dbosclient",level:2},{value:"Workflow Interaction Methods",id:"workflow-interaction-methods",level:2},{value:"enqueueWorkflow",id:"enqueueworkflow",level:3},{value:"EnqueueOptions",id:"enqueueoptions",level:4},{value:"send",id:"send",level:3},{value:"getEvent",id:"getevent",level:3},{value:"Workflow Management Methods",id:"workflow-management-methods",level:2},{value:"retrieveWorkflow",id:"retrieveworkflow",level:3},{value:"getWorkflowStatus",id:"getworkflowstatus",level:3},{value:"listWorkflows",id:"listworkflows",level:3},{value:"listWorkflowSteps",id:"listworkflowsteps",level:3},{value:"cancelWorkflow",id:"cancelworkflow",level:3},{value:"resumeWorkflow",id:"resumeworkflow",level:3},{value:"forkWorkflow",id:"forkworkflow",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"DBOSClient"})," provides a programmatic way to interact with your DBOS application from external code."]}),"\n",(0,o.jsx)(n.h2,{id:"dbosclient",children:"DBOSClient"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"DBOSClient(String url, String user, String password)\nDBOSClient(String url, String user, String password, String schema)\nDBOSClient(DataSource dataSource)\nDBOSClient(DataSource dataSource, String schema)\n"})}),"\n",(0,o.jsx)(n.p,{children:"Construct the DBOSClient."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"url"}),": The JDBC URL for your system database."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"user"}),": Your Postgres username or role."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"password"}),": The password for your Postgres user or role."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"schema"}),": The schema the DBOS System Database tables are stored in. Defaults to ",(0,o.jsx)(n.code,{children:"dbos"})," if not provided."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"dataSource"}),": System Database data source. A ",(0,o.jsx)(n.code,{children:"HikariDataSource"})," is created if not provided."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"workflow-interaction-methods",children:"Workflow Interaction Methods"}),"\n",(0,o.jsx)(n.h3,{id:"enqueueworkflow",children:"enqueueWorkflow"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"<T, E extends Exception> WorkflowHandle<T, E> enqueueWorkflow(\n      EnqueueOptions options, Object[] args)\n"})}),"\n",(0,o.jsx)(n.p,{children:"Enqueue a workflow and return a handle to it."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"options"}),": Configuration for the enqueued workflow, as defined below."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"args"}),": An array of the workflow's arguments. These will be serialized and passed into the workflow when it is dequeued."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example Syntax:"})}),"\n",(0,o.jsxs)(n.p,{children:["This code enqueues workflow ",(0,o.jsx)(n.code,{children:"exampleWorkflow"})," in class ",(0,o.jsx)(n.code,{children:"com.example.ExampleImpl"})," on queue ",(0,o.jsx)(n.code,{children:"example-queue"})," with arguments ",(0,o.jsx)(n.code,{children:"argumentOne"})," and ",(0,o.jsx)(n.code,{children:"argumentTwo"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'var client = new DBOSClient(dbUrl, dbUser, dbPassword);\nvar options =\n    new DBOSClient.EnqueueOptions(\n        "com.example.ExampleImpl", "exampleWorkflow", "example-queue");\nvar handle = client.enqueueWorkflow(options, new Object[]{"argumentOne", "argumentTwo"});\n'})}),"\n",(0,o.jsx)(n.h4,{id:"enqueueoptions",children:"EnqueueOptions"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"EnqueueOptions"})," is a with-based configuration record for parameterizing ",(0,o.jsx)(n.code,{children:"client.enqueueWorkflow"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Constructors:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"public EnqueueOptions(String className, String workflowName, String queueName)\n"})}),"\n",(0,o.jsx)(n.p,{children:"Specify the name and class name of the workflow to enqueue and the name of the queue on which it is to be enqueued."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Methods:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"withInstanceName(String name)"})}),": The enqueued workflow should run on this particular named class instance."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"withWorkflowId(String workflowId)"})}),": Specify the idempotency ID to assign to the enqueued workflow."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"withAppVersion(String appVersion)"})}),": The version of your application that should process this workflow.\nIf left undefined, it will be updated to the current version when the workflow is first dequeued."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"withTimeout(Duration timeout)"})}),":  Set a timeout for the enqueued workflow. When the timeout expires, the workflow and all its children are cancelled. The timeout does not begin until the workflow is dequeued and starts execution."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"withDeadline(Instant deadline)"})}),":  Set a deadline for the enqueued workflow. If the workflow is executing when the deadline arrives, the workflow and all its children are cancelled."]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"Timeout and deadline cannot both be set"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"withDeduplicationId(String deduplicationId)"})}),": At any given time, only one workflow with a specific deduplication ID can be enqueued in the specified queue. If a workflow with a deduplication ID is currently enqueued or actively executing (status ",(0,o.jsx)(n.code,{children:"ENQUEUED"})," or ",(0,o.jsx)(n.code,{children:"PENDING"}),"), subsequent workflow enqueue attempt with the same deduplication ID in the same queue will raise an exception."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"withPriority(Integer priority)"})}),": The priority of the enqueued workflow in the specified queue. Workflows with the same priority are dequeued in FIFO (first in, first out) order. Priority values can range from ",(0,o.jsx)(n.code,{children:"1"})," to ",(0,o.jsx)(n.code,{children:"2,147,483,647"}),", where a low number indicates a higher priority. Workflows without assigned priorities have the highest priority and are dequeued before workflows with assigned priorities."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"withQueuePartitionKey(String partitionKey)"})}),": Set a queue partition key for the workflow. Use if and only if the queue is partitioned (created with withPartitionedEnabled). In partitioned queues, all flow control (including concurrency and rate limits) is applied to individual partitions instead of the queue as a whole."]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Partition keys are required when enqueueing to a partitioned queue."}),"\n",(0,o.jsx)(n.li,{children:"Partition keys cannot be used with non-partitioned queues."}),"\n",(0,o.jsx)(n.li,{children:"Partition keys and deduplication IDs cannot be used together."}),"\n"]})}),"\n",(0,o.jsx)(n.h3,{id:"send",children:"send"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"send(String destinationId, Object message, String topic, String idempotencyKey) \n"})}),"\n",(0,o.jsxs)(n.p,{children:["Similar to ",(0,o.jsx)(n.a,{href:"/java/reference/methods#send",children:(0,o.jsx)(n.code,{children:"DBOS.send"})}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"getevent",children:"getEvent"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"Object getEvent(String targetId, String key, Duration timeoutSeconds)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Similar to ",(0,o.jsx)(n.a,{href:"/java/reference/methods#getevent",children:(0,o.jsx)(n.code,{children:"DBOS.getEvent"})}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"workflow-management-methods",children:"Workflow Management Methods"}),"\n",(0,o.jsx)(n.h3,{id:"retrieveworkflow",children:"retrieveWorkflow"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"WorkflowHandle<T, E> retrieveWorkflow(String workflowId)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Similar to ",(0,o.jsx)(n.a,{href:"/java/reference/methods#retrieveworkflow",children:(0,o.jsx)(n.code,{children:"DBOS.retrieveWorkflow"})}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"getworkflowstatus",children:"getWorkflowStatus"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"Optional<WorkflowStatus> getWorkflowStatus(String workflowId)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Retrieve the ",(0,o.jsx)(n.a,{href:"/java/reference/methods#workflowstatus",children:(0,o.jsx)(n.code,{children:"WorkflowStatus"})})," of a workflow."]}),"\n",(0,o.jsx)(n.h3,{id:"listworkflows",children:"listWorkflows"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"List<WorkflowStatus> listWorkflows(ListWorkflowsInput input)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Similar to ",(0,o.jsx)(n.a,{href:"/java/reference/methods#listworkflows",children:(0,o.jsx)(n.code,{children:"DBOS.listWorkflows"})}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"listworkflowsteps",children:"listWorkflowSteps"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"List<StepInfo> listWorkflowSteps(String workflowId)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Similar to ",(0,o.jsx)(n.a,{href:"/java/reference/methods#listworkflowsteps",children:(0,o.jsx)(n.code,{children:"DBOS.listWorkflowSteps"})}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"cancelworkflow",children:"cancelWorkflow"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"void cancelWorkflow(String workflowId)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Similar to ",(0,o.jsx)(n.a,{href:"/java/reference/methods#cancelworkflow",children:(0,o.jsx)(n.code,{children:"DBOS.cancelWorkflow"})}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"resumeworkflow",children:"resumeWorkflow"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"<T, E extends Exception> WorkflowHandle<T, E> resumeWorkflow(String workflowId)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Similar to ",(0,o.jsx)(n.a,{href:"/java/reference/methods#resumeworkflow",children:(0,o.jsx)(n.code,{children:"DBOS.resumeWorkflow"})}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"forkworkflow",children:"forkWorkflow"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"<T, E extends Exception> WorkflowHandle<T, E> forkWorkflow(\n      String originalWorkflowId, int startStep, ForkOptions options)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Similar to ",(0,o.jsx)(n.a,{href:"/java/reference/methods#forkworkflow",children:(0,o.jsx)(n.code,{children:"DBOS.forkWorkflow"})}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>l});var i=r(6540);const o={},t=i.createContext(o);function s(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);