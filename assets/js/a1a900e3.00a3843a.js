"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[7839],{5529:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"integrations/openai-agents","title":"OpenAI Agents SDK","description":"You can use DBOS to add durable execution to an agent built with the OpenAI Agents SDK.","source":"@site/docs/integrations/openai-agents.md","sourceDirName":"integrations","slug":"/integrations/openai-agents","permalink":"/integrations/openai-agents","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":31,"frontMatter":{"sidebar_position":31,"title":"OpenAI Agents SDK","hide_table_of_contents":false},"sidebar":"tutorialSidebar","previous":{"title":"Pydantic AI","permalink":"/integrations/pydantic-ai"},"next":{"title":"Logfire","permalink":"/integrations/logfire"}}');var o=t(4848),s=t(8453);const r={sidebar_position:31,title:"OpenAI Agents SDK",hide_table_of_contents:!1},a=void 0,l={},d=[{value:"Installation",id:"installation",level:2},{value:"Building Reliable Agents",id:"building-reliable-agents",level:2}];function c(n){const e={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e.p,{children:["You can use DBOS to add durable execution to an agent built with the ",(0,o.jsx)(e.a,{href:"https://platform.openai.com/docs/guides/agents-sdk",children:"OpenAI Agents SDK"}),".\nWith durable execution, you can build reliable agents that preserve progress across transient API failures, application errors, and restarts, while also handling long-running, asynchronous, and human-in-the-loop workflows with production-grade reliability."]}),"\n",(0,o.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsxs)(e.p,{children:["To get started, install DBOS and the ",(0,o.jsx)(e.a,{href:"https://github.com/dbos-inc/dbos-openai-agents",children:"durable OpenAI agents integration"}),"."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"pip install dbos dbos-openai-agents\n"})}),"\n",(0,o.jsx)(e.h2,{id:"building-reliable-agents",children:"Building Reliable Agents"}),"\n",(0,o.jsxs)(e.p,{children:["To wrap your OpenAI agents for durable execution, ",(0,o.jsx)(e.a,{href:"/python/integrating-dbos",children:"install and configure DBOS"})," then follow these three guidelines:"]}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["Use ",(0,o.jsx)(e.code,{children:"DBOSRunner.run"})," and ",(0,o.jsx)(e.code,{children:"DBOSRunner.run_sync"})," as drop-in replacements for ",(0,o.jsx)(e.a,{href:"https://openai.github.io/openai-agents-python/ref/run/#agents.run.Runner.run",children:(0,o.jsx)(e.code,{children:"Runner.run"})})," and ",(0,o.jsx)(e.a,{href:"https://openai.github.io/openai-agents-python/ref/run/#agents.run.Runner.run_sync",children:(0,o.jsx)(e.code,{children:"Runner.run_sync"})}),"."]}),"\n",(0,o.jsxs)(e.li,{children:["Annotate the function calling ",(0,o.jsx)(e.code,{children:"DBOSRunner.run"})," or ",(0,o.jsx)(e.code,{children:"DBOSRunner.run_sync"})," with ",(0,o.jsx)(e.code,{children:"@DBOS.workflow"})," to run your agent as a durably executed workflow."]}),"\n",(0,o.jsxs)(e.li,{children:["Annotate your agent's tool call functions and guardrail functions with ",(0,o.jsx)(e.code,{children:"@DBOS.step"})," or ",(0,o.jsx)(e.code,{children:"@DBOS.workflow()"})," to mark them as steps or sub-workflows of your durably executed agentic workflow."]}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"Here is a simple but complete example of wrapping an agent for durable execution.\nWith just 10 lines of code (highlighted below), you can add DBOS into an existing OpenAI Agents application."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",metastring:'{title="dbos_agent.py"}',children:'import asyncio\nfrom agents import Agent, function_tool\n# highlight-start\nfrom dbos import DBOS, DBOSConfig\nfrom dbos_openai_agents import DBOSRunner\n#highlight-end\n\n# Decorate tool calls and guardrails with @DBOS.step() for durable execution\n@function_tool\n# highlight-next-line\n@DBOS.step()\nasync def get_weather(city: str) -> str:\n    """Get the weather for a city."""\n    return f"Sunny in {city}"\n\nagent = Agent(name="weather", tools=[get_weather])\n\n# Use DBOSRunner to call your agent from a workflow\n# highlight-start\n@DBOS.workflow()\nasync def run_agent(user_input: str) -> str:\n    result = await DBOSRunner.run(agent, user_input)\n    return str(result.final_output)\n# highlight-end\n\n\nasync def main():\n    # highlight-start\n    config: DBOSConfig = {\n        "name": "my-agent",\n        "system_database_url": \'sqlite:///my_agent.sqlite\',\n    }\n    DBOS(config=config)\n    DBOS.launch()\n    # highlight-end\n    output = await run_agent("How is the weather in San Francisco")\n    print(output)\n\n\nif __name__ == "__main__":\n    asyncio.run(main())\n'})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Notes:"})}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["Workflows and agents must be defined before ",(0,o.jsx)(e.a,{href:"/python/reference/dbos-class#launch",children:(0,o.jsx)(e.code,{children:"DBOS.launch()"})}),"."]}),"\n",(0,o.jsx)(e.li,{children:"This example uses SQLite for ease of getting started. Postgres is recommended for production."}),"\n",(0,o.jsxs)(e.li,{children:["Each agent must have a unique ",(0,o.jsx)(e.code,{children:"name"}),", which DBOS uses to identify its workflows."]}),"\n"]}),"\n",(0,o.jsxs)(e.p,{children:["For more details on building agents, see the ",(0,o.jsx)(e.a,{href:"https://platform.openai.com/docs/guides/agents-sdk",children:"OpenAI Agents SDK documentation"}),". For information about durable execution and workflow design, see the ",(0,o.jsx)(e.a,{href:"../python/programming-guide",children:"DBOS programming guide"}),". Together, these resources cover everything from getting started with simple agents to designing production-ready, fault-tolerant applications."]})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>a});var i=t(6540);const o={},s=i.createContext(o);function r(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);