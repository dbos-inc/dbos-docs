"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[6380],{416:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"production/hosting-conductor","title":"Self-Hosting Conductor","description":"Self-hosted Conductor is released under a proprietary license.","source":"@site/docs/production/hosting-conductor.md","sourceDirName":"production","slug":"/production/hosting-conductor","permalink":"/production/hosting-conductor","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15,"title":"Self-Hosting Conductor"},"sidebar":"tutorialSidebar","previous":{"title":"DBOS Conductor","permalink":"/production/conductor"},"next":{"title":"Production Checklist","permalink":"/production/checklist"}}');var r=o(4848),s=o(8453);const i={sidebar_position:15,title:"Self-Hosting Conductor"},c=void 0,d={},a=[{value:"Getting Started with Docker Compose",id:"getting-started-with-docker-compose",level:2},{value:"Connecting to Self-Hosted Conductor",id:"connecting-to-self-hosted-conductor",level:2},{value:"Licensing",id:"licensing",level:2},{value:"Hosting Conductor in Production",id:"hosting-conductor-in-production",level:2},{value:"Conductor",id:"conductor",level:3},{value:"DBOS Console",id:"dbos-console",level:3},{value:"Security",id:"security",level:2},{value:"Upgrading",id:"upgrading",level:2},{value:"Scaling",id:"scaling",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Details:o,TabItem:t,Tabs:i}=n;return o||h("Details",!0),t||h("TabItem",!0),i||h("Tabs",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Self-hosted Conductor is released under a ",(0,r.jsx)(n.a,{href:"https://www.dbos.dev/conductor-license",children:"proprietary license"}),".\nSelf-hosting Conductor for commercial or production use requires a paid ",(0,r.jsx)(n.a,{href:"#licensing",children:"license key"}),"."]})}),"\n",(0,r.jsx)(n.p,{children:"There are many ways to self-host Conductor and the DBOS Console on your own infrastructure."}),"\n",(0,r.jsx)(n.h2,{id:"getting-started-with-docker-compose",children:"Getting Started with Docker Compose"}),"\n",(0,r.jsxs)(n.p,{children:["For development and trial purposes, you can self-host Conductor and the DBOS Console on your development machine using Docker Compose.\nTo do this, you need a development license key, which can be freely obtained from the DBOS Console ",(0,r.jsx)(n.a,{href:"https://console.dbos.dev/settings/license-key",children:"here"}),".\nSee ",(0,r.jsx)(n.a,{href:"#licensing",children:"licensing"})," for more information.\nYou should export this license key as an environment variable:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"export DBOS_CONDUCTOR_LICENSE_KEY=<my-key>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can trial self-hosted Conductor with this ",(0,r.jsx)(n.code,{children:"docker-compose.yml"}),":"]}),"\n",(0,r.jsxs)(o,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("strong",{children:"docker-compose.yml"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yml",metastring:'title="docker-compose.yml"',children:"# Docker Compose configuration for self-hosting DBOS Conductor and the DBOS Console.\n# This configuration is for development purposes only.\n# Commercial or production use of DBOS Conductor or the DBOS Console requires a paid license key.\nservices:\n  # ============================================\n  # Postgres\n  # ============================================\n  postgres:\n    image: postgres:16\n    container_name: dbos-postgres\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: ${PGPASSWORD:-dbos}\n      POSTGRES_DB: dbos_conductor\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    networks:\n      - dbos-network\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n  # ============================================\n  # Conductor\n  # ============================================\n  conductor:\n    image: dbosdev/conductor\n    container_name: dbos-conductor\n    environment:\n      DBOS__CONDUCTOR_DB_URL: postgresql://postgres:${PGPASSWORD:-dbos}@postgres:5432/dbos_conductor?sslmode=disable\n\n      # License Key (required)\n      DBOS_CONDUCTOR_LICENSE_KEY:  ${DBOS_CONDUCTOR_LICENSE_KEY}\n\n      # OAuth configuration\n      # DBOS_OAUTH_ENABLED: \"true\"\n      # DBOS_OAUTH_JWKS_URL: \"https://your-oauth-provider.com/.well-known/jwks.json\"\n      # DBOS_OAUTH_ISSUER: \"https://your-oauth-provider.com/\"\n      # DBOS_OAUTH_AUDIENCE: \"your-api-audience\"\n    ports:\n      - \"8090:8090\"\n    depends_on:\n      postgres:\n        condition: service_healthy\n    networks:\n      - dbos-network\n    healthcheck:\n      test: ['CMD', 'curl', '-f', 'http://localhost:8090/healthz']\n      interval: 30s\n      timeout: 3s\n      retries: 3\n      start_period: 5s\n  # ============================================\n  # DBOS Console\n  # ============================================\n  console:\n    image: dbosdev/console\n    container_name: dbos-console\n    environment:\n      # Conductor URL (defaults to conductor:8090 for same Docker network)\n      # Override to connect to remote Conductor\n      #   DBOS_CONDUCTOR_URL=conductor.example.com:8090 (remote)\n      DBOS_CONDUCTOR_URL: '${DBOS_CONDUCTOR_URL:-conductor:8090}'\n\n      # OAuth configuration (uncomment and configure to enable authentication)\n      # DBOS_OAUTH_ENABLED: 'true'\n      # DBOS_OAUTH_AUTHORIZATION_URL: 'https://your-oauth-provider.com/[...]/authorize'\n      # DBOS_OAUTH_TOKEN_URL: 'https://your-oauth-provider.com/[...]/token'\n      # DBOS_OAUTH_CLIENT_ID: 'your-client-id'\n      # DBOS_OAUTH_SCOPE: 'openid profile email'\n      # DBOS_OAUTH_USERINFO_URL: 'https://your-oauth-provider.com/[...]/userinfo'\n      # DBOS_OAUTH_LOGOUT_URL: 'https://your-oauth-provider.com/[...]/logout'\n      # DBOS_OAUTH_AUDIENCE: 'your-api-identifier'\n    ports:\n      # Expose console on port 80 (or override with DBOS_CONSOLE_PORT env var)\n      - '${DBOS_CONSOLE_PORT:-80}:80'\n    depends_on:\n      conductor:\n        condition: service_healthy\n    networks:\n      - dbos-network\n    healthcheck:\n      test: ['CMD', 'curl', '-f', 'http://localhost/health']\n      interval: 30s\n      timeout: 3s\n      retries: 3\n      start_period: 5s\n\n# ============================================\n# Networks\n# ============================================\nnetworks:\n  dbos-network:\n    driver: bridge\n    name: dbos-network\n\n# ============================================\n# Volumes\n# ============================================\nvolumes:\n  postgres_data:\n"})})]}),"\n",(0,r.jsxs)(n.p,{children:["Start Conductor and the DBOS Console with ",(0,r.jsx)(n.code,{children:"docker compose up"}),".\nAfter all containers have launched, navigate to ",(0,r.jsx)(n.a,{href:"http://localhost",children:"http://localhost"})," to view the self-hosted console."]}),"\n",(0,r.jsx)(n.h2,{id:"connecting-to-self-hosted-conductor",children:"Connecting to Self-Hosted Conductor"}),"\n",(0,r.jsxs)(n.p,{children:["To connect your application to self-hosted Conductor, first ",(0,r.jsx)(n.a,{href:"/production/conductor#connecting-to-conductor",children:"follow these steps"})," in your self-hosted DBOS Console to register an application, generate an API key, and set it in your application."]}),"\n",(0,r.jsxs)(n.p,{children:["Then, provide your application with a websockets URL to your self-hosted Conductor server.\nFor example, for the Docker compose setup above, this URL is ",(0,r.jsx)(n.code,{children:"ws://localhost:8090/"}),"."]}),"\n",(0,r.jsxs)(i,{groupId:"language",queryString:"language",children:[(0,r.jsxs)(t,{value:"python",label:"Python",children:[(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"This requires DBOS Python >= 2.6.0"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'config: DBOSConfig = {\n    "name": "my-app-name",\n    "system_database_url": os.environ.get("DBOS_SYSTEM_DATABASE_URL"),\n    "conductor_key": os.environ.get("DBOS_CONDUCTOR_KEY"),\n    "conductor_url": os.environ.get("DBOS_CONDUCTOR_URL"),\n}\nDBOS(config=config)\n'})})]}),(0,r.jsx)(t,{value:"typescript",label:"TypeScript",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const conductorKey = process.env.DBOS_CONDUCTOR_KEY;\nconst conductorURL = process.env.DBOS_CONDUCTOR_URL;\nawait DBOS.launch({conductorKey, conductorURL});\n"})})}),(0,r.jsx)(t,{value:"golang",label:"Go",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'conductorKey := os.Getenv("DBOS_CONDUCTOR_KEY")\nconductorURL := os.Getenv("DBOS_CONDUCTOR_URL")\ndbosContext, err := dbos.NewDBOSContext(context.Background(), dbos.Config{\n    AppName:         "dbos-starter",\n    DatabaseURL:     os.Getenv("DBOS_SYSTEM_DATABASE_URL"),\n\tConductorURL:    conductorURL,\n    ConductorAPIKey: conductorKey,\n})\n'})})}),(0,r.jsx)(t,{value:"java",label:"Java",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'String conductorKey = System.getenv("DBOS_CONDUCTOR_KEY");\nString conductorDomain = System.getenv("DBOS_CONDUCTOR_URL");\n\nDBOSConfig config = DBOSConfig.defaults("dbos-java-starter")\n    .withDatabaseUrl(System.getenv("DBOS_SYSTEM_JDBC_URL"))\n    .withConductorKey(conductorKey)\n    .withConductorDomain(conductorDomain);\n'})})})]}),"\n",(0,r.jsx)(n.h2,{id:"licensing",children:"Licensing"}),"\n",(0,r.jsxs)(n.p,{children:["Self-hosted Conductor is released under a ",(0,r.jsx)(n.a,{href:"https://www.dbos.dev/conductor-license",children:"proprietary license"}),".\nYou can use the Conductor container distribution with a free license key for development, trial, or hobby projects (a free license key can be obtained from the DBOS Console ",(0,r.jsx)(n.a,{href:"https://console.dbos.dev/settings/license-key",children:"here"}),"), but self-hosting Conductor in production or for commercial use requires a paid license.\nUsing a free license key, usage is limited\u2014you will not be able to connect more than one executor to a Conductor application.\nTo obtain a paid license key, please ",(0,r.jsx)(n.a,{href:"https://www.dbos.dev/contact",children:"contact sales"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Once you have a paid license key, you can provide it to Conductor by setting the ",(0,r.jsx)(n.code,{children:"DBOS_CONDUCTOR_LICENSE_KEY"})," environment variable in the Conductor container to your license key."]}),"\n",(0,r.jsx)(n.h2,{id:"hosting-conductor-in-production",children:"Hosting Conductor in Production"}),"\n",(0,r.jsxs)(n.p,{children:["You can self-host DBOS Conductor in production by deploying two services: the ",(0,r.jsx)(n.a,{href:"https://hub.docker.com/r/dbosdev/conductor",children:"Conductor"})," service and the ",(0,r.jsx)(n.a,{href:"https://hub.docker.com/r/dbosdev/console",children:"DBOS Console"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["For a complete Kubernetes walkthrough covering infrastructure, secrets, ingress, and deployment, see ",(0,r.jsx)(n.a,{href:"/production/hosting-conductor-with-kubernetes",children:"Self-Hosting Conductor with Kubernetes"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"conductor",children:"Conductor"}),"\n",(0,r.jsxs)(n.p,{children:["To deploy the Conductor service to production, it must connect to a Postgres database.\nThis database is purely for Conductor internal data (e.g., its registry of applications), it ",(0,r.jsx)(n.strong,{children:"is not"})," the database your DBOS applications connect to (Conductor does not need direct access to that database).\nYou can configure this database by setting the ",(0,r.jsx)(n.code,{children:"DBOS__CONDUCTOR_DB_URL"})," environment variable in the Conductor container."]}),"\n",(0,r.jsxs)(n.p,{children:["When deploying to production, we recommend placing the Conductor service behind a reverse proxy (e.g., Nginx) for web traffic ingress and TLS termination.\nAll traffic should be forwarded to the Conductor service container on port 8090.\nYou should also configure ",(0,r.jsx)(n.a,{href:"#security",children:"authentication"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"dbos-console",children:"DBOS Console"}),"\n",(0,r.jsxs)(n.p,{children:["To deploy the DBOS Console to production, it must connect to your Conductor service.\nYou can provide the URL of this service by setting the ",(0,r.jsx)(n.code,{children:"DBOS_CONDUCTOR_URL"})," environment variable in your Console container."]}),"\n",(0,r.jsxs)(n.p,{children:["When deploying to production, we recommend placing the Console container behind a reverse proxy (e.g., Nginx) for web traffic ingress and TLS termination.\nAll traffic should be forwarded to the Console service container on port 80.\nYou should also configure ",(0,r.jsx)(n.a,{href:"#security",children:"authentication"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,r.jsx)(n.p,{children:"To securely self-host Conductor in production, you should set up authentication and authorization for all API calls made to it.\nWithout these, your Conductor service could be accessed by unwanted entities."}),"\n",(0,r.jsx)(n.p,{children:"You can integrate Conductor with any OAuth-compatible single-sign on (SSO) experience.\nTo do this, first register the DBOS Console as an application and Conductor as an API (audience) with your OAuth provider.\nConfigure the following with your provider:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"https://your-domain/oauth/callback"}),"as a callback URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"https://your-domain"})," as an allowed web origin"]}),"\n",(0,r.jsx)(n.li,{children:"Authorization code with PKCE as an allowed grant type"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"openid profile email"})," as valid scopes."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Then, set these environment variables in your Conductor container:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yml",children:'DBOS_OAUTH_ENABLED: "true"\nDBOS_OAUTH_JWKS_URL: "https://your-oauth-provider.com/.well-known/jwks.json"\nDBOS_OAUTH_ISSUER: "https://your-oauth-provider.com/"\nDBOS_OAUTH_AUDIENCE: "your-api-audience"\n'})}),"\n",(0,r.jsx)(n.p,{children:"And set these environment variables in your DBOS Console container:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yml",children:"DBOS_OAUTH_ENABLED: 'true'\nDBOS_OAUTH_AUTHORIZATION_URL: 'https://your-oauth-provider.com/[...]/authorize'\nDBOS_OAUTH_TOKEN_URL: 'https://your-oauth-provider.com/[...]/token'\nDBOS_OAUTH_CLIENT_ID: 'your-client-id'\nDBOS_OAUTH_SCOPE: 'openid profile email'\nDBOS_OAUTH_USERINFO_URL: 'https://your-oauth-provider.com/[...]/userinfo'\nDBOS_OAUTH_LOGOUT_URL: 'https://your-oauth-provider.com/[...]/logout'\nDBOS_OAUTH_AUDIENCE: 'your-api-audience'\n"})}),"\n",(0,r.jsx)(n.p,{children:"These values correspond to the client credentials and endpoints provided by your OAuth identity provider (such as Google, Auth0, or Okta).\nNone of these values are secrets.\nWhen properly configured, the DBOS Console will redirect users to your SSO login page and enforce authentication on access."}),"\n",(0,r.jsx)(n.h2,{id:"upgrading",children:"Upgrading"}),"\n",(0,r.jsx)(n.p,{children:"You can upgrade Conductor and the DBOS Console by simply upgrading the container versions and restarting the service.\nBecause Conductor is entirely out-of-band, this will have no impact on your DBOS applications' availability; your apps will seamlessly reconnect to your new Conductor version."}),"\n",(0,r.jsx)(n.p,{children:"We recommend regularly upgrading Conductor and the DBOS Console to the latest versions to take advantage of new features.\nWe always guarantee it is safe to upgrade directly from any past version to any future version.\nFor the best experience, we recommend upgrading Conductor and the DBOS Console together and not using a version of the DBOS Console more recent than your version of Conductor."}),"\n",(0,r.jsx)(n.h2,{id:"scaling",children:"Scaling"}),"\n",(0,r.jsx)(n.p,{children:"Architecturally, Conductor is entirely out-of-band and off the critical path of your application.\nAs such, it requires minimal resources to serve large application deployments.\nA single server hosting the Conductor service can serve tens of thousands of application servers processing  millions of workflows per second."})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>c});var t=o(6540);const r={},s=t.createContext(r);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);