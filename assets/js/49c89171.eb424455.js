"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[2537],{9404:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"production/self-hosting/conductor","title":"DBOS Conductor","description":"The simplest way to operate DBOS durable workflows in production is to connect your application to DBOS Conductor.","source":"@site/docs/production/self-hosting/conductor.md","sourceDirName":"production/self-hosting","slug":"/production/self-hosting/conductor","permalink":"/production/self-hosting/conductor","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"DBOS Conductor"},"sidebar":"tutorialSidebar","previous":{"title":"Deploying To Production","permalink":"/production/"},"next":{"title":"Workflow Management","permalink":"/production/self-hosting/workflow-management"}}');var a=o(4848),r=o(8453);const s={sidebar_position:10,title:"DBOS Conductor"},i=void 0,c={},l=[{value:"Connecting To Conductor",id:"connecting-to-conductor",level:2},{value:"Managing Conductor Applications",id:"managing-conductor-applications",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{TabItem:t,Tabs:s}=n;return t||p("TabItem",!0),s||p("Tabs",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"The simplest way to operate DBOS durable workflows in production is to connect your application to DBOS Conductor.\nConductor is a managed service that helps you operate DBOS applications.\nIt provides:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/production/self-hosting/workflow-recovery",children:(0,a.jsx)(n.strong,{children:"Distributed workflow recovery"})}),": In a distributed environment with many executors running durable workflows, Conductor automatically detects when the execution of a durable workflow is interrupted (for example, if its executor is restarted, interrupted, or crashes) and recovers the workflow to another healthy executor."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/production/self-hosting/workflow-management",children:(0,a.jsx)(n.strong,{children:"Workflow and queue observability"})}),": Conductor provides dashboards of all active and past workflows and all queued tasks, including their status, inputs, outputs, and steps."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/production/self-hosting/workflow-management",children:(0,a.jsx)(n.strong,{children:"Workflow and queue management"})}),": From the Conductor dashboard, cancel, resume, or restart any workflow execution and manage the tasks in your distributed queues."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"connecting-to-conductor",children:"Connecting To Conductor"}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsx)(n.p,{children:"Conductor is not part of your application's critical path.\nIf your connection to Conductor is interrupted, your applications will continue operating normally.\nRecovery, observability, and workflow management will automatically resume once connectivity is restored."})}),"\n",(0,a.jsxs)(n.p,{children:["To connect your application to Conductor, first register your application on the ",(0,a.jsx)(n.a,{href:"https://console.dbos.dev",children:"DBOS console"}),".\n",(0,a.jsx)(n.strong,{children:"The name you register must match the name you give your application in its configuration."})]}),"\n",(0,a.jsx)("img",{src:o(7835).A,alt:"Workflow List",width:"800",className:"custom-img"}),"\n",(0,a.jsxs)(n.p,{children:["Next, generate an API key.\nBy default, API keys do not expire, though they may be revoked at any time from the ",(0,a.jsx)(n.a,{href:"https://staging.console.dbos.dev/settings/apikey",children:"key settings page"}),":"]}),"\n",(0,a.jsx)("img",{src:o(4697).A,alt:"Workflow List",width:"800",className:"custom-img"}),"\n",(0,a.jsx)(n.p,{children:"Finally, supply that API key to your DBOS application to connect it to Conductor.\nThis initiates a websocket connection with Conductor:"}),"\n",(0,a.jsxs)(s,{groupId:"language",queryString:"language",children:[(0,a.jsx)(t,{value:"python",label:"Python",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'conductor_key=os.environ.get("DBOS_CONDUCTOR_KEY", None)\nDBOS(conductor_key=conductor_key)\n'})})}),(0,a.jsx)(t,{value:"typescript",label:"TypeScript",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const conductorKey = process.env.DBOS_CONDUCTOR_KEY\nawait DBOS.launch({conductorKey})\n"})})}),(0,a.jsx)(t,{value:"golang",label:"Go",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'conductorKey := os.Getenv("CONDUCTOR_KEY")\ndbosContext, err := dbos.NewDBOSContext(context.Background(), dbos.Config{\n    AppName:         "dbos-starter",\n    DatabaseURL:     os.Getenv("DBOS_SYSTEM_DATABASE_URL"),\n    ConductorAPIKey: conductorKey,\n})\n'})})})]}),"\n",(0,a.jsx)(n.h2,{id:"managing-conductor-applications",children:"Managing Conductor Applications"}),"\n",(0,a.jsx)(n.p,{children:"You can view all applications registered with Conductor on the DBOS Console:"}),"\n",(0,a.jsx)("img",{src:o(4049).A,alt:"Workflow List",width:"800",className:"custom-img"}),"\n",(0,a.jsx)(n.p,{children:"On your application's page, you can see all executors (processes) running that application that are currently connected to Conductor.\nExecutors are identified by a unique ID that they generate and print on startup.\nWhen you restart an executor, it generates a new ID."}),"\n",(0,a.jsx)("img",{src:o(6837).A,alt:"Workflow List",width:"800",className:"custom-img"}),"\n",(0,a.jsxs)(n.p,{children:["Conductor uses a WebSocket-based protocol to exchange workflow metadata and commands with your application.  An application is shown as ",(0,a.jsx)(n.em,{children:"available"})," in Conductor when at least one of its processes is connected.  Conductor has no access to your application's database or other private data.  As a result, workflow-related features are only available while your application is connected to Conductor over this metadata-only connection."]}),"\n",(0,a.jsxs)(n.admonition,{type:"tip",children:[(0,a.jsx)(n.p,{children:"For isolation, you should set up a separate Conductor app for each environment in which you run your DBOS application.\nFor example, you may want to have separate dev, staging, and prod Conductor apps.\nTo facilitate this, pass in your application name as an environment variable, for example:"}),(0,a.jsxs)(s,{groupId:"language",queryString:"language",children:[(0,a.jsx)(t,{value:"python",label:"Python",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'config: DBOSConfig = {\n    "name": os.environ.get("DBOS_APPLICATION_NAME"),\n    "database_url": os.environ.get("DBOS_DATABASE_URL"),\n}\nconductor_key=os.environ.get("DBOS_CONDUCTOR_KEY", None)\nDBOS(config=config, conductor_key=conductor_key)\n'})})}),(0,a.jsx)(t,{value:"typescript",label:"TypeScript",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:'DBOS.setConfig({\n    "name": process.env.DBOS_APPLICATION_NAME,\n    "systemDatabaseUrl": process.env.DBOS_SYSTEM_DATABASE_URL,\n});\nconst conductorKey = process.env.DBOS_CONDUCTOR_KEY\nawait DBOS.launch({conductorKey})\n'})})}),(0,a.jsx)(t,{value:"golang",label:"Go",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'conductorKey := os.Getenv("CONDUCTOR_KEY")\ndbosContext, err := dbos.NewDBOSContext(context.Background(), dbos.Config{\n    AppName:         os.Getenv("DBOS_APPLICATION_NAME"),\n    DatabaseURL:     os.Getenv("DBOS_SYSTEM_DATABASE_URL"),\n    ConductorAPIKey: conductorKey,\n})\n'})})})]})]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}function p(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},6837:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/app-page-4188f1dd42604a75835ad77a3059bacb.png"},4697:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/conductor-key-fb78817000876707d9949b837541c784.png"},4049:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/list-apps-1dcd0ee0e67006bd26f1a94bdb5df5e5.png"},7835:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/register-app-8970120882c0baa76741f434eb6e5cd8.png"},8453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>i});var t=o(6540);const a={},r=t.createContext(a);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);