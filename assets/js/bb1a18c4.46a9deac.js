"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[411],{4302:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>t,metadata:()=>r,toc:()=>c});var i=a(5893),o=a(1151);const t={sidebar_position:2,title:"Cloud Application Management",description:"Learn how to manage DBOS Cloud applications"},s=void 0,r={id:"cloud-tutorials/application-management",title:"Cloud Application Management",description:"Learn how to manage DBOS Cloud applications",source:"@site/docs/cloud-tutorials/application-management.md",sourceDirName:"cloud-tutorials",slug:"/cloud-tutorials/application-management",permalink:"/cloud-tutorials/application-management",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Cloud Application Management",description:"Learn how to manage DBOS Cloud applications"},sidebar:"tutorialSidebar",previous:{title:"Cloud Database Management",permalink:"/cloud-tutorials/database-management"},next:{title:"Time Travel Debugging",permalink:"/cloud-tutorials/timetravel-debugging"}},l={},c=[{value:"Preliminaries",id:"preliminaries",level:3},{value:"Registering and Deploying Applications",id:"registering-and-deploying-applications",level:3},{value:"Rolling Back Application Databases",id:"rolling-back-application-databases",level:3},{value:"Monitoring and Debugging Applications",id:"monitoring-and-debugging-applications",level:3},{value:"Managing Application Versions",id:"managing-application-versions",level:3},{value:"Deleting Applications",id:"deleting-applications",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"In this guide, you'll learn how to manage applications in DBOS Cloud."}),"\n",(0,i.jsx)(n.h3,{id:"preliminaries",children:"Preliminaries"}),"\n",(0,i.jsxs)(n.p,{children:["To deploy an application, you need a database to connect to.\nYou can use the database you created in the ",(0,i.jsx)(n.a,{href:"/getting-started/quickstart",children:"quickstart"})," or ",(0,i.jsx)(n.a,{href:"/cloud-tutorials/database-management#provisioning-database-instances",children:"provision"})," a new one.\nAdditionally, you must define ",(0,i.jsx)(n.a,{href:"/cloud-tutorials/database-management#database-schema-management",children:"schema migrations"})," to create your application's tables."]}),"\n",(0,i.jsx)(n.h3,{id:"registering-and-deploying-applications",children:"Registering and Deploying Applications"}),"\n",(0,i.jsxs)(n.p,{children:["The first step in deploying an application to DBOS Cloud is registering it.\nTo register an application, run the following command in your application root directory, where ",(0,i.jsx)(n.code,{children:"database-instance-name"})," is the name of a Postgres database instance you've ",(0,i.jsx)(n.a,{href:"/cloud-tutorials/database-management#provisioning-database-instances",children:"provisioned"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app register -d <database-instance-name>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Your application is automatically registered under the name in its ",(0,i.jsx)(n.code,{children:"package.json"}),".\nApplication names should be between 3 and 30 characters and must contain only lowercase letters and numbers, dashes (",(0,i.jsx)(n.code,{children:"-"}),"), and underscores (",(0,i.jsx)(n.code,{children:"_"}),")."]}),"\n",(0,i.jsx)(n.p,{children:"After you've registered your application, deploy it to run it in the cloud.\nRun this command in your application root directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app deploy\n"})}),"\n",(0,i.jsxs)(n.p,{children:["When you deploy an application, DBOS Cloud first runs ",(0,i.jsx)(n.a,{href:"/api-reference/cli#npx-dbos-migrate",children:(0,i.jsx)(n.code,{children:"npx dbos migrate"})})," on your application database to apply all schema migrations you've defined.\nIt then starts your application.\nAfter your application is deployed, DBOS Cloud hosts it at this URL, which is also printed by the deploy command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"https://<username>-<app-name>.cloud.dbos.dev/\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you edit your application or schema, run ",(0,i.jsx)(n.code,{children:"npx dbos-cloud app deploy"})," again to apply the latest migrations and upgrade to the latest version."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["You don't have to worry about changing database server connection parameters like ",(0,i.jsx)(n.code,{children:"hostname"})," or ",(0,i.jsx)(n.code,{children:"password"})," in ",(0,i.jsx)(n.a,{href:"/api-reference/configuration",children:(0,i.jsx)(n.code,{children:"dbos-config.yaml"})})," to deploy an application to the cloud\u2014DBOS automatically applies the connection information of your cloud database instance."]})}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"Be careful making breaking schema changes such as deleting or renaming a column\u2014they may break active workflows running on a previous application version."})}),"\n",(0,i.jsx)(n.h3,{id:"rolling-back-application-databases",children:"Rolling Back Application Databases"}),"\n",(0,i.jsxs)(n.p,{children:["To ",(0,i.jsx)(n.a,{href:"/cloud-tutorials/database-management#database-schema-management",children:"roll back your application database"}),", run ",(0,i.jsx)(n.code,{children:"npx dbos-cloud app rollback"}),".\nThis command works analagously to ",(0,i.jsx)(n.code,{children:"deploy"}),", but instead of running ",(0,i.jsx)(n.code,{children:"npx dbos migrate"}),", it runs ",(0,i.jsx)(n.a,{href:"/api-reference/cli#npx-dbos-rollback",children:(0,i.jsx)(n.code,{children:"npx dbos rollback"})})," to execute the rollback commands defined in your ",(0,i.jsx)(n.a,{href:"/api-reference/configuration#database",children:"configuration file"}),".\nIt then updates your application code."]}),"\n",(0,i.jsx)(n.h3,{id:"monitoring-and-debugging-applications",children:"Monitoring and Debugging Applications"}),"\n",(0,i.jsx)(n.p,{children:"DBOS provides many tools to monitor and debug applications:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To get a high-level view of all your applications and their traces and logs, check out ",(0,i.jsx)(n.a,{href:"./monitoring-dashboard",children:"our monitoring dashboard"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To replay DBOS Cloud execution traces locally, check out our ",(0,i.jsx)(n.a,{href:"./timetravel-debugging",children:"time travel debugger"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To retrieve the last ",(0,i.jsx)(n.code,{children:"N"})," seconds of your application's logs, run in your application root directory ",(0,i.jsx)(n.a,{href:"/api-reference/cloud-cli#npx-dbos-cloud-app-logs",children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app logs -l <N>"})}),". Note that new log entries take a few seconds to appear."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To retrieve the status of a particular application, run ",(0,i.jsx)(n.a,{href:"/api-reference/cloud-cli#npx-dbos-cloud-app-status",children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app status <app-name>"})}),". To retrieve the statuses of all applications, run ",(0,i.jsx)(n.a,{href:"/api-reference/cloud-cli#npx-dbos-cloud-app-list",children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app list"})}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"managing-application-versions",children:"Managing Application Versions"}),"\n",(0,i.jsx)(n.p,{children:"Each time you deploy an application, it creates a new version with a unique ID.\nTo list all previous versions of your application, run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app versions <app-name>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can redeploy a previous version of your application by passing ",(0,i.jsx)(n.code,{children:"--previous-version <version-id>"})," to the ",(0,i.jsx)(n.a,{href:"/api-reference/cloud-cli#npx-dbos-cloud-app-deploy",children:(0,i.jsx)(n.code,{children:"app deploy"})})," command."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app deploy --previous-version <version-id>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["However, this will fail if the previous and current versions have different database schemas.\nTo roll back your schema, use the ",(0,i.jsx)(n.a,{href:"#rolling-back-application-databases",children:"rollback command"})," instead."]}),"\n",(0,i.jsx)(n.h3,{id:"deleting-applications",children:"Deleting Applications"}),"\n",(0,i.jsx)(n.p,{children:"To delete an application, run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"npx dbos-cloud app delete <app-name>\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,a)=>{a.d(n,{Z:()=>r,a:()=>s});var i=a(7294);const o={},t=i.createContext(o);function s(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);