"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[7839],{5858:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var t=i(4848),o=i(8453);const a={sidebar_position:11,title:"CI/CD Best Practices"},s=void 0,r={id:"cloud-tutorials/cicd",title:"CI/CD Best Practices",description:"Staging and Production Environments",source:"@site/docs/cloud-tutorials/cicd.md",sourceDirName:"cloud-tutorials",slug:"/cloud-tutorials/cicd",permalink:"/cloud-tutorials/cicd",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:11,frontMatter:{sidebar_position:11,title:"CI/CD Best Practices"},sidebar:"tutorialSidebar",previous:{title:"Time Travel Debugging",permalink:"/cloud-tutorials/timetravel-debugging"},next:{title:"Cloud CLI Reference",permalink:"/cloud-tutorials/cloud-cli"}},c={},d=[{value:"Staging and Production Environments",id:"staging-and-production-environments",level:2},{value:"Secrets management",id:"secrets-management",level:2},{value:"Authentication",id:"authentication",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"staging-and-production-environments",children:"Staging and Production Environments"}),"\n",(0,t.jsxs)(n.p,{children:["To make it easy to test changes to your application without affecting your production users, we recommend using separate staging and production environments.\nYou can do this by deploying your application with different names for staging and production.\nFor example, when deploying ",(0,t.jsx)(n.code,{children:"my-app"})," to staging, deploy using:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"dbos-cloud app deploy my-app-staging\n"})}),"\n",(0,t.jsx)(n.p,{children:"When deploying to production, use:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"dbos-cloud app deploy my-app-prod\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"my-app-staging"})," and ",(0,t.jsx)(n.code,{children:"my-app-prod"})," are completely separate and isolated DBOS applications.\nThere's nothing special about the ",(0,t.jsx)(n.code,{children:"-staging"})," and ",(0,t.jsx)(n.code,{children:"-prod"})," suffixes\u2014you can use any names you like."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["If you manually specify the application database name by setting ",(0,t.jsx)(n.code,{children:"app_db_name"})," in ",(0,t.jsx)(n.code,{children:"dbos_config.yaml"}),", you must ensure each environment uses a different value of ",(0,t.jsx)(n.code,{children:"app_db_name"}),"."]})}),"\n",(0,t.jsx)(n.h2,{id:"secrets-management",children:"Secrets management"}),"\n",(0,t.jsx)(n.p,{children:"To make secrets, such as API keys, available to your application running in DBOS Cloud, we recommend using environment variables."}),"\n",(0,t.jsxs)(n.p,{children:["First, declare the environment variable in the ",(0,t.jsx)(n.code,{children:"env"})," section of ",(0,t.jsx)(n.code,{children:"dbos-config.yaml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"env:\n    API_KEY: ${API_KEY}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Then the value of ",(0,t.jsx)(n.code,{children:"API_KEY"})," in your client environment will be submitted with your application and supplied to it as an environment variable on DBOS Cloud.\nOnly environment variables declared in ",(0,t.jsx)(n.code,{children:"dbos-config.yaml"})," are submitted and supplied like this."]}),"\n",(0,t.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,t.jsxs)(n.p,{children:["You should use ",(0,t.jsx)(n.a,{href:"account-management#authenticating-programatically",children:"refresh tokens"})," to programmatically authenticate your CI/CD user with DBOS Cloud."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["Upgrading to a DBOS Cloud paid plan will unlock ",(0,t.jsx)(n.a,{href:"account-management#organization-management",children:"multi-user organizations"})," which you can use to setup dedicated users for CI/CD."]})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>r});var t=i(6540);const o={},a=t.createContext(o);function s(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);