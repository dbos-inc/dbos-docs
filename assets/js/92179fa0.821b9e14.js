"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[404],{1457:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"python/tutorials/classes","title":"Working With Python Classes","description":"You can add DBOS workflow, step, and transaction decorators to your Python class instance methods.","source":"@site/docs/python/tutorials/classes.md","sourceDirName":"python/tutorials","slug":"/python/tutorials/classes","permalink":"/python/tutorials/classes","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15,"title":"Working With Python Classes"},"sidebar":"tutorialSidebar","previous":{"title":"Authentication and Authorization","permalink":"/python/tutorials/authentication-authorization"},"next":{"title":"Debugging","permalink":"/python/tutorials/debugging"}}');var o=n(4848),a=n(8453);const r={sidebar_position:15,title:"Working With Python Classes"},c=void 0,i={},l=[{value:"Static Methods and Class Methods",id:"static-methods-and-class-methods",level:3}];function d(e){const t={code:"code",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["You can add DBOS workflow, step, and transaction decorators to your Python class instance methods.\nTo add DBOS decorators to your methods, their class must inherit from ",(0,o.jsx)(t.code,{children:"DBOSConfiguredInstance"})," and must be decorated with ",(0,o.jsx)(t.code,{children:"@DBOS.dbos_class"}),".\nFor example:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:'@DBOS.dbos_class()\nclass URLFetcher(DBOSConfiguredInstance):\n    def __init__(self, url: str):\n        self.url = url\n        super().__init__(config_name=url)\n\n    @DBOS.workflow()\n    def fetch_workflow(self):\n        return self.fetch_url()\n\n    @DBOS.step()\n    def fetch_url(self):\n        return requests.get(self.url).text\n    \nexample_fetcher = URLFetcher("https://example.com")\nprint(example_fetcher.fetch_workflow())\n'})}),"\n",(0,o.jsxs)(t.p,{children:["When you create a new instance of a DBOS-decorated class,  ",(0,o.jsx)(t.code,{children:"DBOSConfiguredInstance"})," must be instantiated with a ",(0,o.jsx)(t.code,{children:"config_name"}),".\nThis ",(0,o.jsx)(t.code,{children:"config_name"})," should be a unique identifier of the instance.\nAdditionally, all DBOS-decorated classes must be instantiated before ",(0,o.jsx)(t.code,{children:"DBOS.launch()"})," is called."]}),"\n",(0,o.jsxs)(t.p,{children:["The reason for these requirements is to enable workflow recovery.\nWhen you create a new instance of a DBOS-decorated class, DBOS stores it in a global registry indexed by ",(0,o.jsx)(t.code,{children:"config_name"}),".\nWhen DBOS needs to recover a workflow belonging to that class, it looks up the class instance using ",(0,o.jsx)(t.code,{children:"config_name"})," so it can run the workflow using the right instance of its class.\nIf ",(0,o.jsx)(t.code,{children:"config_name"})," is not supplied, or if DBOS-decorated classes are dynamically instantiated after ",(0,o.jsx)(t.code,{children:"DBOS.launch()"}),", then DBOS may not find the class instance it needs to recover a workflow."]}),"\n",(0,o.jsx)(t.h3,{id:"static-methods-and-class-methods",children:"Static Methods and Class Methods"}),"\n",(0,o.jsxs)(t.p,{children:["You can add DBOS workflow, step, and transaction decorators to static methods and class methods of any class, even if it does not inherit from ",(0,o.jsx)(t.code,{children:"DBOSConfiguredInstance"}),", because such methods do not access class instance variables.\nYou must still decorate the class with ",(0,o.jsx)(t.code,{children:"@DBOS.dbos_class()"}),".\nFor example:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:"@DBOS.dbos_class()\nclass ExampleClass()\n        @staticmethod\n        @DBOS.workflow()\n        def staticmethod_workflow():\n            return\n\n        @classmethod\n        @DBOS.workflow()\n        def classmethod_workflow(cls):\n            return\n"})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>c});var s=n(6540);const o={},a=s.createContext(o);function r(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);