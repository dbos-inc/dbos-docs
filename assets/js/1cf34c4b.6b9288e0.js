"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[6571],{2560:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"typescript/reference/client","title":"DBOS Client","description":"DBOSClient provides a programmatic way to interact with your DBOS application from external code.","source":"@site/docs/typescript/reference/client.md","sourceDirName":"typescript/reference","slug":"/typescript/reference/client","permalink":"/typescript/reference/client","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":50,"frontMatter":{"sidebar_position":50,"title":"DBOS Client"},"sidebar":"tutorialSidebar","previous":{"title":"Transactions & Datasources","permalink":"/typescript/reference/datasource"},"next":{"title":"Configuration","permalink":"/typescript/reference/configuration"}}');var o=r(4848),i=r(8453);const t={sidebar_position:50,title:"DBOS Client"},l=void 0,c={},d=[{value:"class DBOSClient",id:"class-dbosclient",level:3},{value:"<code>create</code>",id:"create",level:4},{value:"<code>destroy</code>",id:"destroy",level:4},{value:"Workflow Interaction",id:"workflow-interaction",level:3},{value:"<code>enqueue</code>",id:"enqueue",level:4},{value:"<code>send</code>",id:"send",level:4},{value:"<code>getEvent</code>",id:"getevent",level:4},{value:"<code>retrieveWorkflow</code>",id:"retrieveworkflow",level:4},{value:"<code>readStream</code>",id:"readstream",level:4},{value:"Workflow Inspection",id:"workflow-inspection",level:3},{value:"<code>getWorkflow</code>",id:"getworkflow",level:4},{value:"<code>listWorkflows</code>",id:"listworkflows",level:4},{value:"<code>listQueuedWorkflows</code>",id:"listqueuedworkflows",level:4},{value:"<code>listWorkflowSteps</code>",id:"listworkflowsteps",level:4},{value:"Workflow Management",id:"workflow-management",level:3},{value:"<code>cancelWorkflow</code>",id:"cancelworkflow",level:4},{value:"<code>resumeWorkflow</code>",id:"resumeworkflow",level:4},{value:"<code>forkWorkflow</code>",id:"forkworkflow",level:4},{value:"Workflow Schedules",id:"workflow-schedules",level:2},{value:"<code>createSchedule</code>",id:"createschedule",level:4},{value:"<code>listSchedules</code>",id:"listschedules",level:4},{value:"<code>getSchedule</code>",id:"getschedule",level:4},{value:"<code>deleteSchedule</code>",id:"deleteschedule",level:4},{value:"<code>pauseSchedule</code>",id:"pauseschedule",level:4},{value:"<code>resumeSchedule</code>",id:"resumeschedule",level:4},{value:"<code>applySchedules</code>",id:"applyschedules",level:4},{value:"<code>backfillSchedule</code>",id:"backfillschedule",level:4},{value:"<code>triggerSchedule</code>",id:"triggerschedule",level:4},{value:"Debouncing",id:"debouncing",level:2},{value:"DebouncerClient",id:"debouncerclient",level:3},{value:"debouncerClient.debounce",id:"debouncerclientdebounce",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"DBOSClient"})," provides a programmatic way to interact with your DBOS application from external code.\n",(0,o.jsx)(n.code,{children:"DBOSClient"})," includes methods similar to ",(0,o.jsx)(n.code,{children:"DBOS"}),".\nthat make sense to be used outside of a DBOS workflow or step, such as ",(0,o.jsx)(n.code,{children:"enqueueWorkflow"})," or ",(0,o.jsx)(n.code,{children:"getEvent"}),"."]}),"\n",(0,o.jsxs)(n.admonition,{type:"note",children:[(0,o.jsx)(n.mdxAdmonitionTitle,{}),(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"DBOSClient"})," is included in the ",(0,o.jsx)(n.code,{children:"@dbos-inc/dbos-sdk"})," package, the same package that used by DBOS applications.\nWhere DBOS applications use the static ",(0,o.jsx)(n.code,{children:"DBOS"})," class,\nexternal applications use the ",(0,o.jsx)(n.code,{children:"DBOSClient"})," class instead."]})]}),"\n",(0,o.jsx)(n.h3,{id:"class-dbosclient",children:"class DBOSClient"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"interface EnqueueOptions {\n    workflowName: string;\n    workflowClassName?: string;\n    workflowConfigName?: string;\n    queueName: string;\n    workflowID?: string;\n    appVersion?: string;\n    workflowTimeoutMS?: number;\n    deduplicationID?: string;\n    priority?: number;\n    queuePartitionKey?: string;\n}\n\nclass DBOSClient {\n    static create({systemDatabaseUrl, systemDatabasePool, serializer, systemDatabaseSchemaName}: {systemDatabaseUrl: string, systemDatabasePool?: Pool, serializer?: DBOSSerializer, systemDatabaseSchemaName?: string}): Promise<DBOSClient>\n    destroy(): Promise<void>;\n\n    enqueue<T extends (...args: any[]) => Promise<any>>(\n        options: ClientEnqueueOptions,\n        ...args: Parameters<T>\n    ): Promise<WorkflowHandle<Awaited<ReturnType<T>>>>;\n    send<T>(destinationID: string, message: T, topic?: string, idempotencyKey?: string): Promise<void>;\n    getEvent<T>(workflowID: string, key: string, timeoutSeconds?: number): Promise<T | null>;\n    retrieveWorkflow<T = unknown>(workflowID: string): WorkflowHandle<Awaited<T>>;\n    readStream<T>(workflowID: string, key: string): AsyncGenerator<T, void, unknown>;\n\n    getWorkflow(workflowID: string): Promise<WorkflowStatus | undefined>;\n    listWorkflows(input: GetWorkflowsInput): Promise<WorkflowStatus[]>;\n    listQueuedWorkflows(input: GetWorkflowsInput): Promise<WorkflowStatus[]>;\n    listWorkflowSteps(workflowID: string): Promise<StepInfo[] | undefined>;\n\n    cancelWorkflow(workflowID: string): Promise<void>;\n    resumeWorkflow(workflowID: string): Promise<void>;\n    forkWorkflow(workflowID: string, startStep: number,\n        options?: { newWorkflowID?: string; applicationVersion?: string; timeoutMS?: number }): Promise<string>;\n\n    createSchedule(options: { scheduleName: string; workflowName: string; workflowClassName?: string; schedule: string; context?: unknown }): Promise<void>;\n    listSchedules(filters?: { status?: string | string[]; workflowName?: string | string[]; scheduleNamePrefix?: string | string[] }): Promise<WorkflowSchedule[]>;\n    getSchedule(name: string): Promise<WorkflowSchedule | null>;\n    deleteSchedule(name: string): Promise<void>;\n    pauseSchedule(name: string): Promise<void>;\n    resumeSchedule(name: string): Promise<void>;\n    applySchedules(schedules: Array<{ scheduleName: string; workflowName: string; workflowClassName?: string; schedule: string; context?: unknown }>): Promise<void>;\n    backfillSchedule(name: string, start: Date, end: Date): Promise<WorkflowHandle<unknown>[]>;\n    triggerSchedule(name: string): Promise<WorkflowHandle<unknown>>;\n}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"create",children:(0,o.jsx)(n.code,{children:"create"})}),"\n",(0,o.jsxs)(n.p,{children:["You construct a ",(0,o.jsx)(n.code,{children:"DBOSClient"})," with the static ",(0,o.jsx)(n.code,{children:"create"})," function."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"systemDatabaseUrl"}),": A connection string to your Postgres database. See the ",(0,o.jsx)(n.a,{href:"/typescript/reference/configuration",children:"configuration docs"})," for more detail."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"systemDatabasePool"}),": An optional custom ",(0,o.jsx)(n.code,{children:"node-postgres"})," connection pool to use instead of creating a new one. If provided, the client will use this pool for all database operations."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"serializer"}),": An optional custom serializer. If your DBOS application uses ",(0,o.jsx)(n.a,{href:"/typescript/reference/configuration#custom-serialization",children:"custom serialization"}),", you must provide the same serializer to the client to correctly deserialize workflow results and events."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"systemDatabaseSchemaName"}),": An optional Postgres schema name for DBOS system tables. Defaults to ",(0,o.jsx)(n.code,{children:"dbos"}),". If your DBOS application uses a ",(0,o.jsx)(n.a,{href:"/typescript/reference/configuration#database-connection-settings",children:"custom schema name"}),", you must provide the same schema name to the client."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import { DBOSClient } from "@dbos-inc/dbos-sdk";\n\nconst client = await DBOSClient.create({systemDatabaseUrl: process.env.DBOS_SYSTEM_DATABASE_URL});\n'})}),"\n",(0,o.jsx)(n.h4,{id:"destroy",children:(0,o.jsx)(n.code,{children:"destroy"})}),"\n",(0,o.jsxs)(n.p,{children:["Asynchronously destroys a ",(0,o.jsx)(n.code,{children:"DBOSClient"})," instance."]}),"\n",(0,o.jsx)(n.h3,{id:"workflow-interaction",children:"Workflow Interaction"}),"\n",(0,o.jsx)(n.h4,{id:"enqueue",children:(0,o.jsx)(n.code,{children:"enqueue"})}),"\n",(0,o.jsxs)(n.p,{children:["Enqueues a workflow, similar to passing a queue name to ",(0,o.jsx)(n.code,{children:"DBOS.startWorkflow"}),".\nLike ",(0,o.jsx)(n.code,{children:"startWorkflow"}),", the ",(0,o.jsx)(n.code,{children:"enqueue"})," method returns a ",(0,o.jsx)(n.code,{children:"WorkflowHandle"})," that you can use to retrieve the workflow results\nasynchronously from an external application."]}),"\n",(0,o.jsxs)(n.p,{children:["When enqueuing a workflow from within a DBOS application, the workflow and queue metadata can be retrieved automatically.\nHowever, since ",(0,o.jsx)(n.code,{children:"DBOSClient"})," runs outside the DBOS application, the metadata must be specified explicitly."]}),"\n",(0,o.jsx)(n.p,{children:"Required metadata includes:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"workflowName"}),": The name of the workflow method being enqueued."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"queueName"}),": The name of the queue to enqueue the workflow on."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Additional but optional metadata includes:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"workflowClassName"}),": The name of the class the workflow method is a member of, if any."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"workflowConfigName"}),": If the workflow is an instance method (of class ",(0,o.jsx)(n.code,{children:"workflowClassName"}),"), the name of the ",(0,o.jsx)(n.a,{href:"/typescript/reference/workflows-steps#instance-method-workflows",children:"instance"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"workflowID"}),": The unique ID for the enqueued workflow. If left undefined, DBOS Client will generate a ",(0,o.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Universally_unique_identifier",children:"UUID"}),". Please see ",(0,o.jsx)(n.a,{href:"../tutorials/workflow-tutorial#workflow-ids-and-idempotency",children:"Workflow IDs and Idempotency"})," for more information."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"appVersion"}),": The version of your application that should process this workflow. If left undefined, it will be updated to the current version when the workflow is first dequeued."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"workflowTimeoutMS"}),": The timeout of this workflow in milliseconds."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"deduplicationID"}),": Optionally specified when enqueueing a workflow. At any given time, only one workflow with a specific deduplication ID can be enqueued in the specified queue. If a workflow with a deduplication ID is currently enqueued or actively executing (status ",(0,o.jsx)(n.code,{children:"ENQUEUED"})," or ",(0,o.jsx)(n.code,{children:"PENDING"}),"), subsequent workflow enqueue attempt with the same deduplication ID in the same queue will raise a ",(0,o.jsx)(n.code,{children:"DBOSQueueDuplicatedError"})," exception."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"priority"}),": Optionally specified when enqueueing a workflow. The priority of the enqueued workflow in the specified queue. Workflows with the same priority are dequeued in ",(0,o.jsx)(n.strong,{children:"FIFO (first in, first out)"})," order. Priority values can range from ",(0,o.jsx)(n.code,{children:"1"})," to ",(0,o.jsx)(n.code,{children:"2,147,483,647"}),", where ",(0,o.jsx)(n.strong,{children:"a low number indicates a higher priority"}),". Workflows without assigned priorities have the highest priority and are dequeued before workflows with assigned priorities."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"queuePartitionKey"}),": The queue partition in which to enqueue this workflow. Use if and only if the queue is partitioned. In partitioned queues, all flow control (including concurrency and rate limits) is applied to individual partitions instead of the queue as a whole."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["In addition to the ",(0,o.jsx)(n.code,{children:"EnqueueOptions"})," described above, you must also provide the workflow arguments to ",(0,o.jsx)(n.code,{children:"enqueue"}),".\nThese are passed to ",(0,o.jsx)(n.code,{children:"enqueue"})," after the initial ",(0,o.jsx)(n.code,{children:"EnqueueOptions"})," parameter."]}),"\n",(0,o.jsxs)(n.p,{children:["Since DBOS Client works independently of your DBOS application code, ",(0,o.jsx)(n.code,{children:"enqueue"})," accepts whatever arguments you provide it without verifying if they match the workflow's expected argument types.\nHowever, you can get type safety by providing a function declaration type parameter to ",(0,o.jsx)(n.code,{children:"enqueue"}),".\nThis enables TypeScript to verify that the provided arguments match the provided declaration and to infer the returned ",(0,o.jsx)(n.code,{children:"WorkflowHandle"})," result type."]}),"\n",(0,o.jsx)(n.p,{children:"Untyped Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// Because we did not provide a function type declaration to enqueue,\n// there is no way to verify the workflow arguments are of the correct type. \nconst handle = await client.enqueue(\n    {\n        workflowName: 'indexDocument',\n        workflowClassName: 'DocumentDetective',\n        queueName: 'indexingQueue',\n    }, \n    \"https://arxiv.org/pdf/2208.13068\");\n\n// Explicitly specify the result type since we did not provide a \n// function type declaration to enqueue.\nconst result: number = await handle.getResult();\n"})}),"\n",(0,o.jsx)(n.p,{children:"Typed Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// TypeScript type declaration for our sample app workflow\ndeclare class DocumentDetective {\n    static indexDocument(url: string): Promise<number>\n}\n\n// Because we provided the function type declaration to enqueue, TypeScript\n// can validate the workflow parameters and infer the workflow return type.\nconst handle = await client.enqueue<typeof DocumentDetective.indexDocument>(\n    {\n        workflowName: 'indexDocument',\n        workflowClassName: 'DocumentDetective',\n        queueName: 'indexingQueue',\n    }, \n    \"https://arxiv.org/pdf/2208.13068\");\n\n// TypeScript can also infer the result type because \n// we provided the function type declaration to enqueue\nconst result = await handle.getResult();\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["TypeScript automatically generates type declarations during compilation of your DBOS application.\nYou can copy or import the function type declaration from your application's\n",(0,o.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html",children:"generated declaration file (aka.d.ts file)"}),"."]})}),"\n",(0,o.jsx)(n.h4,{id:"send",children:(0,o.jsx)(n.code,{children:"send"})}),"\n",(0,o.jsxs)(n.p,{children:["Sends a message to a specified workflow. Identical to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbossend",children:(0,o.jsx)(n.code,{children:"DBOS.send"})}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["Since DBOS Client is running outside of a DBOS application,\nit is highly recommended that you use the ",(0,o.jsx)(n.code,{children:"idempotencyKey"})," parameter in order to get exactly-once behavior."]})}),"\n",(0,o.jsx)(n.h4,{id:"getevent",children:(0,o.jsx)(n.code,{children:"getEvent"})}),"\n",(0,o.jsxs)(n.p,{children:["Retrieves an event published by workflowID for a given key.\nIdentical to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosgetevent",children:"DBOS.getEvent"})]}),"\n",(0,o.jsx)(n.h4,{id:"retrieveworkflow",children:(0,o.jsx)(n.code,{children:"retrieveWorkflow"})}),"\n",(0,o.jsxs)(n.p,{children:["Retrieves a workflow by ID, similar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosretrieveworkflow",children:(0,o.jsx)(n.code,{children:"DBOS.retrieveWorkflow"})}),".\nReturns a ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#workflow-handles",children:"WorkflowHandle"})," that can be used to retrieve information about the workflow,\nincluding its current state and its eventual result."]}),"\n",(0,o.jsxs)(n.p,{children:["Similar to enqueue, ",(0,o.jsx)(n.code,{children:"retrieveWorkflow"})," can be made type safe by use of a class declaration\nand the ",(0,o.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/handbook/utility-types.html#returntypetype",children:"ReturnType Utility Class"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const handle = client.retrieveWorkflow<ReturnType<IndexDocument>>(documentWFID);\nconst pageCount = await handle.getResult();\n"})}),"\n",(0,o.jsx)(n.h4,{id:"readstream",children:(0,o.jsx)(n.code,{children:"readStream"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"readStream<T>(workflowID: string, key: string): AsyncGenerator<T, void, unknown>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Read values from a stream as an async generator from outside the DBOS application.\nThis function reads values from a stream identified by the workflowID and key,\nyielding each value in order until the stream is closed or the workflow terminates.\nSimilar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosreadstream",children:(0,o.jsx)(n.code,{children:"DBOS.readStream"})}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"workflowID"}),": The workflow instance ID that owns the stream."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"key"}),": The stream key/name within the workflow."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"An async generator that yields each value in the stream until the stream is closed."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'for await (const value of client.readStream(workflowID, "example_key")) {\n  console.log(`Received: ${JSON.stringify(value)}`);\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"workflow-inspection",children:"Workflow Inspection"}),"\n",(0,o.jsx)(n.h4,{id:"getworkflow",children:(0,o.jsx)(n.code,{children:"getWorkflow"})}),"\n",(0,o.jsxs)(n.p,{children:["Retrieves the status of a single workflow, given its workflow ID.\nIf the specified workflow ID does not exist, getWorkflow returns undefined.\nPlease see ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosgetworkflowstatus",children:(0,o.jsx)(n.code,{children:"DBOS.getWorkflowStatus"})})," for more information."]}),"\n",(0,o.jsx)(n.h4,{id:"listworkflows",children:(0,o.jsx)(n.code,{children:"listWorkflows"})}),"\n",(0,o.jsxs)(n.p,{children:["Retrieves information about workflow execution history.\nPlease see ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dboslistworkflows",children:(0,o.jsx)(n.code,{children:"DBOS.listWorkflows"})})," for more for more information."]}),"\n",(0,o.jsx)(n.h4,{id:"listqueuedworkflows",children:(0,o.jsx)(n.code,{children:"listQueuedWorkflows"})}),"\n",(0,o.jsxs)(n.p,{children:["Retrieves information about workflow execution history for a given workflow queue.\nPlease see ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dboslistqueuedworkflows",children:(0,o.jsx)(n.code,{children:"DBOS.listQueuedWorkflows"})})," for more for more information."]}),"\n",(0,o.jsx)(n.h4,{id:"listworkflowsteps",children:(0,o.jsx)(n.code,{children:"listWorkflowSteps"})}),"\n",(0,o.jsxs)(n.p,{children:["Retrieves information about the steps executed in a specified workflow.\nIf the specified workflow is not found, ",(0,o.jsx)(n.code,{children:"listWorkflowSteps"})," returns undefined\nPlease see ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dboslistworkflowsteps",children:(0,o.jsx)(n.code,{children:"DBOS.listWorkflowSteps"})})," for more for more information."]}),"\n",(0,o.jsx)(n.h3,{id:"workflow-management",children:"Workflow Management"}),"\n",(0,o.jsx)(n.h4,{id:"cancelworkflow",children:(0,o.jsx)(n.code,{children:"cancelWorkflow"})}),"\n",(0,o.jsxs)(n.p,{children:["Cancels a workflow. If the workflow is currently running, ",(0,o.jsx)(n.code,{children:"DBOSWorkflowCancelledError"})," will be thrown from its next DBOS call.\nPlease see ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dboscancelworkflow",children:(0,o.jsx)(n.code,{children:"DBOS.cancelWorkflow"})})," for more for more information."]}),"\n",(0,o.jsx)(n.h4,{id:"resumeworkflow",children:(0,o.jsx)(n.code,{children:"resumeWorkflow"})}),"\n",(0,o.jsxs)(n.p,{children:["Resumes a workflow that had stopped during execution (due to cancellation or error).\nPlease see ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosresumeworkflow",children:(0,o.jsx)(n.code,{children:"DBOS.resumeWorkflow"})})," for more for more information."]}),"\n",(0,o.jsx)(n.h4,{id:"forkworkflow",children:(0,o.jsx)(n.code,{children:"forkWorkflow"})}),"\n",(0,o.jsxs)(n.p,{children:["Start a new execution of a workflow from a specific step.\nPlease see ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosforkworkflow",children:(0,o.jsx)(n.code,{children:"DBOS.forkWorkflow"})})," for more for more information."]}),"\n",(0,o.jsx)(n.h2,{id:"workflow-schedules",children:"Workflow Schedules"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"DBOSClient"})," provides methods to manage ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#workflow-schedules",children:"workflow schedules"})," from outside a DBOS application.\nUnlike the ",(0,o.jsx)(n.code,{children:"DBOS"})," class methods which accept workflow functions directly, client schedule methods accept workflow names as strings."]}),"\n",(0,o.jsx)(n.h4,{id:"createschedule",children:(0,o.jsx)(n.code,{children:"createSchedule"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"client.createSchedule(options: {\n  scheduleName: string;\n  workflowName: string;\n  workflowClassName?: string;\n  schedule: string;\n  context?: unknown;\n}): Promise<void>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Create a cron schedule that periodically invokes a workflow.\nSimilar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dboscreateschedule",children:(0,o.jsx)(n.code,{children:"DBOS.createSchedule"})}),", but takes a ",(0,o.jsx)(n.code,{children:"workflowName"})," string instead of a workflow function."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"scheduleName"}),": Unique name identifying this schedule."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"workflowName"}),": Fully-qualified name of the workflow function to invoke."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"workflowClassName"}),": The class name if the workflow is a static method on a class."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"schedule"}),": A cron expression. Supports seconds as the first field with 6-field format."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"context"}),": An optional context object passed to the workflow function on each invocation. Must be serializable."]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"listschedules",children:(0,o.jsx)(n.code,{children:"listSchedules"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"client.listSchedules(filters?: {\n  status?: string | string[];\n  workflowName?: string | string[];\n  scheduleNamePrefix?: string | string[];\n}): Promise<WorkflowSchedule[]>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Return all registered workflow schedules, optionally filtered. Returns a list of ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#workflowschedule",children:(0,o.jsx)(n.code,{children:"WorkflowSchedule"})}),".\nSimilar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dboslistschedules",children:(0,o.jsx)(n.code,{children:"DBOS.listSchedules"})}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"status"}),": Filter by status (e.g. ",(0,o.jsx)(n.code,{children:'"ACTIVE"'}),") or a list of statuses."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"workflowName"}),": Filter by workflow name or a list of names."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"scheduleNamePrefix"}),": Filter by schedule name prefix or a list of prefixes."]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"getschedule",children:(0,o.jsx)(n.code,{children:"getSchedule"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"client.getSchedule(name: string): Promise<WorkflowSchedule | null>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Return the ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#workflowschedule",children:(0,o.jsx)(n.code,{children:"WorkflowSchedule"})})," with the given name, or ",(0,o.jsx)(n.code,{children:"null"})," if it does not exist.\nSimilar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosgetschedule",children:(0,o.jsx)(n.code,{children:"DBOS.getSchedule"})}),"."]}),"\n",(0,o.jsx)(n.h4,{id:"deleteschedule",children:(0,o.jsx)(n.code,{children:"deleteSchedule"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"client.deleteSchedule(name: string): Promise<void>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Delete the schedule with the given name. No-op if it does not exist.\nSimilar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosdeleteschedule",children:(0,o.jsx)(n.code,{children:"DBOS.deleteSchedule"})}),"."]}),"\n",(0,o.jsx)(n.h4,{id:"pauseschedule",children:(0,o.jsx)(n.code,{children:"pauseSchedule"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"client.pauseSchedule(name: string): Promise<void>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Pause the schedule with the given name. A paused schedule does not fire.\nSimilar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbospauseschedule",children:(0,o.jsx)(n.code,{children:"DBOS.pauseSchedule"})}),"."]}),"\n",(0,o.jsx)(n.h4,{id:"resumeschedule",children:(0,o.jsx)(n.code,{children:"resumeSchedule"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"client.resumeSchedule(name: string): Promise<void>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Resume a paused schedule so it begins firing again.\nSimilar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosresumeschedule",children:(0,o.jsx)(n.code,{children:"DBOS.resumeSchedule"})}),"."]}),"\n",(0,o.jsx)(n.h4,{id:"applyschedules",children:(0,o.jsx)(n.code,{children:"applySchedules"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"client.applySchedules(\n  schedules: Array<{\n    scheduleName: string;\n    workflowName: string;\n    workflowClassName?: string;\n    schedule: string;\n    context?: unknown;\n  }>,\n): Promise<void>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Atomically apply a set of schedules.\nCreates or updates each schedule in the list, and deletes any existing schedules not included in the list.\nSimilar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosapplyschedules",children:(0,o.jsx)(n.code,{children:"DBOS.applySchedules"})}),", but takes workflow name strings instead of workflow functions."]}),"\n",(0,o.jsx)(n.h4,{id:"backfillschedule",children:(0,o.jsx)(n.code,{children:"backfillSchedule"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"client.backfillSchedule(\n  name: string,\n  start: Date,\n  end: Date,\n): Promise<WorkflowHandle<unknown>[]>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Enqueue all executions of a schedule that would have run between ",(0,o.jsx)(n.code,{children:"start"})," and ",(0,o.jsx)(n.code,{children:"end"}),".\nEach execution uses the same deterministic workflow ID as the live scheduler, so already-executed times are skipped.\nSimilar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosbackfillschedule",children:(0,o.jsx)(n.code,{children:"DBOS.backfillSchedule"})}),"."]}),"\n",(0,o.jsx)(n.h4,{id:"triggerschedule",children:(0,o.jsx)(n.code,{children:"triggerSchedule"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"client.triggerSchedule(name: string): Promise<WorkflowHandle<unknown>>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Immediately enqueue the scheduled workflow at the current time.\nSimilar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbostriggerschedule",children:(0,o.jsx)(n.code,{children:"DBOS.triggerSchedule"})}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"debouncing",children:"Debouncing"}),"\n",(0,o.jsx)(n.p,{children:"Workflows can be debounced with the DBOSClient."}),"\n",(0,o.jsx)(n.h3,{id:"debouncerclient",children:"DebouncerClient"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"new DebouncerClient(\n  client: DBOSClient,\n  params: DebouncerClientConfig\n)\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"interface DebouncerClientConfig {\n  workflowName: string;\n  workflowClassName?: string;\n  startWorkflowParams?: StartWorkflowParams;\n  debounceTimeoutMs?: number;\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Similar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#debouncer",children:(0,o.jsx)(n.code,{children:"Debouncer"})})," but takes in a DBOSClient and workflow metadata instead of a workflow function."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"client"}),": The DBOSClient instance to use."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"params"}),":","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"workflowName"}),": The name of the workflow method to debounce."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"workflowClassName"}),": The name of the class the workflow method is a member of, if any."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"startWorkflowParams"}),": Optional workflow parameters, as in ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#dbosstartworkflow",children:(0,o.jsx)(n.code,{children:"startWorkflow"})}),". Applied to all workflows started from this debouncer."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"debounceTimeoutMs"}),": After this time elapses since the first time a workflow is submitted from this debouncer, the workflow is started regardless of the debounce period."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"debouncerclientdebounce",children:"debouncerClient.debounce"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"debouncerClient.debounce(\n  debounceKey: string,\n  debouncePeriodMs: number,\n  ...args: unknown[]\n): Promise<WorkflowHandle<unknown>>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Similar to ",(0,o.jsx)(n.a,{href:"/typescript/reference/methods#debouncerdebounce",children:(0,o.jsx)(n.code,{children:"Debouncer.debounce"})}),"."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Example Syntax"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:'import { DBOSClient, DebouncerClient } from "@dbos-inc/dbos-sdk";\n\nconst client = await DBOSClient.create({\n  systemDatabaseUrl: process.env.DBOS_SYSTEM_DATABASE_URL\n});\n\nconst debouncer = new DebouncerClient(client, {\n  workflowName: "processInput",\n  debounceTimeoutMs: 120000, // 2 minutes\n});\n\n// Each time a user submits a new input, debounce the processInput workflow.\n// The workflow will wait until 60 seconds after the user stops submitting new inputs,\n// then process the last input submitted.\nasync function onUserInputSubmit(userId: string, userInput: string) {\n  const debounceKey = userId;\n  const debouncePeriodMs = 60000; // 60 seconds\n  await debouncer.debounce(debounceKey, debouncePeriodMs, userInput);\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var s=r(6540);const o={},i=s.createContext(o);function t(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);