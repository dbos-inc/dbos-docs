"use strict";(self.webpackChunkdbos_docs=self.webpackChunkdbos_docs||[]).push([[9547],{5327:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"python/reference/cli","title":"DBOS CLI","description":"Workflow Management Commands","source":"@site/docs/python/reference/cli.md","sourceDirName":"python/reference","slug":"/python/reference/cli","permalink":"/python/reference/cli","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15,"title":"DBOS CLI"},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/python/reference/configuration"},"next":{"title":"Hacker News Research Agent","permalink":"/python/examples/hacker-news-agent"}}');var t=n(4848),o=n(8453);const i={sidebar_position:15,title:"DBOS CLI"},l=void 0,d={},a=[{value:"Workflow Management Commands",id:"workflow-management-commands",level:2},{value:"dbos workflow list",id:"dbos-workflow-list",level:3},{value:"dbos workflow get",id:"dbos-workflow-get",level:3},{value:"dbos workflow steps",id:"dbos-workflow-steps",level:3},{value:"dbos workflow cancel",id:"dbos-workflow-cancel",level:3},{value:"dbos workflow resume",id:"dbos-workflow-resume",level:3},{value:"dbos workflow fork",id:"dbos-workflow-fork",level:3},{value:"dbos workflow queue list",id:"dbos-workflow-queue-list",level:3},{value:"Application Management Commands",id:"application-management-commands",level:2},{value:"dbos migrate",id:"dbos-migrate",level:3},{value:"dbos start",id:"dbos-start",level:3},{value:"dbos init",id:"dbos-init",level:3},{value:"dbos reset",id:"dbos-reset",level:3}];function c(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"workflow-management-commands",children:"Workflow Management Commands"}),"\n",(0,t.jsxs)(s.p,{children:["These commands all require the URL of your DBOS system database (and optionally your application database, if you use DBOS ",(0,t.jsx)(s.a,{href:"/python/tutorials/step-tutorial#transactions",children:"transactions"}),").\nYou can supply this URL through the ",(0,t.jsx)(s.code,{children:"--sys-db-url"})," argument or through a ",(0,t.jsxs)(s.a,{href:"/python/reference/configuration#dbos-configuration-file",children:[(0,t.jsx)(s.code,{children:"dbos-config.yaml"})," configuration file"]}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"dbos-workflow-list",children:"dbos workflow list"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nList workflows run by your application in JSON format ordered by recency (most recently started workflows last)."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-s, --sys-db-url URL"}),": Your DBOS system database URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-D, --db-url URL"}),": Your DBOS application database URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-l, --limit INTEGER"}),": Limit the results returned  [default: 10]"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-u, --user TEXT"}),": Retrieve workflows run by this user"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-t, --start-time TEXT"}),": Retrieve workflows starting after this timestamp (ISO 8601 format)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-e, --end-time TEXT"}),": Retrieve workflows starting before this timestamp (ISO 8601 format)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-S, --status TEXT"}),": Retrieve workflows with this status (PENDING, SUCCESS, ERROR, MAX_RECOVERY_ATTEMPTS_EXCEEDED, ENQUEUED, or CANCELLED)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-v, --application-version TEXT"}),": Retrieve workflows with this application version"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-n, --name TEXT"}),": Retrieve workflows with this name"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-d, --sort-desc"}),": Sort the results in descending order (older first)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-o, --offset INTEGER"}),": Offset for pagination"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Output:"}),"\nA JSON-formatted list of ",(0,t.jsx)(s.a,{href:"./contexts#workflow-status",children:"workflow statuses"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"dbos-workflow-get",children:"dbos workflow get"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nRetrieve information on a workflow run by your application."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"<workflow-id>"}),": The ID of the workflow to retrieve"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-s, --sys-db-url URL"}),": Your DBOS system database URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-D, --db-url URL"}),": Your DBOS application database URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Output:"}),"\nA JSON-formatted ",(0,t.jsx)(s.a,{href:"./contexts#workflow-status",children:"workflow status"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"dbos-workflow-steps",children:"dbos workflow steps"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"<workflow-id>"}),": The ID of the workflow to retrieve"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-s, --sys-db-url URL"}),": Your DBOS system database URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-D, --db-url URL"}),": Your DBOS application database URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Output:"}),"\nA JSON-formatted list of ",(0,t.jsx)(s.a,{href:"./contexts#list_workflow_steps",children:"workflow steps"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"dbos-workflow-cancel",children:"dbos workflow cancel"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nCancel a workflow so it is no longer automatically retried or restarted. Active executions are not halted."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"<workflow-id>"}),": The ID of the workflow to cancel"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-s, --sys-db-url URL"}),": Your DBOS system database URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-D, --db-url URL"}),": Your DBOS application database URL."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"dbos-workflow-resume",children:"dbos workflow resume"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nResume a workflow from its last completed step.\nYou can use this to resume workflows that are cancelled or that have exceeded their maximum recovery attempts.\nYou can also use this to start an ",(0,t.jsx)(s.code,{children:"ENQUEUED"})," workflow, bypassing its queue."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"<workflow-id>"}),": The ID of the workflow to resume."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-s, --sys-db-url URL"}),": Your DBOS system database URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-D, --db-url URL"}),": Your DBOS application database URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Output:"}),"\nA JSON-formatted ",(0,t.jsx)(s.a,{href:"./contexts#workflow-status",children:"workflow status"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"dbos-workflow-fork",children:"dbos workflow fork"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nFork a new execution of a workflow, starting at a given step.\nThis new workflow has a new workflow ID but the same code version (you can fork to a different code version ",(0,t.jsx)(s.a,{href:"/python/reference/client#fork_workflow",children:"programmatically"}),").\nForking from step N copies the results of all previous steps to the new workflow, which then starts running from step N."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"<workflow-id>"}),": The ID of the workflow to restart."]}),"\n"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-s, --sys-db-url URL"}),": Your DBOS system database URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-D, --db-url URL"}),": Your DBOS application database URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-f, --forked-workflow-id"}),": Custom ID for the forked workflow"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-v, --application-version"}),": Custom application version for the forked workflow"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-S, --step INTEGER"}),": Restart from this step [default: 1]"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Output:"}),"\nA JSON-formatted ",(0,t.jsx)(s.a,{href:"./contexts#workflow-status",children:"workflow status"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"dbos-workflow-queue-list",children:"dbos workflow queue list"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description:"}),"\nLists all currently enqueued tasks in JSON format ordered by recency (most recently enqueued functions last)."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-s, --sys-db-url URL"}),": Your DBOS system database URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-D, --db-url URL"}),": Your DBOS application database URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-l, --limit INTEGER"}),": Limit the results returned"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-t, --start-time TEXT"}),": Retrieve functions starting after this timestamp (ISO 8601 format)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-e, --end-time TEXT"}),": Retrieve functions starting before this timestamp (ISO 8601 format)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-S, --status TEXT"}),": Retrieve functions with this status (PENDING, SUCCESS, ERROR, MAX_RECOVERY_ATTEMPTS_EXCEEDED, ENQUEUED, or CANCELLED)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-q, --queue-name TEXT"}),": Retrieve functions on this queue"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-n, --name TEXT"}),": Retrieve functions on this queue"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-d, --sort-desc"}),": Sort the results in descending order (older first)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-o, --offset INTEGER"}),": Offset for pagination"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Output:"}),"\nA JSON-formatted list of ",(0,t.jsx)(s.a,{href:"./contexts#workflow-status",children:"workflow statuses"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"application-management-commands",children:"Application Management Commands"}),"\n",(0,t.jsx)(s.h3,{id:"dbos-migrate",children:"dbos migrate"}),"\n",(0,t.jsx)(s.p,{children:"Create the DBOS system database and internal tables.\nBy default, a DBOS application automatically creates these on startup.\nHowever, in production environments, a DBOS application may not run with sufficient privilege to create databases or tables.\nIn that case, this command can be run with a privileged user to create all DBOS database tables."}),"\n",(0,t.jsxs)(s.p,{children:["After creating the DBOS database tables with this command, a DBOS application can run with minimum permissions, requiring only access to the DBOS schema in the application and system databases.\nUse the ",(0,t.jsx)(s.code,{children:"-r"})," flag to grant a role access to that schema."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-s, --sys-db-url URL"}),": A connection string for your DBOS ",(0,t.jsx)(s.a,{href:"/explanations/system-tables",children:"system database"}),", in which DBOS stores its internal state. This command will create that database if it does not exist and create or update the DBOS system tables within it."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-D, --db-url URL"}),": A connection string for your DBOS application database, in which DBOS ",(0,t.jsx)(s.a,{href:"/python/tutorials/step-tutorial#transactions",children:"transactions"})," run. Optional if you are not using transactions."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-r, --app-role"}),": The role with which you will run your DBOS app. This role is granted the minimum permissions needed to access the DBOS schema in your application and system databases."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"dbos-start",children:"dbos start"}),"\n",(0,t.jsxs)(s.p,{children:["Start your DBOS application by executing the ",(0,t.jsx)(s.code,{children:"start"})," command defined in ",(0,t.jsx)(s.a,{href:"/python/reference/configuration#dbos-configuration-file",children:(0,t.jsx)(s.code,{children:"dbos-config.yaml"})}),".\nFor example:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",children:'runtimeConfig:\n  start:\n    - "fastapi run"\n'})}),"\n",(0,t.jsx)(s.p,{children:"DBOS Cloud executes this command to start your app."}),"\n",(0,t.jsx)(s.h3,{id:"dbos-init",children:"dbos init"}),"\n",(0,t.jsx)(s.p,{children:"Initialize the local directory with a DBOS template application."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"<application-name>"}),": The name of your application. If not specified, will be prompted for."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-t, --template TEXT"}),': Specify a template to use. ("dbos-toolbox", "dbos-app-starter", "dbos-cron-starter", "dbos-db-starter")']}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"--config, -c"}),": If this flag is set, only the ",(0,t.jsx)(s.code,{children:"dbos-config.yaml"})," file is added from the template. Useful to add DBOS to an existing project."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"dbos-reset",children:"dbos reset"}),"\n",(0,t.jsxs)(s.p,{children:["Reset your DBOS ",(0,t.jsx)(s.a,{href:"/explanations/system-tables",children:"system database"}),", deleting metadata about past workflows and steps.\nNo application data is affected by this."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"--yes, -y"}),": Skip confirmation prompt."]}),"\n"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"-s, --sys-db-url URL"}),": Your DBOS system database URL."]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>l});var r=n(6540);const t={},o=r.createContext(t);function i(e){const s=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);