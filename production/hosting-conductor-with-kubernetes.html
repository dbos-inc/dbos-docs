<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-production/hosting-conductor-with-kubernetes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Self-Hosting Conductor With Kubernetes | DBOS Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.dbos.dev/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.dbos.dev/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.dbos.dev/production/hosting-conductor-with-kubernetes"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Self-Hosting Conductor With Kubernetes | DBOS Docs"><meta data-rh="true" name="description" content="Self-hosted Conductor is released under a proprietary license."><meta data-rh="true" property="og:description" content="Self-hosted Conductor is released under a proprietary license."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.dbos.dev/production/hosting-conductor-with-kubernetes"><link data-rh="true" rel="alternate" href="https://docs.dbos.dev/production/hosting-conductor-with-kubernetes" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.dbos.dev/production/hosting-conductor-with-kubernetes" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UY2VKOMIL2-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Self-Hosting Conductor With Kubernetes","item":"https://docs.dbos.dev/production/hosting-conductor-with-kubernetes"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="DBOS Docs" href="/opensearch.xml">


<link rel="preconnect" href="https://dbosdev.matomo.cloud/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://dbosdev.matomo.cloud/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script>

<link rel="preconnect" href="https://d2j9bas80r5yfz.cloudfront.net">
<script>!function(t,e){var o,r,s,a;e.__SV||(window.posthog=e,e._i=[],e.init=function(n,i,p){function c(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(s=t.createElement("script")).type="text/javascript",s.async=!0,s.src=i.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(a=t.getElementsByTagName("script")[0]).parentNode.insertBefore(s,a);var g=e;for(void 0!==p?g=e[p]=[]:p="posthog",g.people=g.people||[],g.toString=function(t){var e="posthog";return"posthog"!==p&&(e+="."+p),t||(e+=" (stub)"),e},g.people.toString=function(){return g.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys onSessionId".split(" "),r=0;r<o.length;r++)c(g,o[r]);e._i.push([n,i,p])},e.__SV=1)}(document,window.posthog||[]),posthog.init("phc_vKGgPmFevFB3QVyqZdIZeNqcWAPqk3i3mDhwGqwk6nP",{api_host:"https://d2j9bas80r5yfz.cloudfront.net",id:"default"})</script>
<script async defer="defer" id="hs-script-loader" src="//js.hs-scripts.com/45237820.js"></script>
<script src="/scripts/reo.js"></script><link rel="stylesheet" href="/assets/css/styles.292b392a.css">
<script src="/assets/js/runtime~main.b01611fc.js" defer="defer"></script>
<script src="/assets/js/main.db590a4a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://dbos.dev" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/dbos-logo.png" alt="DBOS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/dbos-logo-dark.png" alt="DBOS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a class="navbar__item navbar__link" href="/quickstart">Quickstart</a><a class="navbar__item navbar__link" href="/examples">Examples</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://console.dbos.dev/login-redirect" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link dbos-button-blue">DBOS Console</a><a href="https://github.com/dbos-inc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/"><span title="Home" class="linkLabel_WmDU">Home</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quickstart"><span title="Get Started" class="linkLabel_WmDU">Get Started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/why-dbos"><span title="Why DBOS?" class="linkLabel_WmDU">Why DBOS?</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/architecture"><span title="DBOS Architecture" class="linkLabel_WmDU">DBOS Architecture</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/python/programming-guide"><span title="Develop with Python" class="categoryLinkLabel_W154">Develop with Python</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/typescript/programming-guide"><span title="Develop with TypeScript" class="categoryLinkLabel_W154">Develop with TypeScript</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/golang/programming-guide"><span title="Develop with Go" class="categoryLinkLabel_W154">Develop with Go</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/java/programming-guide"><span title="Develop with Java" class="categoryLinkLabel_W154">Develop with Java</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/production/checklist"><span title="Deploy To Production" class="categoryLinkLabel_W154">Deploy To Production</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/production/checklist"><span title="Production Checklist" class="linkLabel_WmDU">Production Checklist</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/production/conductor"><span title="DBOS Conductor" class="linkLabel_WmDU">DBOS Conductor</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/production/hosting-conductor"><span title="Self-Hosting Conductor" class="linkLabel_WmDU">Self-Hosting Conductor</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/production/workflow-management"><span title="Workflow Management" class="linkLabel_WmDU">Workflow Management</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/production/alerting"><span title="Alerting" class="linkLabel_WmDU">Alerting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/production/retention"><span title="Workflow Retention Policies" class="linkLabel_WmDU">Workflow Retention Policies</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/production/workflow-recovery"><span title="Workflow Recovery" class="linkLabel_WmDU">Workflow Recovery</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/production/hosting-conductor-with-kubernetes"><span title="Self-Hosting Conductor With Kubernetes" class="linkLabel_WmDU">Self-Hosting Conductor With Kubernetes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/production/hosting-with-kubernetes"><span title="Deploying With Kubernetes" class="linkLabel_WmDU">Deploying With Kubernetes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/production/hosting-with-cloud-run"><span title="Deploying With Google Cloud Run" class="linkLabel_WmDU">Deploying With Google Cloud Run</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/production/dbos-cloud/deploying-to-cloud"><span title="DBOS Cloud" class="categoryLinkLabel_W154">DBOS Cloud</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/integrations/supabase"><span title="Integrations" class="categoryLinkLabel_W154">Integrations</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/explanations/system-tables"><span title="Concepts and Explanations" class="categoryLinkLabel_W154">Concepts and Explanations</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/faq"><span title="Troubleshooting &amp; FAQ" class="linkLabel_WmDU">Troubleshooting &amp; FAQ</span></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Deploy To Production</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Self-Hosting Conductor With Kubernetes</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Self-Hosting Conductor With Kubernetes</h1></header><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Self-hosted Conductor is released under a <a href="https://www.dbos.dev/conductor-license" target="_blank" rel="noopener noreferrer" class="">proprietary license</a>.
Self-hosting Conductor for commercial or production use requires a <a class="" href="/production/hosting-conductor#licensing">license key</a>.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">​</a></h2>
<p>This guide covers deploying DBOS Conductor on Kubernetes so your applications get durable workflow execution, automatic workflow recovery, workflow management and observability — all running on infrastructure you control.</p>
<p>The Kubernetes manifests are portable to any conformant cluster.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="deployments">Deployments<a href="#deployments" class="hash-link" aria-label="Direct link to Deployments" title="Direct link to Deployments" translate="no">​</a></h2>
<p><strong>Database</strong> — Conductor needs a PostgreSQL database, which we recommend configuring with a dedicated database role.</p>
<p><strong>Conductor</strong> — A stateless, single-container Deployment listening on port 8090.
All state lives in PostgreSQL: use a <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" target="_blank" rel="noopener noreferrer" class="">Deployment</a> and not a <a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/" target="_blank" rel="noopener noreferrer" class="">StatefulSet</a>.
Required environment variables:</p>
<ul>
<li class=""><code>DBOS__CONDUCTOR_DB_URL</code> (connection string to the <code>dbos_conductor</code> database)</li>
<li class=""><code>DBOS_CONDUCTOR_LICENSE_KEY</code> (<a class="" href="/production/hosting-conductor#licensing">obtain a license key</a>)</li>
</ul>
<p>Conductor is out of the critical path and a single Conductor instance can serve tens of thousands of application servers.</p>
<p><strong>Console</strong> — A stateless, single-container Deployment listening on port 80.
It connects to Conductor using the environment variable <code>DBOS_CONDUCTOR_URL</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Updating Conductor</div><div class="admonitionContent_BuS1"><p>Conductor is architecturally <strong>out-of-band</strong> — it is not on the critical path of your application.
To upgrade, update the container image tag in <code>conductor.yaml</code> and <code>console.yaml</code>, (<code>latest</code> by default) then <code>kubectl rollout restart</code>. Prefer updating both Conductor and the console together.
Applications seamlessly reconnect to the new Conductor version with no impact on their availability.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Register applications</div><div class="admonitionContent_BuS1"><p>After deploying Conductor and Console, <a class="" href="/production/conductor#connecting-to-conductor">register your application, and generate an API key</a>.
The application connects to Conductor via WebSocket using this API key and the Conductor URL.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="authentication">Authentication<a href="#authentication" class="hash-link" aria-label="Direct link to Authentication" title="Direct link to Authentication" translate="no">​</a></h2>
<p>Conductor supports OAuth 2.0 with any OIDC-compliant provider. See the <a class="" href="/production/hosting-conductor#security">authentication setup guide</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="ingress">Ingress<a href="#ingress" class="hash-link" aria-label="Direct link to Ingress" title="Direct link to Ingress" translate="no">​</a></h2>
<p>We recommend setting up a reverse proxy (e.g., <a href="https://nginx.org/" target="_blank" rel="noopener noreferrer" class="">Nginx</a>) in front of all services. The reverse proxy should perform <strong>TLS termination</strong> and support <strong>WebSockets</strong>. You must configure your DBOS applications to point at your load balancer or reverse proxy URL, which should redirect to Conductor.</p>
<p>The DBOS SDK maintains a long-lived WebSocket connection to Conductor, so both the reverse proxy and any cloud load balancer in front of it (e.g., AWS ELB) should have idle timeouts high enough (e.g., 300s) to tolerate network hiccups. The DBOS SDK sends periodic pings to keep the connection alive, but a network hiccup that delays pings past the timeout will cause a disconnect. In case of disconnection, the DBOS SDK will reconnect automatically.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="security-best-practices">Security Best Practices<a href="#security-best-practices" class="hash-link" aria-label="Direct link to Security Best Practices" title="Direct link to Security Best Practices" translate="no">​</a></h2>
<p><strong>Secret management</strong> — Conductor deployments need credentials for PostgreSQL, a license key, and an API key.
Store these as Kubernetes Secrets and inject them via <code>secretKeyRef</code>.
For Git-safe storage, encrypt with <a href="https://github.com/bitnami-labs/sealed-secrets" target="_blank" rel="noopener noreferrer" class="">Sealed Secrets</a>, <a href="https://github.com/getsops/sops" target="_blank" rel="noopener noreferrer" class="">SOPS</a>, or a cloud-native secrets manager (AWS Secrets Manager, <a href="https://developer.hashicorp.com/vault/docs/platform/k8s/vso" target="_blank" rel="noopener noreferrer" class="">Vault</a>, etc.).</p>
<p><strong>Network policies</strong> — Apply a default-deny ingress policy to the namespace, then add explicit allow rules for each pod. If Conductor and Console are co-located, allow HTTPS traffic from the Console to Conductor.</p>
<p><strong>RBAC</strong> — Restrict which ServiceAccounts can read Secrets in the namespace. Conductor credentials (database URLs, license key, API key) should only be accessible to the pods that need them.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="walkthrough-aws-eks">Walkthrough (AWS EKS)<a href="#walkthrough-aws-eks" class="hash-link" aria-label="Direct link to Walkthrough (AWS EKS)" title="Direct link to Walkthrough (AWS EKS)" translate="no">​</a></h2>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">EKS (AWS)</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>In addition to DBOS Conductor and the DBOS Console, the infrastructure includes the following components:</p><table><thead><tr><th>Component</th><th>Role</th></tr></thead><tbody><tr><td><strong>RDS</strong></td><td>Database for Conductor operating state</td></tr><tr><td><strong>Reverse Proxy (Nginx Ingress)</strong></td><td>TLS termination, path-based routing, WebSocket support</td></tr><tr><td><strong>Sealed Secrets</strong></td><td>Encrypts secrets at rest; decrypts them in-cluster</td></tr></tbody></table><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>Set environment variables</strong></summary><div><div class="collapsibleContent_i85q"><p>Set these variables before proceeding — replace the placeholder values with your own:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic"># Your AWS account ID (12-digit number)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token assign-left variable" style="color:#f8f8f2">AWS_ACCOUNT_ID</span><span class="token operator" style="color:#66d9ef">=</span><span class="token number" style="color:#ae81ff">123456789012</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># AWS region for all resources</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token assign-left variable" style="color:#f8f8f2">AWS_REGION</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">us-west-2</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># PostgreSQL admin password (used for the RDS master user)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token assign-left variable" style="color:#f8f8f2">POSTGRES_PASSWORD</span><span class="token operator" style="color:#66d9ef">=</span><span class="token string" style="color:#a6e22e">&#x27;choose-a-secure-password&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Password for the Conductor database role</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token assign-left variable" style="color:#f8f8f2">CONDUCTOR_ROLE_PASSWORD</span><span class="token operator" style="color:#66d9ef">=</span><span class="token string" style="color:#a6e22e">&#x27;choose-another-secure-password&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Conductor license key (from DBOS Console or sales)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token assign-left variable" style="color:#f8f8f2">CONDUCTOR_LICENSE_KEY</span><span class="token operator" style="color:#66d9ef">=</span><span class="token string" style="color:#a6e22e">&#x27;your-license-key&#x27;</span><br></span></code></pre></div></div></div></div></details><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="infrastructure">Infrastructure<a href="#infrastructure" class="hash-link" aria-label="Direct link to Infrastructure" title="Direct link to Infrastructure" translate="no">​</a></h3><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>CLI tools required on your workstation</strong></summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Tool</th><th>Purpose</th><th>Install</th></tr></thead><tbody><tr><td><strong>AWS CLI</strong></td><td>AWS account access</td><td><a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html" target="_blank" rel="noopener noreferrer" class="">Install guide</a></td></tr><tr><td><strong>eksctl</strong></td><td>Create and manage EKS clusters</td><td><a href="https://eksctl.io/installation/" target="_blank" rel="noopener noreferrer" class="">Install guide</a></td></tr><tr><td><strong>kubectl</strong></td><td>Interact with Kubernetes</td><td>Included with eksctl, or <a href="https://kubernetes.io/docs/tasks/tools/" target="_blank" rel="noopener noreferrer" class="">install separately</a></td></tr><tr><td><strong>Helm</strong></td><td>Install cluster add-ons (Ingress, Sealed Secrets)</td><td><code>brew install helm</code> or <a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer" class="">Install guide</a></td></tr><tr><td><strong>kubeseal</strong></td><td>Encrypt Kubernetes secrets</td><td><code>brew install kubeseal</code> or <a href="https://github.com/bitnami-labs/sealed-secrets#kubeseal" target="_blank" rel="noopener noreferrer" class="">Install guide</a></td></tr><tr><td><strong>openssl</strong></td><td>Generate self-signed TLS certificate</td><td>Pre-installed on macOS/Linux</td></tr></tbody></table><p>Verify your AWS credentials are configured:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">aws sts get-caller-identity</span><br></span></code></pre></div></div></div></div></details><p><strong>DBOS Conductor License Key</strong></p><p>Obtain a development license key from the <a href="https://console.dbos.dev/settings/license-key" target="_blank" rel="noopener noreferrer" class="">DBOS Console</a> or <a href="https://www.dbos.dev/contact" target="_blank" rel="noopener noreferrer" class="">contact DBOS sales</a> for a pro license key.
You can follow this guide with a development license key for evaluation, but you will be limited to one executor per application.</p><p><strong>Create an EKS Cluster</strong></p><p>Create a managed EKS cluster with two nodes. This takes approximately 15 minutes.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>Create EKS cluster</strong></summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">eksctl create cluster </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--name</span><span class="token plain"> dbos-conductor </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--region</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$AWS_REGION</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--version</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1.31</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --nodegroup-name default </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --node-type t3.medium </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--nodes</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--managed</span><br></span></code></pre></div></div><p><code>eksctl</code> automatically:</p><ul>
<li class="">Creates a VPC with public and private subnets</li>
<li class="">Configures the <a href="https://docs.aws.amazon.com/eks/latest/userguide/managing-vpc-cni.html" target="_blank" rel="noopener noreferrer" class="">Amazon VPC CNI</a>, which supports NetworkPolicy enforcement</li>
<li class="">Sets up your <code>~/.kube/config</code> to point at the new cluster</li>
</ul><p>Once complete, verify the cluster is ready:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl get nodes</span><br></span></code></pre></div></div><p>You should see two nodes in <code>Ready</code> status:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">NAME                                           STATUS   ROLES    AGE   VERSION</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ip-192-168-xx-xx.us-west-2.compute.internal    Ready    &lt;none&gt;   2m    v1.31.x</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ip-192-168-xx-xx.us-west-2.compute.internal    Ready    &lt;none&gt;   2m    v1.31.x</span><br></span></code></pre></div></div></div></div></details><p><strong>Create a Namespace</strong></p><p>All resources in this guide are deployed to a dedicated <code>dbos</code> namespace:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl create namespace dbos</span><br></span></code></pre></div></div><a id="provision-an-rds-postgresql-instance"></a><p><strong>Provision an RDS PostgreSQL Instance</strong></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>RDS provisioning commands</strong></summary><div><div class="collapsibleContent_i85q"><p>Find the VPC and private subnets that <code>eksctl</code> created:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic"># Get the VPC ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token assign-left variable" style="color:#f8f8f2">VPC_ID</span><span class="token operator" style="color:#66d9ef">=</span><span class="token variable" style="color:#f8f8f2">$(</span><span class="token variable" style="color:#f8f8f2">aws ec2 describe-vpcs </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--filters</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable string" style="color:#a6e22e">&quot;Name=tag:alpha.eksctl.io/cluster-name,Values=dbos-conductor&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--query</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable string" style="color:#a6e22e">&quot;Vpcs[0].VpcId&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable parameter variable" style="color:#f8f8f2">--output</span><span class="token variable" style="color:#f8f8f2"> text </span><span class="token variable parameter variable" style="color:#f8f8f2">--region</span><span class="token variable" style="color:#f8f8f2"> $AWS_REGION</span><span class="token variable" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token builtin class-name" style="color:#e6db74">echo</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;VPC: </span><span class="token string variable" style="color:#f8f8f2">$VPC_ID</span><span class="token string" style="color:#a6e22e">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Get the private subnets</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token assign-left variable" style="color:#f8f8f2">PRIVATE_SUBNETS</span><span class="token operator" style="color:#66d9ef">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token variable" style="color:#f8f8f2">$(</span><span class="token variable" style="color:#f8f8f2">aws ec2 describe-subnets </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--filters</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable string" style="color:#a6e22e">&quot;Name=vpc-id,Values=</span><span class="token variable string variable" style="color:#f8f8f2">$VPC_ID</span><span class="token variable string" style="color:#a6e22e">&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">             </span><span class="token variable string" style="color:#a6e22e">&quot;Name=tag:aws:cloudformation:logical-id,Values=SubnetPrivate*&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--query</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable string" style="color:#a6e22e">&quot;Subnets[*].SubnetId&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable parameter variable" style="color:#f8f8f2">--output</span><span class="token variable" style="color:#f8f8f2"> text </span><span class="token variable parameter variable" style="color:#f8f8f2">--region</span><span class="token variable" style="color:#f8f8f2"> $AWS_REGION</span><span class="token variable" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token builtin class-name" style="color:#e6db74">echo</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;Private subnets: </span><span class="token string variable" style="color:#f8f8f2">${PRIVATE_SUBNETS</span><span class="token string variable punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string variable" style="color:#f8f8f2">@</span><span class="token string variable punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token string variable" style="color:#f8f8f2">}</span><span class="token string" style="color:#a6e22e">&quot;</span><br></span></code></pre></div></div><p>Create a DB subnet group from the private subnets:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">aws rds create-db-subnet-group </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --db-subnet-group-name dbos-conductor-db </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --db-subnet-group-description </span><span class="token string" style="color:#a6e22e">&quot;DBOS Conductor RDS subnets&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --subnet-ids </span><span class="token string" style="color:#a6e22e">&quot;</span><span class="token string variable" style="color:#f8f8f2">${PRIVATE_SUBNETS</span><span class="token string variable punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string variable" style="color:#f8f8f2">@</span><span class="token string variable punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token string variable" style="color:#f8f8f2">}</span><span class="token string" style="color:#a6e22e">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--region</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$AWS_REGION</span><br></span></code></pre></div></div><p>Create a security group that allows PostgreSQL access from the EKS nodes:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic"># Get the EKS cluster security group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token assign-left variable" style="color:#f8f8f2">EKS_SG</span><span class="token operator" style="color:#66d9ef">=</span><span class="token variable" style="color:#f8f8f2">$(</span><span class="token variable" style="color:#f8f8f2">aws ec2 describe-security-groups </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--filters</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable string" style="color:#a6e22e">&quot;Name=vpc-id,Values=</span><span class="token variable string variable" style="color:#f8f8f2">$VPC_ID</span><span class="token variable string" style="color:#a6e22e">&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">            </span><span class="token variable string" style="color:#a6e22e">&quot;Name=tag:aws:eks:cluster-name,Values=dbos-conductor&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--query</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable string" style="color:#a6e22e">&quot;SecurityGroups[0].GroupId&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--output</span><span class="token variable" style="color:#f8f8f2"> text </span><span class="token variable parameter variable" style="color:#f8f8f2">--region</span><span class="token variable" style="color:#f8f8f2"> $AWS_REGION</span><span class="token variable" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token builtin class-name" style="color:#e6db74">echo</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;EKS SG: </span><span class="token string variable" style="color:#f8f8f2">$EKS_SG</span><span class="token string" style="color:#a6e22e">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Create a security group for RDS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token assign-left variable" style="color:#f8f8f2">RDS_SG</span><span class="token operator" style="color:#66d9ef">=</span><span class="token variable" style="color:#f8f8f2">$(</span><span class="token variable" style="color:#f8f8f2">aws ec2 create-security-group </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  --group-name dbos-conductor-rds </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--description</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable string" style="color:#a6e22e">&quot;Allow PostgreSQL from EKS nodes&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  --vpc-id $VPC_ID </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--query</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable string" style="color:#a6e22e">&quot;GroupId&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable parameter variable" style="color:#f8f8f2">--output</span><span class="token variable" style="color:#f8f8f2"> text </span><span class="token variable parameter variable" style="color:#f8f8f2">--region</span><span class="token variable" style="color:#f8f8f2"> $AWS_REGION</span><span class="token variable" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token builtin class-name" style="color:#e6db74">echo</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;RDS SG: </span><span class="token string variable" style="color:#f8f8f2">$RDS_SG</span><span class="token string" style="color:#a6e22e">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Allow inbound PostgreSQL from EKS nodes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">aws ec2 authorize-security-group-ingress </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --group-id </span><span class="token variable" style="color:#f8f8f2">$RDS_SG</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--protocol</span><span class="token plain"> tcp </span><span class="token parameter variable" style="color:#f8f8f2">--port</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5432</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --source-group </span><span class="token variable" style="color:#f8f8f2">$EKS_SG</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--region</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$AWS_REGION</span><br></span></code></pre></div></div><p>Create the RDS instance:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">aws rds create-db-instance </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --db-instance-identifier dbos-conductor-pg </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --db-instance-class db.t4g.micro </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--engine</span><span class="token plain"> postgres </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --engine-version </span><span class="token number" style="color:#ae81ff">16</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --master-username postgres </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --master-user-password </span><span class="token string" style="color:#a6e22e">&quot;</span><span class="token string variable" style="color:#f8f8f2">$POSTGRES_PASSWORD</span><span class="token string" style="color:#a6e22e">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --allocated-storage </span><span class="token number" style="color:#ae81ff">20</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --db-subnet-group-name dbos-conductor-db </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --vpc-security-group-ids </span><span class="token variable" style="color:#f8f8f2">$RDS_SG</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --no-publicly-accessible </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--region</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$AWS_REGION</span><br></span></code></pre></div></div><p>Wait for the instance to become available (this takes a few minutes):</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">aws rds </span><span class="token function" style="color:#e6db74">wait</span><span class="token plain"> db-instance-available </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --db-instance-identifier dbos-conductor-pg </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--region</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$AWS_REGION</span><br></span></code></pre></div></div><p>Get the RDS endpoint:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token assign-left variable" style="color:#f8f8f2">RDS_ENDPOINT</span><span class="token operator" style="color:#66d9ef">=</span><span class="token variable" style="color:#f8f8f2">$(</span><span class="token variable" style="color:#f8f8f2">aws rds describe-db-instances </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  --db-instance-identifier dbos-conductor-pg </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--query</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable string" style="color:#a6e22e">&quot;DBInstances[0].Endpoint.Address&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--output</span><span class="token variable" style="color:#f8f8f2"> text </span><span class="token variable parameter variable" style="color:#f8f8f2">--region</span><span class="token variable" style="color:#f8f8f2"> $AWS_REGION</span><span class="token variable" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token builtin class-name" style="color:#e6db74">echo</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;RDS endpoint: </span><span class="token string variable" style="color:#f8f8f2">$RDS_ENDPOINT</span><span class="token string" style="color:#a6e22e">&quot;</span><br></span></code></pre></div></div></div></div></details><p>Create the databases and roles from a pod inside the cluster (since the RDS instance is not publicly accessible):</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>Create databases and roles</strong></summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl run pg-setup </span><span class="token parameter variable" style="color:#f8f8f2">--restart</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">Never </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--namespace</span><span class="token plain"> dbos </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--image</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">postgres:16 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--env</span><span class="token operator" style="color:#66d9ef">=</span><span class="token string" style="color:#a6e22e">&quot;PGPASSWORD=</span><span class="token string variable" style="color:#f8f8f2">$POSTGRES_PASSWORD</span><span class="token string" style="color:#a6e22e">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--command</span><span class="token plain"> -- </span><span class="token function" style="color:#e6db74">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#f8f8f2">-c</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">    psql -h </span><span class="token string variable" style="color:#f8f8f2">$RDS_ENDPOINT</span><span class="token string" style="color:#a6e22e"> -U postgres -c &#x27;CREATE DATABASE dbos_conductor;&#x27;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">    psql -h </span><span class="token string variable" style="color:#f8f8f2">$RDS_ENDPOINT</span><span class="token string" style="color:#a6e22e"> -U postgres -c </span><span class="token string entity" style="color:#a6e22e">\&quot;</span><span class="token string" style="color:#a6e22e">CREATE ROLE dbos_conductor_role WITH LOGIN PASSWORD &#x27;</span><span class="token string variable" style="color:#f8f8f2">$CONDUCTOR_ROLE_PASSWORD</span><span class="token string" style="color:#a6e22e">&#x27;;</span><span class="token string entity" style="color:#a6e22e">\&quot;</span><span class="token string" style="color:#a6e22e"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">    psql -h </span><span class="token string variable" style="color:#f8f8f2">$RDS_ENDPOINT</span><span class="token string" style="color:#a6e22e"> -U postgres -c &#x27;GRANT ALL PRIVILEGES ON DATABASE dbos_conductor TO dbos_conductor_role;&#x27;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">    psql -h </span><span class="token string variable" style="color:#f8f8f2">$RDS_ENDPOINT</span><span class="token string" style="color:#a6e22e"> -U postgres -d dbos_conductor -c &#x27;GRANT ALL ON SCHEMA public TO dbos_conductor_role;&#x27;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">  &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Wait for the pod to finish, then clean up</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">sleep</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">15</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&amp;&amp;</span><span class="token plain"> kubectl logs pg-setup </span><span class="token parameter variable" style="color:#f8f8f2">-n</span><span class="token plain"> dbos </span><span class="token operator" style="color:#66d9ef">&amp;&amp;</span><span class="token plain"> kubectl delete pod pg-setup </span><span class="token parameter variable" style="color:#f8f8f2">-n</span><span class="token plain"> dbos</span><br></span></code></pre></div></div><p>This creates:</p><ul>
<li class=""><code>dbos_conductor</code> — Conductor&#x27;s internal database (application registry, metadata)</li>
<li class=""><code>dbos_conductor_role</code> — a dedicated role for Conductor&#x27;s database access</li>
</ul></div></div></details><a id="install-cluster-add-ons"></a><p><strong>Install Cluster Add-ons</strong></p><p>We install two Helm charts that the later sections depend on.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>Helm installs (Nginx Ingress, Sealed Secrets)</strong></summary><div><div class="collapsibleContent_i85q"><p><strong>Nginx Ingress Controller</strong> — reverse proxy and TLS termination:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">helm repo </span><span class="token function" style="color:#e6db74">add</span><span class="token plain"> ingress-nginx https://kubernetes.github.io/ingress-nginx</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">helm repo update</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">helm </span><span class="token function" style="color:#e6db74">install</span><span class="token plain"> ingress-nginx ingress-nginx/ingress-nginx </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--namespace</span><span class="token plain"> ingress-nginx --create-namespace </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#f8f8f2">controller.service.type</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">LoadBalancer</span><br></span></code></pre></div></div><p><strong>Sealed Secrets</strong> — encrypt secrets for safe Git storage:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">helm repo </span><span class="token function" style="color:#e6db74">add</span><span class="token plain"> sealed-secrets https://bitnami-labs.github.io/sealed-secrets</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">helm </span><span class="token function" style="color:#e6db74">install</span><span class="token plain"> sealed-secrets sealed-secrets/sealed-secrets </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--namespace</span><span class="token plain"> kube-system</span><br></span></code></pre></div></div><p>Verify all add-ons are running:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic"># Ingress controller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl get pods </span><span class="token parameter variable" style="color:#f8f8f2">-n</span><span class="token plain"> ingress-nginx</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Sealed Secrets controller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl get pods </span><span class="token parameter variable" style="color:#f8f8f2">-n</span><span class="token plain"> kube-system </span><span class="token parameter variable" style="color:#f8f8f2">-l</span><span class="token plain"> app.kubernetes.io/name</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">sealed-secrets</span><br></span></code></pre></div></div></div></div></details><a id="secrets"></a><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="secrets">Secrets<a href="#secrets" class="hash-link" aria-label="Direct link to Secrets" title="Direct link to Secrets" translate="no">​</a></h3><p>Several components need sensitive credentials.
We use <a href="https://github.com/bitnami-labs/sealed-secrets" target="_blank" rel="noopener noreferrer" class="">Bitnami Sealed Secrets</a>: create a regular Secret, encrypt it with <code>kubeseal</code>, and apply the encrypted <code>SealedSecret</code> to the cluster.
The controller decrypts it in-cluster into a standard Kubernetes Secret that pods can reference.
The encrypted form is safe to commit to Git.</p><p><strong>Secrets Inventory</strong></p><table><thead><tr><th>Secret</th><th>Keys</th><th>Used by</th></tr></thead><tbody><tr><td><code>conductor-db</code></td><td><code>database-url</code></td><td>Conductor — connection to <code>dbos_conductor</code> database</td></tr><tr><td><code>conductor-license</code></td><td><code>license-key</code></td><td>Conductor — production license</td></tr></tbody></table><p><strong>Create and Seal Secrets</strong></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>kubeseal commands</strong></summary><div><div class="collapsibleContent_i85q"><p>Create each secret, pipe it through <code>kubeseal</code>, and save the encrypted form:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic"># 1. Conductor database credentials (dedicated role)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl create secret generic conductor-db </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--namespace</span><span class="token plain"> dbos </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --from-literal</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">database-url</span><span class="token operator" style="color:#66d9ef">=</span><span class="token string" style="color:#a6e22e">&quot;postgresql://dbos_conductor_role:</span><span class="token string variable" style="color:#f8f8f2">${CONDUCTOR_ROLE_PASSWORD}</span><span class="token string" style="color:#a6e22e">@</span><span class="token string variable" style="color:#f8f8f2">${RDS_ENDPOINT}</span><span class="token string" style="color:#a6e22e">:5432/dbos_conductor?sslmode=require&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --dry-run</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">client </span><span class="token parameter variable" style="color:#f8f8f2">-o</span><span class="token plain"> yaml </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  kubeseal --controller-name</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">sealed-secrets --controller-namespace</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">kube-system </span><span class="token parameter variable" style="color:#f8f8f2">--format</span><span class="token plain"> yaml </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> sealed-conductor-db.yaml</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># 2. Conductor license key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl create secret generic conductor-license </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--namespace</span><span class="token plain"> dbos </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --from-literal</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">license-key</span><span class="token operator" style="color:#66d9ef">=</span><span class="token string" style="color:#a6e22e">&quot;</span><span class="token string variable" style="color:#f8f8f2">$CONDUCTOR_LICENSE_KEY</span><span class="token string" style="color:#a6e22e">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --dry-run</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">client </span><span class="token parameter variable" style="color:#f8f8f2">-o</span><span class="token plain"> yaml </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  kubeseal --controller-name</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">sealed-secrets --controller-namespace</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">kube-system </span><span class="token parameter variable" style="color:#f8f8f2">--format</span><span class="token plain"> yaml </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> sealed-conductor-license.yaml</span><br></span></code></pre></div></div></div></div></details><p><strong>Apply and Verify</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:#f8f8f2">-f</span><span class="token plain"> sealed-conductor-db.yaml</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:#f8f8f2">-f</span><span class="token plain"> sealed-conductor-license.yaml</span><br></span></code></pre></div></div><p>Verify the controller has decrypted them into regular Kubernetes Secrets:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl get secrets </span><span class="token parameter variable" style="color:#f8f8f2">-n</span><span class="token plain"> dbos</span><br></span></code></pre></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">NAME                TYPE     DATA   AGE</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">conductor-db        Opaque   1      10s</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">conductor-license   Opaque   1      10s</span><br></span></code></pre></div></div><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ingress-1">Ingress<a href="#ingress-1" class="hash-link" aria-label="Direct link to Ingress" title="Direct link to Ingress" translate="no">​</a></h3><p>With the Nginx Ingress Controller installed, you have a load balancer in front of the cluster.
This section creates a TLS certificate and an Ingress resource so that all services are reachable over HTTPS.</p><p>This walkthrough uses a self-signed certificate on the load balancer&#x27;s hostname.
For production, use <a href="https://cert-manager.io/" target="_blank" rel="noopener noreferrer" class="">cert-manager</a> with a real domain.</p><p>Get the load balancer hostname:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token assign-left variable" style="color:#f8f8f2">ELB_HOSTNAME</span><span class="token operator" style="color:#66d9ef">=</span><span class="token variable" style="color:#f8f8f2">$(</span><span class="token variable" style="color:#f8f8f2">kubectl get svc </span><span class="token variable parameter variable" style="color:#f8f8f2">-n</span><span class="token variable" style="color:#f8f8f2"> ingress-nginx ingress-nginx-controller </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">-o</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable assign-left variable" style="color:#f8f8f2">jsonpath</span><span class="token variable operator" style="color:#66d9ef">=</span><span class="token variable string" style="color:#a6e22e">&#x27;{.status.loadBalancer.ingress[0].hostname}&#x27;</span><span class="token variable" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token builtin class-name" style="color:#e6db74">echo</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$ELB_HOSTNAME</span><br></span></code></pre></div></div><p>Save this value — you&#x27;ll need it throughout the rest of the guide. It looks like <code>xxxxxxxx.us-west-2.elb.amazonaws.com</code>.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>Create a self-signed TLS certificate</strong></summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">openssl req </span><span class="token parameter variable" style="color:#f8f8f2">-x509</span><span class="token plain"> </span><span class="token parameter variable" style="color:#f8f8f2">-nodes</span><span class="token plain"> </span><span class="token parameter variable" style="color:#f8f8f2">-days</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">365</span><span class="token plain"> </span><span class="token parameter variable" style="color:#f8f8f2">-newkey</span><span class="token plain"> rsa:2048 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">-keyout</span><span class="token plain"> tls.key </span><span class="token parameter variable" style="color:#f8f8f2">-out</span><span class="token plain"> tls.crt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">-subj</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;/CN=dbos-conductor&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">-addext</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;subjectAltName=DNS:</span><span class="token string variable" style="color:#f8f8f2">${ELB_HOSTNAME}</span><span class="token string" style="color:#a6e22e">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl create secret tls dbos-tls </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--cert</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">tls.crt </span><span class="token parameter variable" style="color:#f8f8f2">--key</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">tls.key </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter variable" style="color:#f8f8f2">--namespace</span><span class="token plain"> dbos</span><br></span></code></pre></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The CN is kept short because OpenSSL&#x27;s CN field has a 64-character limit — the actual hostname is covered by the SAN extension.
Your browser will show a certificate warning for the self-signed cert — accept it to proceed.
For production, use <a href="https://cert-manager.io/" target="_blank" rel="noopener noreferrer" class="">cert-manager</a> with a real domain.</p></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>ingress.yaml</strong></summary><div><div class="collapsibleContent_i85q"><p>The Ingress routes <code>/conductor/...</code> to the Conductor service and everything else to the Console.
A regex rewrite strips the <code>/conductor</code> prefix so Conductor sees requests at <code>/</code>.
Replace <code>&lt;your-elb-hostname&gt;</code> with the <code>$ELB_HOSTNAME</code> value you retrieved above.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> dbos</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">ingress</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> dbos</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">nginx.ingress.kubernetes.io/use-regex</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">nginx.ingress.kubernetes.io/rewrite-target</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> /$2</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">nginx.ingress.kubernetes.io/proxy-read-timeout</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">nginx.ingress.kubernetes.io/proxy-send-timeout</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">ingressClassName</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">tls</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">hosts</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> &lt;your</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">elb</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">hostname</span><span class="token punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token key atrule">secretName</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> dbos</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">tls</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">host</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> &lt;your</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">elb</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">hostname</span><span class="token punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token key atrule">http</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> /conductor(/</span><span class="token punctuation" style="color:#f8f8f2">|</span><span class="token plain">$)(.</span><span class="token important">*)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">pathType</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> ImplementationSpecific</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">service</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> conductor</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token key atrule">number</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">8090</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> /()(.</span><span class="token important">*)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">pathType</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> ImplementationSpecific</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">service</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> console</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token key atrule">number</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">80</span><br></span></code></pre></div></div><p>The <code>host</code> in both <code>tls</code> and <code>rules</code> must match — without it, Nginx serves its default fake certificate instead of <code>dbos-tls</code>.</p><table><thead><tr><th>Request path</th><th>Backend</th></tr></thead><tbody><tr><td><code>/conductor/</code></td><td>conductor:8090 → <code>/</code></td></tr><tr><td><code>/conductor/v1/workflows</code></td><td>conductor:8090 → <code>/v1/workflows</code></td></tr><tr><td><code>/</code></td><td>console:80</td></tr><tr><td><code>/health</code></td><td>console:80</td></tr></tbody></table><ul>
<li class=""><strong><code>rewrite-target: /$2</code></strong> — strips the <code>/conductor</code> prefix using the second capture group. The Console catch-all uses <code>/()(.*)</code>  so <code>$2</code> passes the full path through unchanged.</li>
<li class=""><strong><code>proxy-read-timeout</code> / <code>proxy-send-timeout</code></strong> — set to 3600s to keep Conductor&#x27;s long-lived WebSocket connections alive.</li>
</ul></div></div></details><p><strong>Apply the Ingress</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:#f8f8f2">-f</span><span class="token plain"> ingress.yaml</span><br></span></code></pre></div></div><p><strong>WebSocket Configuration</strong></p><p>The application connects to Conductor via a long-lived WebSocket.
Three layers must be configured to prevent idle connections from being dropped:</p><table><thead><tr><th>Layer</th><th>Setting</th><th>Default</th><th>Suggested</th><th>Why</th></tr></thead><tbody><tr><td><strong>Nginx Ingress</strong></td><td><code>proxy-read-timeout</code></td><td>60s</td><td>3600s</td><td>Prevents Nginx from closing an idle WebSocket</td></tr><tr><td><strong>Nginx Ingress</strong></td><td><code>proxy-send-timeout</code></td><td>60s</td><td>3600s</td><td>Same, for the send direction</td></tr><tr><td><strong>AWS ELB</strong></td><td>idle timeout</td><td>60s</td><td>3600s</td><td>Prevents the load balancer from closing an idle TCP connection</td></tr></tbody></table><p>The Nginx timeouts are already set via the Ingress annotations.
Nginx handles the <code>Connection: Upgrade</code> and <code>Upgrade: websocket</code> headers automatically — no additional annotation is needed for the protocol upgrade itself.</p><p>The AWS load balancer idle timeout is configured separately on the <code>ingress-nginx-controller</code> Service:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl patch svc ingress-nginx-controller </span><span class="token parameter variable" style="color:#f8f8f2">-n</span><span class="token plain"> ingress-nginx </span><span class="token parameter variable" style="color:#f8f8f2">-p</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token string" style="color:#a6e22e">&#x27;{&quot;metadata&quot;:{&quot;annotations&quot;:{&quot;service.beta.kubernetes.io/aws-load-balancer-connection-idle-timeout&quot;:&quot;3600&quot;}}}&#x27;</span><br></span></code></pre></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The DBOS SDK sends periodic ping frames that keep the connection active under normal conditions.
Albeit the SDK will reconnect automatically, increasing the ELB idle timeout will prevent network hiccups to drop the connection.</p></div></div><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="deployments-1">Deployments<a href="#deployments-1" class="hash-link" aria-label="Direct link to Deployments" title="Direct link to Deployments" translate="no">​</a></h3><a id="conductor-and-console"></a><p>Conductor is the core service that manages workflow recovery and the application registry.
It connects to the <code>dbos_conductor</code> database using the <code>dbos_conductor_role</code> credentials.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>conductor.yaml</strong></summary><div><div class="collapsibleContent_i85q"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> conductor</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> dbos</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> conductor</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> conductor</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> conductor</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> dbosdev/conductor</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">env</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> DBOS__CONDUCTOR_DB_URL</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">valueFrom</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token key atrule">secretKeyRef</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> conductor</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">db</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token key atrule">key</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> database</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">url</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> DBOS_CONDUCTOR_LICENSE_KEY</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">valueFrom</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token key atrule">secretKeyRef</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> conductor</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">license</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token key atrule">key</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> license</span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain">key</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">8090</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">readinessProbe</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">path</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> /healthz</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">8090</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">livenessProbe</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">path</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> /healthz</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">8090</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> 250m</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> 256Mi</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">limits</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> 512Mi</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> conductor</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> dbos</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> conductor</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">8090</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">8090</span><br></span></code></pre></div></div><p>Both sensitive values (<code>DBOS__CONDUCTOR_DB_URL</code> and <code>DBOS_CONDUCTOR_LICENSE_KEY</code>) are pulled from the Sealed Secrets created in the <a href="#secrets" class="">Secrets</a> section.</p></div></div></details><p>The Console is the web UI for managing applications, monitoring workflows, and generating API keys.
In this example, it connects to Conductor via internal cluster DNS.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><strong>console.yaml</strong></summary><div><div class="collapsibleContent_i85q"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> console</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> dbos</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> console</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> console</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> console</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> dbosdev/console</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">env</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> DBOS_CONDUCTOR_URL</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">value</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;conductor.dbos.svc.cluster.local:8090&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">readinessProbe</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">path</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> /health</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">livenessProbe</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">path</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> /health</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> 128Mi</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token key atrule">limits</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> 500m</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> 256Mi</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> console</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> dbos</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> console</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">80</span><br></span></code></pre></div></div></div></div></details><p>Deploy both with:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:#f8f8f2">-f</span><span class="token plain"> conductor.yaml</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:#f8f8f2">-f</span><span class="token plain"> console.yaml</span><br></span></code></pre></div></div><p>Verify both pods are running:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">kubectl get pods </span><span class="token parameter variable" style="color:#f8f8f2">-n</span><span class="token plain"> dbos</span><br></span></code></pre></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">conductor-xxxxxxxxx-xxxxx    1/1     Running   0          2m</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">console-xxxxxxxxx-xxxxx      1/1     Running   0          30s</span><br></span></code></pre></div></div><p><strong>Access the Console and Generate an API Key</strong></p><p>At this point, your self-hosted Conductor deployment is fully operational! Open <code>https://&lt;your-elb-hostname&gt;/</code> in your browser (accept the self-signed cert warning), then follow the <a class="" href="/production/conductor#connecting-to-conductor">Conductor setup instructions</a> to:</p><ol>
<li class="">Register your application</li>
<li class="">Generate an API key</li>
</ol><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cleanup">Cleanup<a href="#cleanup" class="hash-link" aria-label="Direct link to Cleanup" title="Direct link to Cleanup" translate="no">​</a></h3><p>To tear down all AWS resources when done:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic"># Delete the EKS cluster (includes VPC, security groups, and node group)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">eksctl delete cluster </span><span class="token parameter variable" style="color:#f8f8f2">--name</span><span class="token plain"> dbos-conductor </span><span class="token parameter variable" style="color:#f8f8f2">--region</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$AWS_REGION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Delete the RDS instance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">aws rds delete-db-instance --db-instance-identifier dbos-conductor-pg </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  --skip-final-snapshot </span><span class="token parameter variable" style="color:#f8f8f2">--region</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$AWS_REGION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Delete the RDS security group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token assign-left variable" style="color:#f8f8f2">RDS_SG</span><span class="token operator" style="color:#66d9ef">=</span><span class="token variable" style="color:#f8f8f2">$(</span><span class="token variable" style="color:#f8f8f2">aws ec2 describe-security-groups </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--filters</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable string" style="color:#a6e22e">&quot;Name=group-name,Values=dbos-conductor-rds&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:#f8f8f2"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token variable" style="color:#f8f8f2">  </span><span class="token variable parameter variable" style="color:#f8f8f2">--query</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable string" style="color:#a6e22e">&quot;SecurityGroups[0].GroupId&quot;</span><span class="token variable" style="color:#f8f8f2"> </span><span class="token variable parameter variable" style="color:#f8f8f2">--output</span><span class="token variable" style="color:#f8f8f2"> text </span><span class="token variable parameter variable" style="color:#f8f8f2">--region</span><span class="token variable" style="color:#f8f8f2"> $AWS_REGION</span><span class="token variable" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">aws ec2 delete-security-group --group-id </span><span class="token variable" style="color:#f8f8f2">$RDS_SG</span><span class="token plain"> </span><span class="token parameter variable" style="color:#f8f8f2">--region</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$AWS_REGION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Delete the DB subnet group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">aws rds delete-db-subnet-group --db-subnet-group-name dbos-conductor-db </span><span class="token parameter variable" style="color:#f8f8f2">--region</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$AWS_REGION</span><br></span></code></pre></div></div></div></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/production/workflow-recovery"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Workflow Recovery</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/production/hosting-with-kubernetes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deploying With Kubernetes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#deployments" class="table-of-contents__link toc-highlight">Deployments</a></li><li><a href="#authentication" class="table-of-contents__link toc-highlight">Authentication</a></li><li><a href="#ingress" class="table-of-contents__link toc-highlight">Ingress</a></li><li><a href="#security-best-practices" class="table-of-contents__link toc-highlight">Security Best Practices</a></li><li><a href="#walkthrough-aws-eks" class="table-of-contents__link toc-highlight">Walkthrough (AWS EKS)</a><ul><li><a href="#infrastructure" class="table-of-contents__link toc-highlight">Infrastructure</a></li><li><a href="#secrets" class="table-of-contents__link toc-highlight">Secrets</a></li><li><a href="#ingress-1" class="table-of-contents__link toc-highlight">Ingress</a></li><li><a href="#deployments-1" class="table-of-contents__link toc-highlight">Deployments</a></li><li><a href="#cleanup" class="table-of-contents__link toc-highlight">Cleanup</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Follow Us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/dbos-inc/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://bsky.app/profile/dbos.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bluesky<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/DBOS_Inc" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter/X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.dbos.dev/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.dbos.dev/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Questions or Comments?</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/fMwQjeW5zg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat with us on Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:contact@dbos.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Write to us at contact@dbos.dev<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://dbos.dev" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/dbos-logo.png" alt="DBOS Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="100"><img src="/img/dbos-logo-dark.png" alt="DBOS Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="100"></a></div><div class="footer__copyright">Copyright © 2026 DBOS, Inc. | <a href="https://www.dbos.dev/privacy" target="_blank">Privacy Policy</a></div></div></div></footer></div>
</body>
</html>