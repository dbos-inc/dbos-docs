<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-typescript/reference/transactapi/oldapi/contexts" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">DBOS Contexts | DBOS Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.dbos.dev/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.dbos.dev/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.dbos.dev/typescript/reference/transactapi/oldapi/contexts"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="DBOS Contexts | DBOS Docs"><meta data-rh="true" name="description" content="API reference for DBOS contexts"><meta data-rh="true" property="og:description" content="API reference for DBOS contexts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.dbos.dev/typescript/reference/transactapi/oldapi/contexts"><link data-rh="true" rel="alternate" href="https://docs.dbos.dev/typescript/reference/transactapi/oldapi/contexts" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.dbos.dev/typescript/reference/transactapi/oldapi/contexts" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UY2VKOMIL2-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="DBOS Docs" href="/opensearch.xml">
<link rel="preconnect" href="https://dbosdev.matomo.cloud/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://dbosdev.matomo.cloud/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script>

<link rel="preconnect" href="https://d2j9bas80r5yfz.cloudfront.net">
<script>!function(t,e){var o,r,s,a;e.__SV||(window.posthog=e,e._i=[],e.init=function(n,i,p){function c(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(s=t.createElement("script")).type="text/javascript",s.async=!0,s.src=i.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(a=t.getElementsByTagName("script")[0]).parentNode.insertBefore(s,a);var g=e;for(void 0!==p?g=e[p]=[]:p="posthog",g.people=g.people||[],g.toString=function(t){var e="posthog";return"posthog"!==p&&(e+="."+p),t||(e+=" (stub)"),e},g.people.toString=function(){return g.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys onSessionId".split(" "),r=0;r<o.length;r++)c(g,o[r]);e._i.push([n,i,p])},e.__SV=1)}(document,window.posthog||[]),posthog.init("phc_vKGgPmFevFB3QVyqZdIZeNqcWAPqk3i3mDhwGqwk6nP",{api_host:"https://d2j9bas80r5yfz.cloudfront.net",id:"default"})</script><link rel="stylesheet" href="/assets/css/styles.27931b31.css">
<script src="/assets/js/runtime~main.76295c43.js" defer="defer"></script>
<script src="/assets/js/main.db33e69f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://dbos.dev" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/dbos-logo.png" alt="DBOS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/dbos-logo-dark.png" alt="DBOS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a class="navbar__item navbar__link" href="/quickstart">Quickstart</a><a class="navbar__item navbar__link" href="/examples">Examples</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://console.dbos.dev/login-redirect" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link dbos-button-blue">Cloud Console</a><a href="https://github.com/dbos-inc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quickstart">Get Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/why-dbos">Why DBOS?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/python/programming-guide">Develop with Python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/typescript/programming-guide">Develop with TypeScript</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/typescript/programming-guide">Learn DBOS TypeScript</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/typescript/tutorials/workflow-tutorial">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/typescript/reference/transactapi/dbos-class">Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/typescript/reference/transactapi/dbos-class">DBOS Transact API Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/typescript/reference/transactapi/dbos-class">DBOS Class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/typescript/reference/transactapi/workflow-handles">Workflow Handles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/typescript/reference/transactapi/workflow-queues">Workflow Queues</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/typescript/reference/transactapi/oldapi/contexts">Context-Based API (Legacy)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/typescript/reference/transactapi/oldapi/contexts">DBOS Contexts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/typescript/reference/transactapi/oldapi/decorators">Decorators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/typescript/reference/transactapi/oldapi/testing-runtime">Testing Runtime</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/typescript/reference/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/typescript/reference/tools/cli">Tools</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/typescript/reference/libraries">Package Library</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/typescript/examples/checkout-tutorial">Example Applications</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cloud-tutorials/application-management">DBOS Cloud</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/integrations/supabase">Integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/explanations/how-workflows-work">Concepts and Explanations</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Develop with TypeScript</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reference</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">DBOS Transact API Reference</span><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Context-Based API (Legacy)</span><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">DBOS Contexts</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>DBOS Contexts</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">​</a></h2>
<p>DBOS automatically supplies a <em>context</em> to each registered function.
A function can use its context to call other DBOS functions, interact with the runtime or the database, and access the logger.
Each DBOS function has a specific context:</p>
<ul>
<li>Contexts used within DBOS functions inherit from <a href="#dboscontext"><code>DBOSContext</code></a>.</li>
<li>Handlers use <a href="#handlercontext"><code>HandlerContext</code></a>.</li>
<li>Workflows use <a href="#workflowcontext"><code>WorkflowContext</code></a>.</li>
<li>Transactions use <a href="#transactioncontextt"><code>TransactionContext&lt;T&gt;</code></a> with a specific database client type.</li>
<li>Steps use <a href="#stepcontext"><code>StepContext</code></a>.</li>
<li>Initialization functions use <a href="#initcontext"><code>InitContext</code></a>.</li>
<li>Middleware functions use <a href="#middlewarecontext"><code>MiddlewareContext</code></a>.</li>
<li>Event receivers use <a href="#dbosexecutorcontext"><code>DBOSExecutorContext</code></a>.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dboscontext"><code>DBOSContext</code><a href="#dboscontext" class="hash-link" aria-label="Direct link to dboscontext" title="Direct link to dboscontext">​</a></h2>
<p>Many contexts inherit from <code>DBOSContext</code> and share its properties and methods.   (<code>InitContext</code> and <code>MiddlewareContext</code> are exceptions, as these are applied outside the context of DBOS functions.)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="properties">Properties<a href="#properties" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties">​</a></h3>
<ul>
<li><a href="#ctxtrequest">request</a></li>
<li><a href="#ctxtworkflowuuid">workflowUUID</a></li>
<li><a href="#ctxtauthenticateduser">authenticatedUser</a></li>
<li><a href="#ctxtauthenticatedroles">authenticatedRoles</a></li>
<li><a href="#ctxtassumedrole">assumedRole</a></li>
<li><a href="#ctxtlogger">logger</a></li>
<li><a href="#ctxtspan">span</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods">Methods<a href="#methods" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods">​</a></h3>
<ul>
<li><a href="#ctxtgetconfig">getConfig(key, defaultValue)</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ctxtrequest"><code>ctxt.request</code><a href="#ctxtrequest" class="hash-link" aria-label="Direct link to ctxtrequest" title="Direct link to ctxtrequest">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> request</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> HTTPRequest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>An object with information about the originating HTTP request that triggered this function (directly or indirectly).</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">HTTPRequest</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> headers</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> IncomingHttpHeaders</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">// A node&#x27;s http.IncomingHttpHeaders object.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> rawHeaders</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">          </span><span class="token comment" style="color:#8292a2;font-style:italic">// Raw headers.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> params</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">unknown</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">               </span><span class="token comment" style="color:#8292a2;font-style:italic">// Parsed path parameters from the URL.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> body</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">unknown</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">                 </span><span class="token comment" style="color:#8292a2;font-style:italic">// parsed HTTP body as an object.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> rawBody</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">               </span><span class="token comment" style="color:#8292a2;font-style:italic">// Unparsed raw HTTP body string.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> query</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> ParsedUrlQuery</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">         </span><span class="token comment" style="color:#8292a2;font-style:italic">// Parsed query string.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> querystring</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">           </span><span class="token comment" style="color:#8292a2;font-style:italic">// Unparsed raw query string.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> url</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">                   </span><span class="token comment" style="color:#8292a2;font-style:italic">// Request URL.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> ip</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">                    </span><span class="token comment" style="color:#8292a2;font-style:italic">// Request remote address.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ctxtworkflowuuid"><code>ctxt.workflowUUID</code><a href="#ctxtworkflowuuid" class="hash-link" aria-label="Direct link to ctxtworkflowuuid" title="Direct link to ctxtworkflowuuid">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> workflowUUID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The current workflow&#x27;s <a href="/typescript/tutorials/workflow-tutorial#workflow-ids">identity UUID</a>, a string uniquely identifying a workflow execution.
In a transaction or step, this field is set to the identity UUID of the calling workflow.
In a handler, this field is empty.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ctxtauthenticateduser"><code>ctxt.authenticatedUser</code><a href="#ctxtauthenticateduser" class="hash-link" aria-label="Direct link to ctxtauthenticateduser" title="Direct link to ctxtauthenticateduser">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> authenticatedUser</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The identity of the authenticated user who ran this function.
Authenticated users are set by <a href="/typescript/tutorials/authentication-authorization">authentication middleware</a> and inherited through the calling chain.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ctxtauthenticatedroles"><code>ctxt.authenticatedRoles</code><a href="#ctxtauthenticatedroles" class="hash-link" aria-label="Direct link to ctxtauthenticatedroles" title="Direct link to ctxtauthenticatedroles">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> authenticatedRoles</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A list of roles the authenticated user has, if any.
Authenticated roles are set by <a href="/typescript/tutorials/authentication-authorization">authentication middleware</a> and inherited through the calling chain.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ctxtassumedrole"><code>ctxt.assumedRole</code><a href="#ctxtassumedrole" class="hash-link" aria-label="Direct link to ctxtassumedrole" title="Direct link to ctxtassumedrole">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> assumedRole</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The role used to run this function.
Empty string if authorization is not required.
DBOS&#x27;s <a href="/typescript/tutorials/authentication-authorization#authorization-decorators">authorization</a> sets the assumed role right before executing a function and this property is <em>not</em> inherited through the calling chain.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ctxtlogger"><code>ctxt.logger</code><a href="#ctxtlogger" class="hash-link" aria-label="Direct link to ctxtlogger" title="Direct link to ctxtlogger">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> logger</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBOSLogger</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A reference to DBOS&#x27;s logger.
Please see our <a href="/typescript/tutorials/logging">logging tutorial</a> for more information.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ctxtspan"><code>ctxt.span</code><a href="#ctxtspan" class="hash-link" aria-label="Direct link to ctxtspan" title="Direct link to ctxtspan">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> span</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Span</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>An <a href="https://opentelemetry.io/docs/concepts/signals/traces/#spans" target="_blank" rel="noopener noreferrer">OpenTelemetry Span</a> associated with this context.
You can assign custom trace attributes to this span.
Please see the <a href="https://github.com/open-telemetry/opentelemetry-js/blob/main/api/src/trace/span.ts" target="_blank" rel="noopener noreferrer">Span API</a> for more information.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ctxtgetconfig"><code>ctxt.getConfig</code><a href="#ctxtgetconfig" class="hash-link" aria-label="Direct link to ctxtgetconfig" title="Direct link to ctxtgetconfig">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">getConfig</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">undefined</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token generic-function function" style="color:#e6db74">getConfig</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> defaultValue</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Retrieves an application property specified in the <a href="/typescript/reference/configuration#application">application section of the configuration</a>.
Optionally accepts a default value, returned when the key cannot be found in the configuration.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="handlercontext"><code>HandlerContext</code><a href="#handlercontext" class="hash-link" aria-label="Direct link to handlercontext" title="Direct link to handlercontext">​</a></h2>
<p>Handlers use <code>HandlerContext</code> to invoke other functions, interact with active workflows, and interact directly with HTTP requests and responses.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="properties-1">Properties<a href="#properties-1" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties">​</a></h3>
<ul>
<li><a href="#handlerctxtkoacontext">koaContext</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods-1">Methods<a href="#methods-1" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods">​</a></h3>
<ul>
<li><a href="#handlerctxtinvoke">invoke(target)</a></li>
<li><a href="#handlerctxtinvokeworkflow">invokeWorkflow(target, [workflowID])</a></li>
<li><a href="#handlerctxtstartworkflow">startWorkflow(target, [workflowID], [queue])</a></li>
<li><a href="#handlerctxtretrieveworkflow">retrieveWorkflow(workflowID)</a></li>
<li><a href="#handlerctxtsend">send(destinationUUID, message, [topic, idempotencyKey])</a></li>
<li><a href="#handlerctxtgetevent">getEvent(workflowID, key, [timeoutSeconds])</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handlerctxtkoacontext"><code>handlerCtxt.koaContext</code><a href="#handlerctxtkoacontext" class="hash-link" aria-label="Direct link to handlerctxtkoacontext" title="Direct link to handlerctxtkoacontext">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">koaContext</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Koa</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <a href="https://github.com/koajs/koa/blob/master/docs/api/context.md" target="_blank" rel="noopener noreferrer">Koa Context</a> of the current request, giving handlers access to the raw HTTP request and response.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handlerctxtinvoke"><code>handlerCtxt.invoke</code><a href="#handlerctxtinvoke" class="hash-link" aria-label="Direct link to handlerctxtinvoke" title="Direct link to handlerctxtinvoke">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">invoke</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">target</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> workflowID</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> InvokeFuncs</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Invoke a transaction or step on the <code>target</code> class or configured instance.
To invoke workflows, use <a href="#handlerctxtinvokeworkflow"><code>invokeWorkflow</code></a> or <a href="#handlerctxtstartworkflow"><code>startWorkflow</code></a> instead.
The syntax for invoking function <code>fn</code> in class <code>Cls</code> with argument <code>arg</code> is:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> output </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">await</span><span class="token plain"> handlerCtxt</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">invoke</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Cls</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">fn</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You don&#x27;t supply a context to the invoked function—the DBOS Transact runtime does this for you.
You can optionally provide an idempotency key to the invoked function.
For more information, see our <a href="/typescript/tutorials/idempotency-tutorial">idempotency tutorial</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handlerctxtinvokeworkflow"><code>handlerCtxt.invokeWorkflow</code><a href="#handlerctxtinvokeworkflow" class="hash-link" aria-label="Direct link to handlerctxtinvokeworkflow" title="Direct link to handlerctxtinvokeworkflow">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">invokeWorkflow</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">target</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> workflowID</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> InvokeFuncs</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Invoke a workflow and wait for it to complete, returning its result.
To start a workflow without waiting for it to complete, use <a href="#handlerctxtstartworkflow"><code>startWorkflow</code></a>.
The syntax for invoking workflow <code>wf</code> in class <code>Cls</code> with argument <code>arg</code> is:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> output </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">await</span><span class="token plain"> handlerCtxt</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">invokeWorkflow</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Cls</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">wf</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You don&#x27;t supply a context to the invoked workflow—the DBOS Transact runtime does this for you.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handlerctxtstartworkflow"><code>handlerCtxt.startWorkflow</code><a href="#handlerctxtstartworkflow" class="hash-link" aria-label="Direct link to handlerctxtstartworkflow" title="Direct link to handlerctxtstartworkflow">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">startWorkflow</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">target</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> workflowID</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> queue</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowQueue</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> InvokeFuncs</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Start or enqueue a workflow and return a <a href="/typescript/reference/transactapi/workflow-handles">handle</a> to it.
This does not wait for the workflow to complete, though the resulting handle can be used to wait for the workflow result.
To start a workflow and wait for the result, see <a href="#handlerctxtinvokeworkflow"><code>invokeWorkflow</code></a>.
The <code>startWorkflow</code> method resolves after the handle is durably created; at this point the workflow is guaranteed to <a href="/typescript/tutorials/workflow-tutorial#reliability-guarantees">run to completion</a> even if the handler is interrupted.</p>
<p>The syntax for starting workflow <code>wf</code> in class <code>Cls</code> with argument <code>arg</code> is:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> workflowHandle </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">await</span><span class="token plain"> handlerCtxt</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">startWorkflow</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Cls</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">wf</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the <code>workflowID</code> argument is provided, the workflow will <a href="/typescript/tutorials/idempotency-tutorial">execute exactly once per the specified ID</a>.</p>
<p>If the <code>queue</code> argument is provided, the workflow may not start immediately.  Start of execution will be determined by the <a href="/typescript/reference/transactapi/workflow-queues#class-workflowqueue">queue</a> and its contents.</p>
<p>You don&#x27;t supply a context to the newly started workflow—the DBOS Transact runtime does this for you.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handlerctxtretrieveworkflow"><code>handlerCtxt.retrieveWorkflow</code><a href="#handlerctxtretrieveworkflow" class="hash-link" aria-label="Direct link to handlerctxtretrieveworkflow" title="Direct link to handlerctxtretrieveworkflow">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">retrieveWorkflow</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">workflowID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowHandle</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Returns a <a href="/typescript/reference/transactapi/workflow-handles">workflow handle</a> to the workflow with <a href="/typescript/tutorials/workflow-tutorial#workflow-ids">identity</a> <code>workflowID</code>.
<code>R</code> is the return type of the target workflow.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handlerctxtsend"><code>handlerCtxt.send</code><a href="#handlerctxtsend" class="hash-link" aria-label="Direct link to handlerctxtsend" title="Direct link to handlerctxtsend">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">send</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> NonNullable</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name builtin" style="color:#e6db74">any</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">destinationUUID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> message</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> topic</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> idempotencyKey</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token keyword" style="color:#66d9ef">void</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Sends a message to workflow <code>destinationUUID</code>.
Messages can optionally be associated with a topic.
You can provide an optional idempotency key to guarantee only a single message is sent even if <code>send</code> is called more than once.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handlerctxtgetevent"><code>handlerCtxt.getEvent</code><a href="#handlerctxtgetevent" class="hash-link" aria-label="Direct link to handlerctxtgetevent" title="Direct link to handlerctxtgetevent">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">getEvent</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> NonNullable</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name builtin" style="color:#e6db74">any</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">workflowID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> timeoutSeconds</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">null</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Retrieves an event published by <code>workflowID</code> for a given key using the <a href="/typescript/tutorials/workflow-tutorial#workflow-events">events API</a>.
Awaiting on the promise returned by <code>getEvent()</code> waits for the workflow to publish the key, returning <code>null</code> if the wait times out.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handlerctxtgetworkflows"><code>handlerCtxt.getWorkflows</code><a href="#handlerctxtgetworkflows" class="hash-link" aria-label="Direct link to handlerctxtgetworkflows" title="Direct link to handlerctxtgetworkflows">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">getWorkflows</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">input</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> GetWorkflowsInput</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">GetWorkflowsOutput</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This function allows querying workflow execution history. Its input is an object describing which workflows to retrieve (by default, retrieve all workflows):</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">GetWorkflowsInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  workflowName</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// The name of the workflow function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  authenticatedUser</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// The user who ran the workflow.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  startTime</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// Timestamp in RFC 3339 format</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  endTime</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// Timestamp in RFC 3339 format</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  status</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;PENDING&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;SUCCESS&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;ERROR&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;RETRIES_EXCEEDED&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;CANCELLED&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// The status of the workflow.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  applicationVersion</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// The application version that ran this workflow.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  limit</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// Return up to this many workflows IDs. IDs are ordered by workflow creation time.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It returns as output an object containing a list of the <a href="/typescript/tutorials/idempotency-tutorial">UUIDs</a> of all retrieved workflows, ordered by workflow creation time:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">GetWorkflowsOutput</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  workflowUUIDs</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To obtain further information about a particular workflow, call <a href="#handlerctxtretrieveworkflow"><code>retrieveWorkflow</code></a> on its UUID to obtain its <a href="/typescript/reference/transactapi/workflow-handles">handle</a>.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflowcontext"><code>WorkflowContext</code><a href="#workflowcontext" class="hash-link" aria-label="Direct link to workflowcontext" title="Direct link to workflowcontext">​</a></h2>
<p>Workflows use <code>WorkflowContext</code> to invoke other functions and interact with other workflows.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods-2">Methods<a href="#methods-2" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods">​</a></h3>
<ul>
<li><a href="#workflowctxtinvoke">invoke(target)</a></li>
<li><a href="#workflowctxtinvokeworkflow">invokeWorkflow(target)</a></li>
<li><a href="#workflowctxtstartworkflow">startWorkflow(target)</a></li>
<li><a href="#workflowctxtsend">send(destinationUUID, message, [topic])</a></li>
<li><a href="#workflowctxtrecv">recv([topic, timeoutSeconds])</a></li>
<li><a href="#workflowctxtsetevent">setEvent(key, value)</a></li>
<li><a href="#workflowctxtgetevent">getEvent()</a></li>
<li><a href="#workflowctxtretrieveworkflow">retrieveWorkflow(workflowID)</a></li>
<li><a href="#workflowcontextsleep">sleep(durationSec)</a></li>
<li><a href="#workflowcontextsleepms">sleepms(durationMS)</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowctxtinvoke"><code>workflowCtxt.invoke</code><a href="#workflowctxtinvoke" class="hash-link" aria-label="Direct link to workflowctxtinvoke" title="Direct link to workflowctxtinvoke">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">invoke</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">target</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> workflowID</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> InvokeFuncs</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Invoke transactions and steps.
To invoke other workflows, use <a href="#workflowctxtinvokeworkflow"><code>invokeWorkflow</code></a> or <a href="#workflowctxtstartworkflow"><code>startWorkflow</code></a>.</p>
<p>The syntax for invoking function <code>fn</code> in class <code>Cls</code> with argument <code>arg</code> is:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> output </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">await</span><span class="token plain"> workflowCtxt</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">invoke</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Cls</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">fn</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You don&#x27;t supply a context to the invoked function—the DBOS Transact runtime does this for you.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowctxtinvokeworkflow"><code>workflowCtxt.invokeWorkflow</code><a href="#workflowctxtinvokeworkflow" class="hash-link" aria-label="Direct link to workflowctxtinvokeworkflow" title="Direct link to workflowctxtinvokeworkflow">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">invokeWorkflow</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">target</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Invoke a child workflow and wait for it to complete, returning its result.
To start a workflow without waiting it to complete, use <a href="#workflowctxtstartworkflow"><code>startWorkflow</code></a>.
The syntax for invoking workflow <code>wf</code> in class <code>Cls</code> with argument <code>arg</code> is:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> output </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">await</span><span class="token plain"> ctxt</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">invokeWorkflow</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Cls</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">wf</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You don&#x27;t supply a context to the invoked child workflow—the DBOS Transact runtime does this for you.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowctxtstartworkflow"><code>workflowCtxt.startWorkflow</code><a href="#workflowctxtstartworkflow" class="hash-link" aria-label="Direct link to workflowctxtstartworkflow" title="Direct link to workflowctxtstartworkflow">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">startWorkflow</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">target</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> workflowID</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> queue</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowQueue</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">workflowFunction</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Start a child workflow and return a <a href="/typescript/reference/transactapi/workflow-handles">handle</a> to it but do not wait for the workflow to complete.
This method resolves after the handle is durably created; at this point the workflow is guaranteed to <a href="/typescript/tutorials/workflow-tutorial#reliability-guarantees">run to completion</a>.
The syntax for starting workflow <code>wf</code> in class <code>Cls</code> with argument <code>arg</code> is:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> workflowHandle </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">await</span><span class="token plain"> ctxt</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">startWorkflow</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Cls</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">wf</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the <code>workflowID</code> argument is provided, the workflow will <a href="/typescript/tutorials/idempotency-tutorial">execute exactly once per the specified ID</a>.</p>
<p>If the <code>queue</code> argument is provided, the workflow may not start immediately.  Start of execution will be determined by the <a href="/typescript/reference/transactapi/workflow-queues#class-workflowqueue">queue</a> and its contents.</p>
<p>You don&#x27;t supply a context to the newly started child workflow—the DBOS Transact runtime does this for you.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowctxtinvokechildworkflow"><code>workflowCtxt.invokeChildWorkflow</code><a href="#workflowctxtinvokechildworkflow" class="hash-link" aria-label="Direct link to workflowctxtinvokechildworkflow" title="Direct link to workflowctxtinvokechildworkflow">​</a></h4>
<p>Deprecated in favor of <a href="#workflowctxtinvokeworkflow"><code>workflowCtxt.invokeWorkflow</code></a>, which is equivalent but syntactically simpler.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowctxtstartchildworkflow"><code>workflowCtxt.startChildWorkflow</code><a href="#workflowctxtstartchildworkflow" class="hash-link" aria-label="Direct link to workflowctxtstartchildworkflow" title="Direct link to workflowctxtstartchildworkflow">​</a></h4>
<p>Deprecated in favor of <a href="#workflowctxtstartworkflow"><code>workflowCtxt.startWorkflow</code></a>, which is equivalent but syntactically simpler.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowctxtsend"><code>workflowCtxt.send</code><a href="#workflowctxtsend" class="hash-link" aria-label="Direct link to workflowctxtsend" title="Direct link to workflowctxtsend">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">send</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> NonNullable</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name builtin" style="color:#e6db74">any</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">destinationUUID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> message</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> topic</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token keyword" style="color:#66d9ef">void</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Sends a message to <code>destinationUUID</code>.
Messages can optionally be associated with a topic.
For more information, see the <a href="/typescript/tutorials/workflow-tutorial#workflow-messaging-and-notifications">messages API tutorial</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowctxtrecv"><code>workflowCtxt.recv</code><a href="#workflowctxtrecv" class="hash-link" aria-label="Direct link to workflowctxtrecv" title="Direct link to workflowctxtrecv">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">recv</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> NonNullable</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name builtin" style="color:#e6db74">any</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">topic</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> timeoutSeconds</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">null</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Receive messages sent to the workflow, optionally for a particular topic.
Messages are dequeued first-in, first-out, from a queue associated with the topic.
Calls to <code>recv()</code> wait for the next message in the queue, returning <code>null</code> if the wait times out.
If no topic is specified, <code>recv</code> can only access messages sent without a topic.
For more information, see the <a href="/typescript/tutorials/workflow-tutorial#workflow-messaging-and-notifications">messages API tutorial</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowctxtsetevent"><code>workflowCtxt.setEvent</code><a href="#workflowctxtsetevent" class="hash-link" aria-label="Direct link to workflowctxtsetevent" title="Direct link to workflowctxtsetevent">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">setEvent</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> NonNullable</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name builtin" style="color:#e6db74">any</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> value</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token keyword" style="color:#66d9ef">void</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Creates or updates an event named <code>key</code> with value <code>value</code>.
Workflows and HTTP handlers can read events by calling <a href="#handlerctxtgetevent"><code>getEvent</code></a> with the workflow&#x27;s UUID.
Events are mutable.  Attempting to emit an event twice from a given workflow instance will update the value, but care should be taken to ensure that the value is calculated deterministically for consistency when workflows are recovered.
For more information, see the <a href="/typescript/tutorials/workflow-tutorial#workflow-events">events API tutorial</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowctxtgetevent"><code>workflowCtxt.getEvent</code><a href="#workflowctxtgetevent" class="hash-link" aria-label="Direct link to workflowctxtgetevent" title="Direct link to workflowctxtgetevent">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">getEvent</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> NonNullable</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name builtin" style="color:#e6db74">any</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">workflowID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> timeoutSeconds</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">null</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Retrieves an event published by <code>workflowID</code> for a given key using the <a href="/typescript/tutorials/workflow-tutorial#workflow-events">events API</a>.
Awaiting on the promise returned by <code>getEvent()</code> waits for the workflow to set the key, returning <code>null</code> if the wait times out.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowctxtretrieveworkflow"><code>workflowCtxt.retrieveWorkflow</code><a href="#workflowctxtretrieveworkflow" class="hash-link" aria-label="Direct link to workflowctxtretrieveworkflow" title="Direct link to workflowctxtretrieveworkflow">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">retrieveWorkflow</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">workflowID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowHandle</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Returns a <a href="/typescript/reference/transactapi/workflow-handles">workflow handle</a> to the workflow with <a href="/typescript/tutorials/workflow-tutorial#workflow-ids">identity</a> <em>workflowID</em>.
<code>R</code> is the return type of the target workflow.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowcontextsleep"><code>WorkflowContext.sleep</code><a href="#workflowcontextsleep" class="hash-link" aria-label="Direct link to workflowcontextsleep" title="Direct link to workflowcontextsleep">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">sleep</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">durationSec</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token keyword" style="color:#66d9ef">void</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Sleep for <code>durationSec</code> seconds.
The wakeup time is set in the database when the function is first called, so if the workflow is re-executed, it will not oversleep.</p>
<p>Alternatively, <a href="#workflowcontextsleepms"><code>sleepms</code></a> is more precise.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflowcontextsleepms"><code>WorkflowContext.sleepms</code><a href="#workflowcontextsleepms" class="hash-link" aria-label="Direct link to workflowcontextsleepms" title="Direct link to workflowcontextsleepms">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">sleepms</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">durationMS</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token keyword" style="color:#66d9ef">void</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Sleep for <code>durationMS</code> milliseconds.
The wakeup time is set in the database when the function is first called, so if the workflow is re-executed, it will not oversleep.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="transactioncontextt"><code>TransactionContext&lt;T&gt;</code><a href="#transactioncontextt" class="hash-link" aria-label="Direct link to transactioncontextt" title="Direct link to transactioncontextt">​</a></h2>
<p>Transactions use <code>TransactionContext</code> to interact with the database.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generic-type-parameter">Generic Type Parameter<a href="#generic-type-parameter" class="hash-link" aria-label="Direct link to Generic Type Parameter" title="Direct link to Generic Type Parameter">​</a></h3>
<p><code>TransactionContext</code> is typed generically based on the application database client in use.
The application database client is configurable in a project&#x27;s <a href="/typescript/reference/configuration">configuration file</a> (<code>app_db_client</code>).
DBOS currently supports the following clients:</p>
<p><strong><a href="/typescript/tutorials/orms/using-knex">Knex</a></strong></p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> Knex </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;knex&quot;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">exampleTransaction</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctxt</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> TransactionContext</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">Knex</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong><a href="/typescript/tutorials/orms/using-typeorm">TypeORM</a></strong></p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> EntityManager </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;typeorm&quot;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">exampleTransaction</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctxt</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> TransactionContext</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">EntityManager</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong><a href="/typescript/tutorials/orms/using-prisma">Prisma</a></strong></p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> PrismaClient </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;@prisma/client&quot;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">exampleTransaction</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctxt</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> TransactionContext</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">PrismaClient</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong><a href="/typescript/tutorials/orms/using-drizzle">Drizzle</a></strong></p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> NodePgDatabase </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;drizzle-orm/node-postgres&#x27;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">exampleTransaction</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ctxt</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> TransactionContext</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">NodePgDatabase</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="properties-2">Properties<a href="#properties-2" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties">​</a></h3>
<ul>
<li><a href="#transactionctxtclient">client</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="transactionctxtclient"><code>transactionCtxt.client</code><a href="#transactionctxtclient" class="hash-link" aria-label="Direct link to transactionctxtclient" title="Direct link to transactionctxtclient">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">client</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// One of [Knex, EntityManager, PrismaClient, NodePgDatabase]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Provides access to the chosen application database client.
A transaction function should only interact with the application database using this client.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="storedprocedurecontext"><code>StoredProcedureContext</code><a href="#storedprocedurecontext" class="hash-link" aria-label="Direct link to storedprocedurecontext" title="Direct link to storedprocedurecontext">​</a></h2>
<p>Stored procedures use StoredProcedureContext to interact with the database.</p>
<ul>
<li><a href="#storedprocctxtquery">query</a></li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>While <code>StoredProcedureContext</code> supports most of the <a href="#dboscontext"><code>DBOSContext</code></a> methods, it does not support
either the <a href="#ctxtspan"><code>span</code></a> property or the <a href="#ctxtgetconfig"><code>getConfig&lt;T&gt;</code></a> method.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods-3">Methods<a href="#methods-3" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="storedprocctxtquery"><code>storedProcCtxt.query</code><a href="#storedprocctxtquery" class="hash-link" aria-label="Direct link to storedprocctxtquery" title="Direct link to storedprocctxtquery">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">type</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">QueryResult</span><span class="token class-name operator" style="color:#66d9ef">&lt;</span><span class="token class-name" style="color:#e6db74">TRow</span><span class="token class-name operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  rowCount</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  rows</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> TRow</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token generic-function function" style="color:#e6db74">query</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name" style="color:#e6db74">TRow</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">sql</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain">params</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">unknown</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">QueryResult</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">TRow</span><span class="token operator" style="color:#66d9ef">&gt;&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Execute a query against the database.
Returns an object with query result rows (if any) and the number of rows affected by the query.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="stepcontext"><code>StepContext</code><a href="#stepcontext" class="hash-link" aria-label="Direct link to stepcontext" title="Direct link to stepcontext">​</a></h2>
<p>Steps use <code>StepContext</code> to retrieve configuration information.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="properties-3">Properties<a href="#properties-3" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties">​</a></h4>
<ul>
<li><a href="#stepctxtretriesallowed">retriesAllowed</a></li>
<li><a href="#stepctxtmaxattempts">maxAttempts</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="stepctxtretriesallowed"><code>stepCtxt.retriesAllowed</code><a href="#stepctxtretriesallowed" class="hash-link" aria-label="Direct link to stepctxtretriesallowed" title="Direct link to stepctxtretriesallowed">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> retriesAllowed</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">boolean</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Whether the step is automatically retried on failure.
Configurable through the <a href="/typescript/reference/transactapi/oldapi/decorators#step"><code>@Step</code></a> decorator.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="stepctxtmaxattempts"><code>stepCtxt.maxAttempts</code><a href="#stepctxtmaxattempts" class="hash-link" aria-label="Direct link to stepctxtmaxattempts" title="Direct link to stepctxtmaxattempts">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> maxAttempts</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Maximum number of retries for the step.
Configurable through the <a href="/typescript/reference/transactapi/oldapi/decorators#step"><code>@Step</code></a> decorator.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="communicatorcontext"><code>CommunicatorContext</code><a href="#communicatorcontext" class="hash-link" aria-label="Direct link to communicatorcontext" title="Direct link to communicatorcontext">​</a></h2>
<p><code>CommunicatorContext</code> is a historical synonym for <a href="#stepcontext"><code>StepContext</code></a>, as steps are frequently used to communicate with external systems.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="initcontext"><code>InitContext</code><a href="#initcontext" class="hash-link" aria-label="Direct link to initcontext" title="Direct link to initcontext">​</a></h2>
<p><a href="/typescript/reference/transactapi/oldapi/decorators#dbosinitializer">Class initialization functions</a> and instance <code>initialize()</code> methods are provided with an <code>InitContext</code>, which provides access to configuration information, database access, and a logging facility.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="properties-and-methods">Properties and Methods<a href="#properties-and-methods" class="hash-link" aria-label="Direct link to Properties and Methods" title="Direct link to Properties and Methods">​</a></h4>
<ul>
<li><a href="#initcontextlogger">logger</a></li>
<li><a href="#initcontextqueryuserdb">queryuserdb</a></li>
<li><a href="#initcontextgetconfig">getconfig</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="initcontextlogger"><code>InitContext.logger</code><a href="#initcontextlogger" class="hash-link" aria-label="Direct link to initcontextlogger" title="Direct link to initcontextlogger">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> logger</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Logger</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>logger</code> is available to record any interesting successes, failures, or diagnostic information that occur during initialization.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="initcontextqueryuserdb"><code>InitContext.queryUserDB</code><a href="#initcontextqueryuserdb" class="hash-link" aria-label="Direct link to initcontextqueryuserdb" title="Direct link to initcontextqueryuserdb">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">queryUserDB</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">sql</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain">params</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">unknown</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Accesses the user database directly with SQL.  This approach is to be used with caution, as using a string to represent SQL is not fully database independent and careless formation of the string can lead to SQL injection vulnerabilities.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="initcontextgetconfig"><code>InitContext.getConfig</code><a href="#initcontextgetconfig" class="hash-link" aria-label="Direct link to initcontextgetconfig" title="Direct link to initcontextgetconfig">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">getConfig</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> defaultValue</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">undefined</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>getConfig</code> retrieves configuration information (from .yaml config file / environment).  If <code>key</code> is not present in the configuration, <code>defaultValue</code> is returned.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="middlewarecontext"><code>MiddlewareContext</code><a href="#middlewarecontext" class="hash-link" aria-label="Direct link to middlewarecontext" title="Direct link to middlewarecontext">​</a></h2>
<p><code>MiddlewareContext</code> is provided to functions that execute against a request before entry into handler, transaction, and workflow functions.  These middleware functions are generally executed before, or in the process of, user authentication, request validation, etc.  The context is intended to provide read-only database access, logging services, and configuration information.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="properties-and-methods-1">Properties and Methods<a href="#properties-and-methods-1" class="hash-link" aria-label="Direct link to Properties and Methods" title="Direct link to Properties and Methods">​</a></h4>
<ul>
<li><a href="#middlewarecontextlogger">logger</a></li>
<li><a href="#middlewarecontextspan">span</a></li>
<li><a href="#middlewarecontextkoacontext">koaContext</a></li>
<li><a href="#middlewarecontextname">name</a></li>
<li><a href="#middlewarecontextrequiredrole">requiredRole</a></li>
<li><a href="#middlewarecontextgetconfig">getConfig</a></li>
<li><a href="#middlewarecontextquery">query</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="middlewarecontextlogger"><code>MiddlewareContext.logger</code><a href="#middlewarecontextlogger" class="hash-link" aria-label="Direct link to middlewarecontextlogger" title="Direct link to middlewarecontextlogger">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> logger</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBOSLogger</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>logger</code> is available to record any interesting successes, failures, or diagnostic information that occur during middleware processing.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="middlewarecontextspan"><code>MiddlewareContext.span</code><a href="#middlewarecontextspan" class="hash-link" aria-label="Direct link to middlewarecontextspan" title="Direct link to middlewarecontextspan">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> span</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Span</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>span</code> is the tracing span in which the middleware is being executed.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="middlewarecontextkoacontext"><code>MiddlewareContext.koaContext</code><a href="#middlewarecontextkoacontext" class="hash-link" aria-label="Direct link to middlewarecontextkoacontext" title="Direct link to middlewarecontextkoacontext">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> koaContext</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Koa</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>koaContext</code> is the Koa context, which contains the inbound HTTP request associated with the middleware invocation.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="middlewarecontextname"><code>MiddlewareContext.name</code><a href="#middlewarecontextname" class="hash-link" aria-label="Direct link to middlewarecontextname" title="Direct link to middlewarecontextname">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> name</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>name</code> contains the name of the function (handler, transaction, workflow) to be invoked after successful middleware processing.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="middlewarecontextrequiredrole"><code>MiddlewareContext.requiredRole</code><a href="#middlewarecontextrequiredrole" class="hash-link" aria-label="Direct link to middlewarecontextrequiredrole" title="Direct link to middlewarecontextrequiredrole">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> requiredRole</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>requiredRole</code> contains the list of roles required for the invoked operation.  Access to the function will granted if the user has any role on the list.  If the list is empty, it means there are no authorization requirements and may indicate that authentication is not required.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="middlewarecontextgetconfig"><code>MiddlewareContext.getConfig</code><a href="#middlewarecontextgetconfig" class="hash-link" aria-label="Direct link to middlewarecontextgetconfig" title="Direct link to middlewarecontextgetconfig">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">getConfig</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> deflt</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">undefined</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">undefined</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>getConfig</code> retrieves configuration information (from .yaml config file / environment).  If <code>key</code> is not present in the configuration, <code>defaultValue</code> is returned.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="middlewarecontextquery"><code>MiddlewareContext.query</code><a href="#middlewarecontextquery" class="hash-link" aria-label="Direct link to middlewarecontextquery" title="Direct link to middlewarecontextquery">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token generic-function function" style="color:#e6db74">query</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">C</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> UserDatabaseClient</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">,</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">,</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name builtin" style="color:#e6db74">unknown</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">[</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">]</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token function-variable function" style="color:#e6db74">qry</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">dbclient</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">C</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>query</code> function provides read access to the database.
To provide a scoped database connection and to ensure cleanup, the <code>query</code> API works via a callback function.
The application is to pass in a <code>qry</code> function that will be executed in a context with access to the database client <code>dbclient</code>.
The provided <code>dbClient</code> will be a <code>Knex</code> or TypeORM <code>EntityManager</code> or <code>PrismaClient</code> depending on the application&#x27;s choice of SQL access library.
This callback function may take arguments, and return a value.</p>
<p>Example, for Knex:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> u </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">await</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">query</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// The qry function that takes in a dbClient and a list of arguments (uname in this case)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">dbClient</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Knex</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> uname</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token generic-function function" style="color:#e6db74">dbClient</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name" style="color:#e6db74">UserTable</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">userTableName</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">select</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;username&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">where</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> username</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> uname </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    userName </span><span class="token comment" style="color:#8292a2;font-style:italic">// Input value for the uname argument</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontext"><code>DBOSExecutorContext</code><a href="#dbosexecutorcontext" class="hash-link" aria-label="Direct link to dbosexecutorcontext" title="Direct link to dbosexecutorcontext">​</a></h2>
<p>The <code>DBOSExecutorContext</code> is used by event receivers to get their configuration information and invoke workflows, transactions, or communicators in response to received events.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">DBOSExecutorContext</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> logger</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Logger</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> tracer</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Tracer</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">getRegistrationsFor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">eri</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBOSEventReceiver</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBOSEventReceiverRegistration</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token generic-function function" style="color:#e6db74">workflow</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name builtin" style="color:#e6db74">unknown</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">[</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">]</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">,</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">wf</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowFunction</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> params</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowParams</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">WorkflowHandle</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token generic-function function" style="color:#e6db74">transaction</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name builtin" style="color:#e6db74">unknown</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">[</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">]</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">,</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">txnFn</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> TransactionFunction</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> params</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowParams</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token generic-function function" style="color:#e6db74">external</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name builtin" style="color:#e6db74">unknown</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">[</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">]</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">,</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">stepFn</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> StepFunction</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> params</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowParams</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token generic-function function" style="color:#e6db74">send</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">destinationUUID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> message</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> topic</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> idempotencyKey</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token keyword" style="color:#66d9ef">void</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token generic-function function" style="color:#e6db74">getEvent</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">workflowID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> timeoutSeconds</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">null</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token generic-function function" style="color:#e6db74">retrieveWorkflow</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">workflowID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowHandle</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">getEventDispatchState</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">svc</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> wfn</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">DBOSEventReceiverState </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">undefined</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">upsertEventDispatchState</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">state</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBOSEventReceiverState</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">DBOSEventReceiverState</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">queryUserDB</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">sql</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> params</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">unknown</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token builtin" style="color:#e6db74">unknown</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">userDBListen</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">channels</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> callback</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBNotificationCallback</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">DBNotificationListener</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="properties-and-methods-2">Properties and Methods<a href="#properties-and-methods-2" class="hash-link" aria-label="Direct link to Properties and Methods" title="Direct link to Properties and Methods">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextlogger"><code>DBOSExecutorContext.logger</code><a href="#dbosexecutorcontextlogger" class="hash-link" aria-label="Direct link to dbosexecutorcontextlogger" title="Direct link to dbosexecutorcontextlogger">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> logger</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Logger</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A reference to DBOS&#x27;s global logger.  Event receivers may log information related to event dispatch to this logger.
Please see our <a href="/typescript/tutorials/logging">logging tutorial</a> for more information.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontexttracer"><code>DBOSExecutorContext.tracer</code><a href="#dbosexecutorcontexttracer" class="hash-link" aria-label="Direct link to dbosexecutorcontexttracer" title="Direct link to dbosexecutorcontexttracer">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">readonly</span><span class="token plain"> tracer</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> Tracer</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A reference to DBOS&#x27;s tracer.  Event receivers may initiate or propagate tracing information via <code>tracer</code>.
Please see our <a href="/typescript/tutorials/logging">logging tutorial</a> for more information.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextgetconfig"><code>DBOSExecutorContext.getConfig</code><a href="#dbosexecutorcontextgetconfig" class="hash-link" aria-label="Direct link to dbosexecutorcontextgetconfig" title="Direct link to dbosexecutorcontextgetconfig">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">getConfig</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> defaultValue</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">undefined</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">undefined</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>getConfig</code> retrieves configuration information (from .yaml config file / environment).  If <code>key</code> is not present in the configuration, <code>defaultValue</code> is returned.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextgetregistrationsfor"><code>DBOSExecutorContext.getRegistrationsFor</code><a href="#dbosexecutorcontextgetregistrationsfor" class="hash-link" aria-label="Direct link to dbosexecutorcontextgetregistrationsfor" title="Direct link to dbosexecutorcontextgetregistrationsfor">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">DBOSEventReceiverRegistration</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  methodConfig</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">unknown</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  classConfig</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">unknown</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  methodReg</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> MethodRegistrationBase</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">getRegistrationsFor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">eri</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBOSEventReceiver</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBOSEventReceiverRegistration</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>getRegistrationsFor</code> provides a list of all method registrations associated with the specified <code>DBOSEventReceiver</code>.  Each method registration includes configuration and dispatch information:</p>
<ul>
<li><code>classConfig</code>: Any configuration information collected by class-level decorators</li>
<li><code>methodConfig</code>: Any configuration information collected by method-level decorators</li>
<li><code>methodReg</code>: Reference to the method to be called for each event</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextworkflow"><code>DBOSExecutorContext.workflow</code><a href="#dbosexecutorcontextworkflow" class="hash-link" aria-label="Direct link to dbosexecutorcontextworkflow" title="Direct link to dbosexecutorcontextworkflow">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">workflow</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name builtin" style="color:#e6db74">unknown</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">[</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">]</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">,</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  wf</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowFunction</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> params</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowParams</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">WorkflowHandle</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Invokes the provided <code>wf</code> workflow function, with inputs specified by <code>args</code>.  The <code>WorkflowParams</code> control how the workflow is started:</p>
<ul>
<li><code>WorkflowParams.workflowUUID</code>: Set the workflow <a href="/typescript/tutorials/idempotency-tutorial">idempotency key</a>, for OAOO.</li>
<li><code>WorkflowParams.queueName</code>: Indicate that the workflow is to be run in a <a href="/typescript/reference/transactapi/workflow-queues#class-workflowqueue">queue</a>, with the provided name.  The queue with the provided <code>queueName</code> must have been created and registered prior to executing <code>workflow</code>, as the queue provides necessary concurrency and rate-limiting information.</li>
</ul>
<p>The return value of <code>workflow</code> is a <a href="/typescript/reference/transactapi/workflow-handles"><code>WorkflowHandle</code></a> for the running or queued workflow.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontexttransaction"><code>DBOSExecutorContext.transaction</code><a href="#dbosexecutorcontexttransaction" class="hash-link" aria-label="Direct link to dbosexecutorcontexttransaction" title="Direct link to dbosexecutorcontexttransaction">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">transaction</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name builtin" style="color:#e6db74">unknown</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">[</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">]</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">,</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  txnFn</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> TransactionFunction</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> params</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowParams</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Invokes a single-operation workflow consisting of the provided <code>txnFn</code> function, with inputs specified by <code>args</code>.  For additional information, see <a href="#dbosexecutorcontextworkflow"><code>DBOSExecutorContext.workflow</code></a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextexternal"><code>DBOSExecutorContext.external</code><a href="#dbosexecutorcontextexternal" class="hash-link" aria-label="Direct link to dbosexecutorcontextexternal" title="Direct link to dbosexecutorcontextexternal">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">external</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name builtin" style="color:#e6db74">unknown</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">[</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">]</span><span class="token generic-function generic class-name punctuation" style="color:#f8f8f2">,</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  stepFn</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> StepFunction</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> params</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowParams</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Invokes a single-operation workflow consisting of the provided <code>stepFn</code> function, with inputs specified by <code>args</code>.  For additional information on <code>WorkflowParams</code>, see <a href="#dbosexecutorcontextworkflow"><code>DBOSExecutorContext.workflow</code></a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextsend"><code>DBOSExecutorContext.send</code><a href="#dbosexecutorcontextsend" class="hash-link" aria-label="Direct link to dbosexecutorcontextsend" title="Direct link to dbosexecutorcontextsend">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">send</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> NonNullable</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name builtin" style="color:#e6db74">any</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">destinationID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> message</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">T</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> topic</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> idempotencyKey</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token keyword" style="color:#66d9ef">void</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Sends a message to the workflow identified by <code>destinationID</code>.
Messages can optionally be associated with a topic.
You can provide an optional idempotency key to guarantee only a single message is sent even if <code>send</code> is called more than once.
For more information, see the <a href="/typescript/tutorials/workflow-tutorial#workflow-messaging-and-notifications">messages API tutorial</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextgetevent"><code>DBOSExecutorContext.getEvent</code><a href="#dbosexecutorcontextgetevent" class="hash-link" aria-label="Direct link to dbosexecutorcontextgetevent" title="Direct link to dbosexecutorcontextgetevent">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">getEvent</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">T</span><span class="token generic-function generic class-name" style="color:#e6db74"> </span><span class="token generic-function generic class-name keyword" style="color:#66d9ef">extends</span><span class="token generic-function generic class-name" style="color:#e6db74"> NonNullable</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name builtin" style="color:#e6db74">any</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">workflowID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> timeoutSeconds</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">T</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">null</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Retrieves an event published by <code>workflowID</code> for a given key using the <a href="/typescript/tutorials/workflow-tutorial#workflow-events">events API</a>.
Awaiting on the promise returned by <code>getEvent()</code> waits for the workflow to set the key, returning <code>null</code> if the wait times out.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextretrieveworkflow"><code>DBOSExecutorContext.retrieveWorkflow</code><a href="#dbosexecutorcontextretrieveworkflow" class="hash-link" aria-label="Direct link to dbosexecutorcontextretrieveworkflow" title="Direct link to dbosexecutorcontextretrieveworkflow">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token generic-function function" style="color:#e6db74">retrieveWorkflow</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&lt;</span><span class="token generic-function generic class-name constant" style="color:#e6db74">R</span><span class="token generic-function generic class-name operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">workflowID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> WorkflowHandle</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token constant" style="color:#e6db74">R</span><span class="token operator" style="color:#66d9ef">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Returns a <a href="/typescript/reference/transactapi/workflow-handles">workflow handle</a> to the workflow with <a href="/typescript/tutorials/workflow-tutorial#workflow-ids">identity</a> <code>workflowID</code>.
<code>R</code> is the return type of the target workflow.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextupserteventdispatchstate"><code>DBOSExecutorContext.upsertEventDispatchState</code><a href="#dbosexecutorcontextupserteventdispatchstate" class="hash-link" aria-label="Direct link to dbosexecutorcontextupserteventdispatchstate" title="Direct link to dbosexecutorcontextupserteventdispatchstate">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">upsertEventDispatchState</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">state</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBOSEventReceiverState</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">DBOSEventReceiverState</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">DBOSEventReceiverState</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  service</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  workflowFnName</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  value</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  updateTime</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">number</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  updateSeq</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> bigint</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>An event receiver may keep state in the system database.  This state may be helpful for backfilling events that came in while the event receiver was not running.  This state uses a key/value store design, where the event receiver may use <code>upsertEventDispatchState</code> to insert/update the value associated with a key, and retrieve the value associated with a key.  This implementation also supports the notion of an update time or update sequence; updates made with lower sequence numbers or times are discared if the existing entry is marked with a later sequence / time.</p>
<p>The key consists of:</p>
<ul>
<li><code>service</code>: <code>service</code> should be unique to the event receiver keeping state, to separate from other table users</li>
<li><code>workflowFnName</code>: <code>workflowFnName</code> workflow function name should be the fully qualified / unique function name dispatched, to keep state separate by event function</li>
<li><code>key</code>: The <code>key</code> field allows multiple records per service / workflow function</li>
</ul>
<p>The value stored for each <code>service</code>/<code>workflowFnName</code>/<code>key</code> combination includes:</p>
<ul>
<li><code>value</code>: <code>value</code> is a string value.  JSON can be used to encode more complex values.</li>
<li><code>updateTime</code>: The time <code>value</code> was set.  Upserts of records with an earlier <code>updateTime</code> will have no effect on the stored state.</li>
<li><code>updateSeq</code>: An integer number indicating when the value was set.  Upserts of records with a smaller <code>updateSeq</code> will have no effect on the stored state.</li>
</ul>
<p><code>upsertEventDispatchState</code> inserts a value associated with a key.  If a value is already associated with the specified key, the stored value will be updated, unless <code>updateTime</code> or <code>updateSeq</code> is provided, and is less that what is already stored in the system database.</p>
<p>The function return value indicates the contents of the system database for the specified key.  This is useful to detect if a more recent record is alreadys stored in the database.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextgeteventdispatchstate"><code>DBOSExecutorContext.getEventDispatchState</code><a href="#dbosexecutorcontextgeteventdispatchstate" class="hash-link" aria-label="Direct link to dbosexecutorcontextgeteventdispatchstate" title="Direct link to dbosexecutorcontextgeteventdispatchstate">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">getEventDispatchState</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">service</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> workflowFnName</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> key</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">DBOSEventReceiverState </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">undefined</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Retrieve the value set for an event receiver&#x27;s key, as stored by <a href="#dbosexecutorcontextupserteventdispatchstate"><code>upsertEventDispatchState</code></a> above.  If no value has been associated with the combination of <code>service</code>/<code>workflowFnName</code>/<code>key</code> above, then <code>undefined</code> is returned.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextqueryuserdb"><code>DBOSExecutorContext.queryUserDB</code><a href="#dbosexecutorcontextqueryuserdb" class="hash-link" aria-label="Direct link to dbosexecutorcontextqueryuserdb" title="Direct link to dbosexecutorcontextqueryuserdb">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">queryUserDB</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">sql</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> params</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">unknown</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token builtin" style="color:#e6db74">unknown</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Executes the provided <code>sql</code> template against the default user application database, using <code>params</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dbosexecutorcontextuserdblisten"><code>DBOSExecutorContext.userDBListen</code><a href="#dbosexecutorcontextuserdblisten" class="hash-link" aria-label="Direct link to dbosexecutorcontextuserdblisten" title="Direct link to dbosexecutorcontextuserdblisten">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">DBNotification</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    channel</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    payload</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">type</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">DBNotificationCallback</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">n</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBNotification</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">void</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">DBNotificationListener</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">close</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token keyword" style="color:#66d9ef">void</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">userDBListen</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">channels</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> callback</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBNotificationCallback</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">Promise</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">DBNotificationListener</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>userDBListen</code> listens for notifications within the default user application database:</p>
<ul>
<li><code>channels</code> is a list of notification channels of interest</li>
<li><code>callback</code> will be executed for each notification received
The return value of <code>userDBListen</code> is a <code>DBNotificationListener</code> which should be used to <code>close</code> the listener and stop the listening operation cleanly.</li>
</ul>
<p><code>callback</code> is the function that will be called when notifications arrive; it is provided with a <code>DBNotification</code> containing the <code>channel</code> and optional <code>payload</code> of the received notification.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="information-available-outside-of-contexts">Information Available Outside Of Contexts<a href="#information-available-outside-of-contexts" class="hash-link" aria-label="Direct link to Information Available Outside Of Contexts" title="Direct link to Information Available Outside Of Contexts">​</a></h2>
<p>While most code is executed within one of the numerous DBOS contexts, there are a few exceptions, such as the HTTP server, its non-DBOS middleware, or background tasks.  For these cases, it is possible to access the <code>globalLogger</code> and <code>dbosConfig</code> from a global location:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">DBOS</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;@dbos-inc/dbos-sdk&quot;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">myFunc</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token constant" style="color:#e6db74">DBOS</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">globalLogger</span><span class="token operator" style="color:#66d9ef">?.</span><span class="token function" style="color:#e6db74">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">There is no context here, but I need to log something anyway!</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token template-string string" style="color:#a6e22e">                    My config is &#x27;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">${</span><span class="token template-string interpolation">dbosConfig</span><span class="token template-string interpolation operator" style="color:#66d9ef">?.</span><span class="token template-string interpolation">application</span><span class="token template-string interpolation operator" style="color:#66d9ef">?.</span><span class="token template-string interpolation">myvalue</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">}</span><span class="token template-string string" style="color:#a6e22e">&#x27;</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The definition of <code>DBOS</code> is:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name constant" style="color:#e6db74">DBOS</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> globalLogger</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> GlobalLogger</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// The global logger</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> dbosConfig</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> DBOSConfig</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// The global DBOS configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that <code>DBOS</code> is not fully available util runtime initialization starts.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/typescript/reference/transactapi/workflow-queues"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Workflow Queues</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/typescript/reference/transactapi/oldapi/decorators"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Decorators</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li><li><a href="#dboscontext" class="table-of-contents__link toc-highlight"><code>DBOSContext</code></a><ul><li><a href="#properties" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a><ul><li><a href="#ctxtrequest" class="table-of-contents__link toc-highlight"><code>ctxt.request</code></a></li><li><a href="#ctxtworkflowuuid" class="table-of-contents__link toc-highlight"><code>ctxt.workflowUUID</code></a></li><li><a href="#ctxtauthenticateduser" class="table-of-contents__link toc-highlight"><code>ctxt.authenticatedUser</code></a></li><li><a href="#ctxtauthenticatedroles" class="table-of-contents__link toc-highlight"><code>ctxt.authenticatedRoles</code></a></li><li><a href="#ctxtassumedrole" class="table-of-contents__link toc-highlight"><code>ctxt.assumedRole</code></a></li><li><a href="#ctxtlogger" class="table-of-contents__link toc-highlight"><code>ctxt.logger</code></a></li><li><a href="#ctxtspan" class="table-of-contents__link toc-highlight"><code>ctxt.span</code></a></li><li><a href="#ctxtgetconfig" class="table-of-contents__link toc-highlight"><code>ctxt.getConfig</code></a></li></ul></li></ul></li><li><a href="#handlercontext" class="table-of-contents__link toc-highlight"><code>HandlerContext</code></a><ul><li><a href="#properties-1" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#methods-1" class="table-of-contents__link toc-highlight">Methods</a><ul><li><a href="#handlerctxtkoacontext" class="table-of-contents__link toc-highlight"><code>handlerCtxt.koaContext</code></a></li><li><a href="#handlerctxtinvoke" class="table-of-contents__link toc-highlight"><code>handlerCtxt.invoke</code></a></li><li><a href="#handlerctxtinvokeworkflow" class="table-of-contents__link toc-highlight"><code>handlerCtxt.invokeWorkflow</code></a></li><li><a href="#handlerctxtstartworkflow" class="table-of-contents__link toc-highlight"><code>handlerCtxt.startWorkflow</code></a></li><li><a href="#handlerctxtretrieveworkflow" class="table-of-contents__link toc-highlight"><code>handlerCtxt.retrieveWorkflow</code></a></li><li><a href="#handlerctxtsend" class="table-of-contents__link toc-highlight"><code>handlerCtxt.send</code></a></li><li><a href="#handlerctxtgetevent" class="table-of-contents__link toc-highlight"><code>handlerCtxt.getEvent</code></a></li><li><a href="#handlerctxtgetworkflows" class="table-of-contents__link toc-highlight"><code>handlerCtxt.getWorkflows</code></a></li></ul></li></ul></li><li><a href="#workflowcontext" class="table-of-contents__link toc-highlight"><code>WorkflowContext</code></a><ul><li><a href="#methods-2" class="table-of-contents__link toc-highlight">Methods</a><ul><li><a href="#workflowctxtinvoke" class="table-of-contents__link toc-highlight"><code>workflowCtxt.invoke</code></a></li><li><a href="#workflowctxtinvokeworkflow" class="table-of-contents__link toc-highlight"><code>workflowCtxt.invokeWorkflow</code></a></li><li><a href="#workflowctxtstartworkflow" class="table-of-contents__link toc-highlight"><code>workflowCtxt.startWorkflow</code></a></li><li><a href="#workflowctxtinvokechildworkflow" class="table-of-contents__link toc-highlight"><code>workflowCtxt.invokeChildWorkflow</code></a></li><li><a href="#workflowctxtstartchildworkflow" class="table-of-contents__link toc-highlight"><code>workflowCtxt.startChildWorkflow</code></a></li><li><a href="#workflowctxtsend" class="table-of-contents__link toc-highlight"><code>workflowCtxt.send</code></a></li><li><a href="#workflowctxtrecv" class="table-of-contents__link toc-highlight"><code>workflowCtxt.recv</code></a></li><li><a href="#workflowctxtsetevent" class="table-of-contents__link toc-highlight"><code>workflowCtxt.setEvent</code></a></li><li><a href="#workflowctxtgetevent" class="table-of-contents__link toc-highlight"><code>workflowCtxt.getEvent</code></a></li><li><a href="#workflowctxtretrieveworkflow" class="table-of-contents__link toc-highlight"><code>workflowCtxt.retrieveWorkflow</code></a></li><li><a href="#workflowcontextsleep" class="table-of-contents__link toc-highlight"><code>WorkflowContext.sleep</code></a></li><li><a href="#workflowcontextsleepms" class="table-of-contents__link toc-highlight"><code>WorkflowContext.sleepms</code></a></li></ul></li></ul></li><li><a href="#transactioncontextt" class="table-of-contents__link toc-highlight"><code>TransactionContext&lt;T&gt;</code></a><ul><li><a href="#generic-type-parameter" class="table-of-contents__link toc-highlight">Generic Type Parameter</a></li><li><a href="#properties-2" class="table-of-contents__link toc-highlight">Properties</a><ul><li><a href="#transactionctxtclient" class="table-of-contents__link toc-highlight"><code>transactionCtxt.client</code></a></li></ul></li></ul></li><li><a href="#storedprocedurecontext" class="table-of-contents__link toc-highlight"><code>StoredProcedureContext</code></a><ul><li><a href="#methods-3" class="table-of-contents__link toc-highlight">Methods</a><ul><li><a href="#storedprocctxtquery" class="table-of-contents__link toc-highlight"><code>storedProcCtxt.query</code></a></li></ul></li></ul></li><li><a href="#stepcontext" class="table-of-contents__link toc-highlight"><code>StepContext</code></a><ul><li><a href="#properties-3" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#stepctxtretriesallowed" class="table-of-contents__link toc-highlight"><code>stepCtxt.retriesAllowed</code></a></li><li><a href="#stepctxtmaxattempts" class="table-of-contents__link toc-highlight"><code>stepCtxt.maxAttempts</code></a></li></ul></li><li><a href="#communicatorcontext" class="table-of-contents__link toc-highlight"><code>CommunicatorContext</code></a></li><li><a href="#initcontext" class="table-of-contents__link toc-highlight"><code>InitContext</code></a><ul><li><a href="#properties-and-methods" class="table-of-contents__link toc-highlight">Properties and Methods</a></li><li><a href="#initcontextlogger" class="table-of-contents__link toc-highlight"><code>InitContext.logger</code></a></li><li><a href="#initcontextqueryuserdb" class="table-of-contents__link toc-highlight"><code>InitContext.queryUserDB</code></a></li><li><a href="#initcontextgetconfig" class="table-of-contents__link toc-highlight"><code>InitContext.getConfig</code></a></li></ul></li><li><a href="#middlewarecontext" class="table-of-contents__link toc-highlight"><code>MiddlewareContext</code></a><ul><li><a href="#properties-and-methods-1" class="table-of-contents__link toc-highlight">Properties and Methods</a></li><li><a href="#middlewarecontextlogger" class="table-of-contents__link toc-highlight"><code>MiddlewareContext.logger</code></a></li><li><a href="#middlewarecontextspan" class="table-of-contents__link toc-highlight"><code>MiddlewareContext.span</code></a></li><li><a href="#middlewarecontextkoacontext" class="table-of-contents__link toc-highlight"><code>MiddlewareContext.koaContext</code></a></li><li><a href="#middlewarecontextname" class="table-of-contents__link toc-highlight"><code>MiddlewareContext.name</code></a></li><li><a href="#middlewarecontextrequiredrole" class="table-of-contents__link toc-highlight"><code>MiddlewareContext.requiredRole</code></a></li><li><a href="#middlewarecontextgetconfig" class="table-of-contents__link toc-highlight"><code>MiddlewareContext.getConfig</code></a></li><li><a href="#middlewarecontextquery" class="table-of-contents__link toc-highlight"><code>MiddlewareContext.query</code></a></li></ul></li><li><a href="#dbosexecutorcontext" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext</code></a><ul><li><a href="#properties-and-methods-2" class="table-of-contents__link toc-highlight">Properties and Methods</a><ul><li><a href="#dbosexecutorcontextlogger" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.logger</code></a></li><li><a href="#dbosexecutorcontexttracer" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.tracer</code></a></li><li><a href="#dbosexecutorcontextgetconfig" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.getConfig</code></a></li><li><a href="#dbosexecutorcontextgetregistrationsfor" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.getRegistrationsFor</code></a></li><li><a href="#dbosexecutorcontextworkflow" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.workflow</code></a></li><li><a href="#dbosexecutorcontexttransaction" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.transaction</code></a></li><li><a href="#dbosexecutorcontextexternal" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.external</code></a></li><li><a href="#dbosexecutorcontextsend" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.send</code></a></li><li><a href="#dbosexecutorcontextgetevent" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.getEvent</code></a></li><li><a href="#dbosexecutorcontextretrieveworkflow" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.retrieveWorkflow</code></a></li><li><a href="#dbosexecutorcontextupserteventdispatchstate" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.upsertEventDispatchState</code></a></li><li><a href="#dbosexecutorcontextgeteventdispatchstate" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.getEventDispatchState</code></a></li><li><a href="#dbosexecutorcontextqueryuserdb" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.queryUserDB</code></a></li><li><a href="#dbosexecutorcontextuserdblisten" class="table-of-contents__link toc-highlight"><code>DBOSExecutorContext.userDBListen</code></a></li></ul></li></ul></li><li><a href="#information-available-outside-of-contexts" class="table-of-contents__link toc-highlight">Information Available Outside Of Contexts</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Follow Us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/dbos-inc/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://bsky.app/profile/dbos.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bluesky<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/DBOS_Inc" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter/X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Learn More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.dbos.dev/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.dbos.dev/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Questions or Comments?</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/fMwQjeW5zg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat with us on Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:contact@dbos.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Write to us at contact@dbos.dev<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://dbos.dev" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/dbos-logo.png" alt="DBOS Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="100"><img src="/img/dbos-logo-dark.png" alt="DBOS Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="100"></a></div><div class="footer__copyright">Copyright © 2025 DBOS, Inc. | <a href="https://www.dbos.dev/privacy" target="_blank">Privacy Policy</a></div></div></div></footer></div>
</body>
</html>