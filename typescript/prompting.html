<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-typescript/prompting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">AI Model Prompting | DBOS Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.dbos.dev/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.dbos.dev/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.dbos.dev/typescript/prompting"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="AI Model Prompting | DBOS Docs"><meta data-rh="true" name="description" content="You may want assistance from an AI model in building a DBOS application."><meta data-rh="true" property="og:description" content="You may want assistance from an AI model in building a DBOS application."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.dbos.dev/typescript/prompting"><link data-rh="true" rel="alternate" href="https://docs.dbos.dev/typescript/prompting" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.dbos.dev/typescript/prompting" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UY2VKOMIL2-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"AI Model Prompting","item":"https://docs.dbos.dev/typescript/prompting"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="DBOS Docs" href="/opensearch.xml">


<link rel="preconnect" href="https://dbosdev.matomo.cloud/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://dbosdev.matomo.cloud/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script>

<link rel="preconnect" href="https://d2j9bas80r5yfz.cloudfront.net">
<script>!function(t,e){var o,r,s,a;e.__SV||(window.posthog=e,e._i=[],e.init=function(n,i,p){function c(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(s=t.createElement("script")).type="text/javascript",s.async=!0,s.src=i.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(a=t.getElementsByTagName("script")[0]).parentNode.insertBefore(s,a);var g=e;for(void 0!==p?g=e[p]=[]:p="posthog",g.people=g.people||[],g.toString=function(t){var e="posthog";return"posthog"!==p&&(e+="."+p),t||(e+=" (stub)"),e},g.people.toString=function(){return g.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys onSessionId".split(" "),r=0;r<o.length;r++)c(g,o[r]);e._i.push([n,i,p])},e.__SV=1)}(document,window.posthog||[]),posthog.init("phc_vKGgPmFevFB3QVyqZdIZeNqcWAPqk3i3mDhwGqwk6nP",{api_host:"https://d2j9bas80r5yfz.cloudfront.net",id:"default"})</script>
<script async defer="defer" id="hs-script-loader" src="//js.hs-scripts.com/45237820.js"></script><link rel="stylesheet" href="/assets/css/styles.8102221d.css">
<script src="/assets/js/runtime~main.67e63d24.js" defer="defer"></script>
<script src="/assets/js/main.0b4a52c4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://dbos.dev" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/dbos-logo.png" alt="DBOS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/dbos-logo-dark.png" alt="DBOS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a class="navbar__item navbar__link" href="/quickstart">Quickstart</a><a class="navbar__item navbar__link" href="/examples">Examples</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://console.dbos.dev/login-redirect" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link dbos-button-blue">DBOS Console</a><a href="https://github.com/dbos-inc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quickstart">Get Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/why-dbos">Why DBOS?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/architecture">DBOS Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/python/programming-guide">Develop with Python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/typescript/programming-guide">Develop with TypeScript</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/typescript/programming-guide">Learn DBOS TypeScript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/typescript/integrating-dbos">Add DBOS To Your App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/typescript/prompting">AI Model Prompting</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/typescript/tutorials/workflow-tutorial">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/typescript/reference/dbos-class">Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/typescript/examples/checkout-tutorial">Example Applications</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/typescript/upgrading">Upgrading to TSv3</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/production">Deploy To Production</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/integrations/supabase">Integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/explanations/system-tables">Concepts and Explanations</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/faq">Troubleshooting &amp; FAQ</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Develop with TypeScript</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">AI Model Prompting</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>AI Model Prompting</h1></header><p>You may want assistance from an AI model in building a DBOS application.
To make sure your model has the latest information on how to use DBOS, provide it with this prompt.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use">How To Use<a href="#how-to-use" class="hash-link" aria-label="Direct link to How To Use" title="Direct link to How To Use">​</a></h2>
<p>First, use the click-to-copy button in the top right of the code block to copy the full prompt to your clipboard.
Then, paste into your AI tool of choice (for example OpenAI&#x27;s ChatGPT or Anthropic&#x27;s Claude).
This adds the prompt to your AI model&#x27;s context, giving it up-to-date instructions on how to build an application with DBOS.</p>
<p>If you are using an AI-powered IDE, you can add this prompt to your project&#x27;s context.
For example:</p>
<ul>
<li>Claude Code: Add the prompt, or a link to it, to your CLAUDE.md file.</li>
<li>Cursor: Add the prompt to <a href="https://docs.cursor.com/context/rules-for-ai" target="_blank" rel="noopener noreferrer">your project rules</a>.</li>
<li>Zed: Copy the prompt to a file in your project, then use the <a href="https://zed.dev/docs/assistant/commands?highlight=%2Ffile#file" target="_blank" rel="noopener noreferrer"><code>/file</code></a> command to add the file to your context.</li>
<li>GitHub Copilot: Create a <a href="https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot" target="_blank" rel="noopener noreferrer"><code>.github/copilot-instructions.md</code></a> file in your repository and add the prompt to it.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prompt">Prompt<a href="#prompt" class="hash-link" aria-label="Direct link to Prompt" title="Direct link to Prompt">​</a></h2>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token title important punctuation" style="color:#f8f8f2">#</span><span class="token title important"> Build Reliable Applications With DBOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Guidelines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Respond in a friendly and concise manner</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Ask clarifying questions when requirements are ambiguous</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Generate code in TypeScript using the DBOS library. Make sure to fully type everything.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> You MUST import all methods and classes used in the code you generate</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> You SHALL keep all code in a single file unless otherwise specified.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> You MUST await all promises.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> DBOS does NOT stand for anything.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Guidelines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows provide durable execution so you can write programs that are resilient to any failure.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows are comprised of steps, which are ordinary TypeScript functions called with DBOS.runStep().</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When using DBOS workflows, you should call any function that performs complex operations or accesses external APIs or services as a step using DBOS.runStep.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If a workflow is interrupted for any reason (e.g., an executor restarts or crashes), when your program restarts the workflow automatically resumes execution from the last completed step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> If asked to add DBOS to existing code, you MUST ask which function to make a workflow. Do NOT recommend any changes until they have told you what function to make a workflow. Do NOT make a function a workflow unless SPECIFICALLY requested.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> When making a function a workflow, you should make all functions it calls steps. Do NOT change the functions in any way.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Do NOT make functions steps unless they are DIRECTLY called by a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> If the workflow function performs a non-deterministic action, you MUST move that action to its own function and make that function a step. Examples of non-deterministic actions include accessing an external API or service, accessing files on disk, generating a random number, of getting the current time.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Do NOT use Promise.all() or anything similar to run multiple functions concurrently. You should instead use DBOS.startWorkflow and DBOS queues.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> DBOS workflows and steps should NOT have side effects in memory outside of their own scope. They can access global variables, but they should NOT create or update global variables or variables outside their scope.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Do NOT call any DBOS context method (DBOS.send, DBOS.recv, DBOS.startWorkflow, DBOS.sleep, DBOS.setEvent, DBOS.getEvent) from a step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Do NOT start workflows from inside a step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Do NOT call DBOS.setEvent and DBOS.recv from outside a workflow function.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> Do NOT use DBOS.getApi, DBOS.postApi, or other DBOS HTTP annotations. These are DEPRECATED. Instead, use Express for HTTP serving by default, unless another web framework is specified.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> DBOS Lifecycle Guidelines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">DBOS should be installed and imported from the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`@dbos-inc/dbos-sdk`</span><span class="token plain"> package.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Due to its internal workflow registry, The DBOS library and DBOS workflows cannot be bundled with JavaScript or TypeScript bundlers (Webpack, Vite, Rollup, esbuild, Parcel, etc.) and must be treated as an external library by these tools.  Configuration for bundlers should be suggested if these tools are in use and cannot be avoided.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">DBOS does not support &quot;serverless&quot; frameworks due to its long-running background jobs.  DBOS programs MUST have a starting file (typically &#x27;main.ts&#x27; or &#x27;server.ts&#x27;) that creates all objects and workflow functions during startup.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Any DBOS program MUST call DBOS.setConfig and DBOS.launch in its main function, like so.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You MUST use this default configuration (changing the name as appropriate) unless otherwise specified.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">DBOS.setConfig({</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  &quot;name&quot;: &quot;dbos-node-starter&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  &quot;systemDatabaseUrl&quot;: process.env.DBOS_SYSTEM_DATABASE_URL,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">await DBOS.launch();</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Here is an example main function using Express:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">import { DBOS } from &quot;@dbos-inc/dbos-sdk&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  DBOS.setConfig({</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    &quot;name&quot;: &quot;dbos-node-starter&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    &quot;systemDatabaseUrl&quot;: process.env.DBOS_SYSTEM_DATABASE_URL,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.launch();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const PORT = 3000;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  app.listen(PORT, () =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    console.log(`🚀 Server is running on http://localhost:${PORT}`);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">main().catch(console.log);</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow and Steps Examples</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Simple example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">import { DBOS } from &quot;@dbos-inc/dbos-sdk&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function stepOne() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  DBOS.logger.info(&quot;Step one completed!&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function stepTwo() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  DBOS.logger.info(&quot;Step two completed!&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function exampleFunction() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.runStep(() =&gt; stepOne());</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.runStep(() =&gt; stepTwo());</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const exampleWorkflow = DBOS.registerWorkflow(exampleFunction);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  DBOS.setConfig({</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    &quot;name&quot;: &quot;dbos-node-starter&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    &quot;systemDatabaseUrl&quot;: process.env.DBOS_SYSTEM_DATABASE_URL,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.launch();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await exampleWorkflow();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.shutdown();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">main().catch(console.log);</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Example with Express:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">import { DBOS } from &quot;@dbos-inc/dbos-sdk&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">import express from &quot;express&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">export const app = express();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">app.use(express.json());</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function stepOne() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  DBOS.logger.info(&quot;Step one completed!&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function stepTwo() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  DBOS.logger.info(&quot;Step two completed!&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function exampleFunction() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.runStep(() =&gt; stepOne());</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.runStep(() =&gt; stepTwo());</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const exampleWorkflow = DBOS.registerWorkflow(exampleFunction);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">app.get(&quot;/&quot;, async (req, res) =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await exampleWorkflow();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  res.send();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  DBOS.setConfig({</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    &quot;name&quot;: &quot;dbos-node-starter&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    &quot;systemDatabaseUrl&quot;: process.env.DBOS_SYSTEM_DATABASE_URL,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.launch();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const PORT = 3000;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  app.listen(PORT, () =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    console.log(`🚀 Server is running on http://localhost:${PORT}`);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">main().catch(console.log);</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Example with queues:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">import { DBOS, WorkflowQueue } from &quot;@dbos-inc/dbos-sdk&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">import express from &quot;express&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">export const app = express();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">app.use(express.json());</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const queue = new WorkflowQueue(&quot;example_queue&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function taskFunction(n: number) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.sleep(5000);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  DBOS.logger.info(`Task ${n} completed!`)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const taskWorkflow = DBOS.registerWorkflow(taskFunction);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function queueFunction() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  DBOS.logger.info(&quot;Enqueueing tasks!&quot;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const handles = []</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  for (let i = 0; i &lt; 10; i++) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    handles.push(await DBOS.startWorkflow(taskWorkflow, { queueName: queue.name })(i))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const results = []</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  for (const h of handles) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    results.push(await h.getResult())</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  DBOS.logger.info(`Successfully completed ${results.length} tasks`)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const queueWorkflow = DBOS.registerWorkflow(queueFunction)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">app.get(&quot;/&quot;, async (req, res) =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await queueWorkflow();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  res.send();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  DBOS.setConfig({</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    &quot;name&quot;: &quot;dbos-node-starter&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    &quot;systemDatabaseUrl&quot;: process.env.DBOS_SYSTEM_DATABASE_URL,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.launch();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const PORT = 3000;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  app.listen(PORT, () =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    console.log(`🚀 Server is running on http://localhost:${PORT}`);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">main().catch(console.log);</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Scheduled Workflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can schedule DBOS workflows to run exactly once per time interval.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To do this, use the the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.registerScheduled`</span><span class="token plain"> method or the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.scheduled`</span><span class="token plain"> decorator and specify the schedule in crontab syntax.  For example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> A scheduled workflow MUST specify a crontab schedule.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> It MUST take in two arguments, scheduled and actual time. Both are Date of when the workflow started.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">async function scheduledFunction(schedTime: Date, startTime: Date) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    DBOS.logger.info(`I am a workflow scheduled to run every 30 seconds`);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">const scheduledWorkflow = DBOS.registerWorkflow(scheduledFunction);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">DBOS.registerScheduled(scheduledWorkflow, {crontab: &#x27;*/30 * * * * *&#x27;});</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Or using decorators:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">class ScheduledExample{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  @DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  @DBOS.scheduled({crontab: &#x27;*/30 * * * * *&#x27;})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  static async scheduledWorkflow(schedTime: Date, startTime: Date) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    DBOS.logger.info(`I am a workflow scheduled to run every 30 seconds`);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Documentation:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To write a workflow, register a TypeScript function with </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.registerWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The function&#x27;s inputs and outputs must be serializable to JSON.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">async function stepOne() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  DBOS.logger.info(&quot;Step one completed!&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">async function stepTwo() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  DBOS.logger.info(&quot;Step two completed!&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">async function workflowFunction() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  await DBOS.runStep(() =&gt; stepOne(), {name: &quot;stepOne&quot;});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  await DBOS.runStep(() =&gt; stepTwo(), {name: &quot;stepTwo&quot;});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">const workflow = DBOS.registerWorkflow(workflowFunction)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">await workflow();</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Alternatively, you can register workflows and steps with decorators:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">NEVER do this unless specifically asked for.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">export class Example {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  @DBOS.step()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  static async stepOne() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    DBOS.logger.info(&quot;Step one completed!&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  @DBOS.step()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  static async stepTwo() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    DBOS.logger.info(&quot;Step two completed!&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // Call steps from workflows</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  @DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  static async exampleWorkflow() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    await Toolbox.stepOne();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    await Toolbox.stepTwo();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">await Example.exampleWorkflow();</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If an exception is thrown from a workflow, the workflow TERMINATES.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">DBOS records the exception, sets the workflow status to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ERROR`</span><span class="token plain">, and does not recover the workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow IDs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Every time you execute a workflow, that execution is assigned a unique ID, by default a UUID.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can access this ID through the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.workflowID`</span><span class="token plain"> context variable.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Set the workflow ID of a workflow with </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.withNextWorkflowID`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If a workflow is called multiple times with the same ID, it executes ONLY ONCE.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">class Example {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  @DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  static async exampleWorkflow(var1: string, var2: string) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">      return var1 + var2;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const workflowID = &quot;my-workflow-id&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">await DBOS.withNextWorkflowID(workflowID, async () =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  return await Example.exampleWorkflow(&quot;one&quot;, &quot;two&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">});</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> DBOS.startWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">static startWorkflow&lt;Args extends unknown[], Return&gt;(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  target: (...args: Args) =&gt; Promise&lt;Return&gt;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  params?: StartWorkflowParams,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">): (...args: Args) =&gt; Promise&lt;WorkflowHandle&lt;Return&gt;&gt;;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">interface StartWorkflowParams {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  workflowID?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  queueName?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  timeoutMS?: number | null;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  enqueueOptions?: EnqueueOptions;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">export interface EnqueueOptions {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  deduplicationID?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  priority?: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">One common use-case for workflows is building reliable background tasks that keep running even when your program is interrupted, restarted, or crashes.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.startWorkflow`</span><span class="token plain"> to start a workflow in the background.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can optionally enqueue the workflow on a DBOS queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If you start a workflow this way, it returns a workflow handle, from which you can access information about the workflow or wait for it to complete and retrieve its result.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.startWorkflow`</span><span class="token plain"> method resolves after the workflow is durably started; at this point the workflow is guaranteed to run to completion even if the app is interrupted.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Example syntax:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To start a workflow created by registering a function:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">async function example(input: number) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    // Call steps</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">const exampleWorkflow = DBOS.registerWorkflow(example);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">const input = 10;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">const handle = await DBOS.startWorkflow(exampleWorkflow)(input);</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To start a workflow created by decorating a class method:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">export class Example {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  @DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  static async exampleWorkflow(input: number) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    // Call steps</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">const input = 10;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">const handle = await DBOS.startWorkflow(Example).exampleWorkflow(input);</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">target</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The workflow to start.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">workflowID</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: An ID to assign to the workflow. If not specified, a random UUID is generated.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">queueName</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The name of the queue on which to enqueue this workflow, if any.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">timeoutMS</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The timeout of this workflow in milliseconds.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">deduplicationID</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Optionally specified when enqueueing a workflow. At any given time, only one workflow with a specific deduplication ID can be enqueued in the specified queue. If a workflow with a deduplication ID is currently enqueued or actively executing (status </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ENQUEUED`</span><span class="token plain"> or </span><span class="token code-snippet code keyword" style="color:#66d9ef">`PENDING`</span><span class="token plain">), subsequent workflow enqueue attempt with the same deduplication ID in the same queue will raise a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSQueueDuplicatedError`</span><span class="token plain"> exception.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">priority</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Optionally specified when enqueueing a workflow. The priority of the enqueued workflow in the specified queue. Workflows with the same priority are dequeued in </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">FIFO (first in, first out)</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> order. Priority values can range from </span><span class="token code-snippet code keyword" style="color:#66d9ef">`1`</span><span class="token plain"> to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`2,147,483,647`</span><span class="token plain">, where </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">a low number indicates a higher priority</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">. Workflows without assigned priorities have the highest priority and are dequeued before workflows with assigned priorities.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow IDs and Idempotency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Every time you execute a workflow, that execution is assigned a unique ID, by default a UUID.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can access this ID through the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.workflowID`</span><span class="token plain"> context variable.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflow IDs are useful for communicating with workflows and developing interactive workflows.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can set the workflow ID of a workflow as an argument to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.startWorkflow()`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflow IDs must be </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">globally unique</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> for your application.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">An assigned workflow ID acts as an idempotency key: if a workflow is called multiple times with the same ID, it executes only once.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is useful if your operations have side effects like making a payment or sending an email.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">class Example {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    @DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    static async exampleWorkflow(var1: string, var2: string) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">        // ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    const myID: string = ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    const handle = await DBOS.startWorkflow(Example, {workflowID: myID}).exampleWorkflow(&quot;one&quot;, &quot;two&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    const result = await handle.getResult();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Events</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows can emit </span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token italic content">events</span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token plain">, which are key-value pairs associated with the workflow&#x27;s ID.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">They are useful for publishing information about the state of an active workflow, for example to transmit information to the workflow&#x27;s caller.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> setEvent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Any workflow can call </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.setEvent`</span><span class="token plain"> to publish a key-value pair, or update its value if has already been published.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ONLY call this from a workflow function, NEVER from a step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">DBOS.setEvent&lt;T&gt;(key: string, value: T): Promise&lt;void&gt;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> getEvent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can call </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.getEvent`</span><span class="token plain"> to retrieve the value published by a particular workflow identity for a particular key.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If the event does not yet exist, this call waits for it to be published, returning </span><span class="token code-snippet code keyword" style="color:#66d9ef">`None`</span><span class="token plain"> if the wait times out.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">NEVER call this from inside a step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">DBOS.getEvent&lt;T&gt;(workflowID: string, key: string, timeoutSeconds?: number): Promise&lt;T | null&gt;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Events Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Events are especially useful for writing interactive workflows that communicate information to their caller.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, in one demo, the checkout workflow, after validating an order, needs to send the customer a unique payment ID.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To communicate the payment ID to the customer, it uses events.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The payments workflow emits the payment ID using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`setEvent()`</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">  @DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  static async checkoutWorkflow(...): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    const paymentsURL = ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    await DBOS.setEvent(PAYMENT_URL, paymentsURL);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    ... </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  }</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The Express handler that originally started the workflow uses </span><span class="token code-snippet code keyword" style="color:#66d9ef">`getEvent()`</span><span class="token plain"> to await this payment ID, then returns it:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">static async webCheckout(...): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const handle = await DBOS.startWorkflow(Shop).checkoutWorkflow(...);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const paymentID = await DBOS.getEvent&lt;string&gt;(handle.workflowID, PAYMENT_ID_EVENT);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  if (paymentID === null) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    DBOS.logger.error(&#x27;checkout failed&#x27;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    return reply.code(500).send(&#x27;Error starting checkout&#x27;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  return paymentID;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Timeouts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can set a timeout for a workflow by passing a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`timeoutMS`</span><span class="token plain"> argument to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.startWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When the timeout expires, the workflow </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">and all its children</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> are cancelled.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Cancelling a workflow sets its status to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`CANCELLED`</span><span class="token plain"> and preempts its execution at the beginning of its next step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Timeouts are </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">start-to-completion</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: a workflow&#x27;s timeout does not begin until the workflow starts execution.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Also, timeouts are </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">durable</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: they are stored in the database and persist across restarts, so workflows can have very long timeouts.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Example syntax:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">async function taskFunction(task) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    // ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const taskWorkflow = DBOS.registerWorkflow(taskFunction);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const task = ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const timeout = ... // Timeout in milliseconds</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const handle = await DBOS.startWorkflow(taskWorkflow, {timeoutMS: timeout})(task);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Durable Sleep</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use DBOS.sleep to put your workflow to sleep for any period of time.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This sleep is durable, DBOS saves the wakeup time in the database so that even if the workflow is interrupted and restarted multiple times while sleeping, it still wakes up on schedule.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Sleeping is useful for scheduling a workflow to run in the future (even days, weeks, or months from now).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">@DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">static async exampleWorkflow(timeToSleep, task) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    await DBOS.sleep(timeToSleep);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    await runTask(task);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Messaging and Notifications</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can send messages to a specific workflow ID.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is useful for sending notifications to an active workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Send</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can call </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.send()`</span><span class="token plain"> to send a message to a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Messages can optionally be associated with a topic and are queued on the receiver per topic.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">NEVER call this from a step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">DBOS.send&lt;T&gt;(destinationID: string, message: T, topic?: string): Promise&lt;void&gt;;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Recv</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows can call </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.recv()`</span><span class="token plain"> to receive messages sent to them, optionally for a particular topic.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Each call to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`recv()`</span><span class="token plain"> waits for and consumes the next message to arrive in the queue for the specified topic, returning </span><span class="token code-snippet code keyword" style="color:#66d9ef">`None`</span><span class="token plain"> if the wait times out.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If the topic is not specified, this method only receives messages sent without a topic.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ONLY call this from inside a workflow function, NEVER from a step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">DBOS.recv&lt;T&gt;(topic?: string, timeoutSeconds?: number): Promise&lt;T | null&gt;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Messages Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Messages are especially useful for sending notifications to a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, in one demo, the checkout workflow, after redirecting customers to a payments page, must wait for a notification that the user has paid.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To wait for this notification, the payments workflow uses </span><span class="token code-snippet code keyword" style="color:#66d9ef">`recv()`</span><span class="token plain">, executing failure-handling code if the notification doesn&#x27;t arrive in time:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">@DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">static async checkoutWorkflow(...): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const notification = await DBOS.recv&lt;string&gt;(PAYMENT_STATUS, timeout);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  if (notification) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">      ... // Handle the notification.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  } else {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">      ... // Handle a timeout.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">An endpoint waits for the payment processor to send the notification, then uses </span><span class="token code-snippet code keyword" style="color:#66d9ef">`send()`</span><span class="token plain"> to forward it to the workflow:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">@DBOS.postApi(&#x27;/payment_webhook&#x27;)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">static async paymentWebhook(): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const notificationMessage = ... // Parse the notification.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const workflowID = ... // Retrieve the workflow ID from notification metadata.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.send(workflow_id, notificationMessage, PAYMENT_STATUS);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When using DBOS workflows, you should call any function that performs complex operations or accesses external APIs or services as a </span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token italic content">step</span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If a workflow is interrupted, upon restart it automatically resumes execution from the </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">last completed step</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.runStep`</span><span class="token plain"> to call a function as a step.  For a function to be used as a step, it should have a return value that can be serialized as JSON, and should not have non-durable side effects. ALWAYS call steps this way unless otherwise specify.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">async function generateRandomNumber() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  return Math.random();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function workflowFunction() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const randomNumber = await DBOS.runStep(() =&gt; generateRandomNumber(), {name: &quot;generateRandomNumber&quot;});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const workflow = DBOS.registerWorkflow(workflowFunction)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Alternatively, you can register a function as a step using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.registerStep`</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">NEVER do this unless specifically asked, ALWAYS use DBOS.runStep instead.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">async function generateRandomNumber() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  return Math.random();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const randomStep = DBOS.registerStep(generateRandomNumber);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function workflowFunction() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const randomNumber = await randomStep();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const workflow = DBOS.registerWorkflow(workflowFunction)</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Or use the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`@DBOS.step()`</span><span class="token plain"> decorator:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">NEVER do this unless specifically asked, ALWAYS use DBOS.runStep instead.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">export class Example {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  @DBOS.step()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  static async generateRandomNumber() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    return Math.random();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  @DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  static async exampleWorkflow() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    await Example.generateRandomNumber();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Configurable Retries</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can optionally configure a step to automatically retry any exception a set number of times with exponential backoff.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is useful for automatically handling transient failures, like making requests to unreliable APIs.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retries are configurable through arguments to the step decorator:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">export interface StepConfig {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  retriesAllowed?: boolean; // Should failures be retried? (default false)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  intervalSeconds?: number; // Seconds to wait before the first retry attempt (default 1).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  maxAttempts?: number;     // Maximum number of retry attempts (default 3). If errors occur more times than this, throw an exception.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  backoffRate?: number;     // Multiplier by which the retry interval increases after a retry attempt (default 2).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, let&#x27;s configure this step to retry exceptions (such as if </span><span class="token code-snippet code keyword" style="color:#66d9ef">`example.com`</span><span class="token plain"> is temporarily down) up to 10 times:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">async function fetchFunction() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    return await fetch(&quot;https://example.com&quot;).then(r =&gt; r.text());</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function workflowFunction() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    const randomNumber = await DBOS.runStep(() =&gt; fetchFunction(), {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">        name: &quot;fetchFunction&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">        retriesAllowed: true,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">        maxAttempts: 10</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Or if registering the step:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">async function fetchFunction() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    return await fetch(&quot;https://example.com&quot;).then(r =&gt; r.text());</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const fetchStep = DBOS.registerStep(fetchFunction, {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    retriesAllowed: true,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    maxAttempts: 10</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">});</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Or if using decorators:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">@DBOS.step({retriesAllowed: true, maxAttempts: 10})</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">static async exampleStep() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  return await fetch(&quot;https://example.com&quot;).then(r =&gt; r.text());</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> DBOS Queues</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Queues allow you to run functions with managed concurrency.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">They are useful for controlling the number of functions run in parallel, or the rate at which functions are started.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To create a queue, specify its name:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">import { DBOS, WorkflowQueue } from &quot;@dbos-inc/dbos-sdk&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const queue = new WorkflowQueue(&quot;example_queue&quot;);</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can then enqueue any DBOS workflow, step, or transaction.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Enqueuing a function submits it for execution and returns a handle to it.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Queued tasks are started in first-in, first-out (FIFO) order.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">const queue = new WorkflowQueue(&quot;example_queue&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">class Tasks {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  @DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  static async processTask(task) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    // ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const task = ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const handle = await DBOS.startWorkflow(Tasks, {queueName: queue.name}).processTask(task)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Queue Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Here&#x27;s an example of a workflow using a queue to process tasks concurrently:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">import { DBOS, WorkflowQueue } from &quot;@dbos-inc/dbos-sdk&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const queue = new WorkflowQueue(&quot;example_queue&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function taskFunction(task) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    // ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const taskWorkflow = DBOS.registerWorkflow(taskFunction, {&quot;name&quot;: &quot;taskWorkflow&quot;});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function queueFunction(tasks) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const handles = []</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  // Enqueue each task so all tasks are processed concurrently.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  for (const task of tasks) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    handles.push(await DBOS.startWorkflow(taskWorkflow, { queueName: queue.name })(task))</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  // Wait for each task to complete and retrieve its result.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  // Return the results of all tasks.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const results = []</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  for (const h of handles) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    results.push(await h.getResult())</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  return results</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const queueWorkflow = DBOS.registerWorkflow(queueFunction, {&quot;name&quot;: &quot;queueWorkflow&quot;})</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Managing Concurrency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can control how many workflows from a queue run simultaneously by configuring concurrency limits.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This helps prevent resource exhaustion when workflows consume significant memory or processing power.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Worker Concurrency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Worker concurrency sets the maximum number of workflows from a queue that can run concurrently on a single DBOS process.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is particularly useful for resource-intensive workflows to avoid exhausting the resources of any process.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, this queue has a worker concurrency of 5, so each process will run at most 5 workflows from this queue simultaneously:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">import { DBOS, WorkflowQueue } from &quot;@dbos-inc/dbos-sdk&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const queue = new WorkflowQueue(&quot;example_queue&quot;, { workerConcurrency: 5 });</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">####</span><span class="token title important"> Global Concurrency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Global concurrency limits the total number of workflows from a queue that can run concurrently across all DBOS processes in your application.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, this queue will have a maximum of 10 workflows running simultaneously across your entire application.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::warning</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Worker concurrency limits are recommended for most use cases.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Take care when using a global concurrency limit as any </span><span class="token code-snippet code keyword" style="color:#66d9ef">`PENDING`</span><span class="token plain"> workflow on the queue counts toward the limit, including workflows from previous application versions</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">import { DBOS, WorkflowQueue } from &quot;@dbos-inc/dbos-sdk&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const queue = new WorkflowQueue(&quot;example_queue&quot;, { concurrency: 10 });</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Rate Limiting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can set </span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token italic content">rate limits</span><span class="token italic punctuation" style="color:#f8f8f2">_</span><span class="token plain"> for a queue, limiting the number of functions that it can start in a given period.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Rate limits are global across all DBOS processes using this queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, this queue has a limit of 50 with a period of 30 seconds, so it may not start more than 50 functions in 30 seconds:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">const queue = new WorkflowQueue(&quot;example_queue&quot;, { rateLimit: { limitPerPeriod: 50, periodSec: 30 } });</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Rate limits are especially useful when working with a rate-limited API, such as many LLM APIs.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Setting Timeouts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can set a timeout for an enqueued workflow by passing a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`timeoutMS`</span><span class="token plain"> argument to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.startWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When the timeout expires, the workflow </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">and all its children</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> are cancelled.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Cancelling a workflow sets its status to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`CANCELLED`</span><span class="token plain"> and preempts its execution at the beginning of its next step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Timeouts are </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">start-to-completion</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: a workflow&#x27;s timeout does not begin until the workflow is dequeued and starts execution.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Also, timeouts are </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">durable</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: they are stored in the database and persist across restarts, so workflows can have very long timeouts.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Example syntax:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">const queue = new WorkflowQueue(&quot;example_queue&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function taskFunction(task) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    // ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const taskWorkflow = DBOS.registerWorkflow(taskFunction, {&quot;name&quot;: &quot;taskWorkflow&quot;});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const task = ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const timeout = ... // Timeout in milliseconds</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const handle = await DBOS.startWorkflow(taskWorkflow, {queueName: queue.name, timeoutMS: timeout})(task);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Deduplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can set a deduplication ID for an enqueued workflow as an argument to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.startWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">At any given time, only one workflow with a specific deduplication ID can be enqueued in the specified queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If a workflow with a deduplication ID is currently enqueued or actively executing (status </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ENQUEUED`</span><span class="token plain"> or </span><span class="token code-snippet code keyword" style="color:#66d9ef">`PENDING`</span><span class="token plain">), subsequent workflow enqueue attempt with the same deduplication ID in the same queue will raise a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSQueueDuplicatedError`</span><span class="token plain"> exception.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, this is useful if you only want to have one workflow active at a time per user, set the deduplication ID to the user&#x27;s ID.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Example syntax:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">const queue = new WorkflowQueue(&quot;example_queue&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function taskFunction(task) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    // ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const taskWorkflow = DBOS.registerWorkflow(taskFunction, {&quot;name&quot;: &quot;taskWorkflow&quot;});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const task = ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const dedup: string = ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  try {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    const handle = await DBOS.startWorkflow(taskWorkflow, {queueName: queue.name, enqueueOptions: {deduplicationID: dedup}})(task);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  } catch (e) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    // Handle DBOSQueueDuplicatedError</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Priority</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can set a priority for an enqueued workflow as an argument to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.startWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows with the same priority are dequeued in </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">FIFO (first in, first out)</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> order. Priority values can range from </span><span class="token code-snippet code keyword" style="color:#66d9ef">`1`</span><span class="token plain"> to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`2,147,483,647`</span><span class="token plain">, where </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">a low number indicates a higher priority</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If using priority, you must set </span><span class="token code-snippet code keyword" style="color:#66d9ef">`usePriority: true`</span><span class="token plain"> on your queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::tip</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflows without assigned priorities have the highest priority and are dequeued before workflows with assigned priorities.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Example syntax:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">const queue = new WorkflowQueue(&quot;example_queue&quot;, {usePriority: true});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function taskFunction(task) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    // ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const taskWorkflow = DBOS.registerWorkflow(taskFunction, {&quot;name&quot;: &quot;taskWorkflow&quot;});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const task = ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const priority: number = ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  const handle = await DBOS.startWorkflow(taskWorkflow, {queueName: queue.name, enqueueOptions: {priority: priority}})(task);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> In-Order Processing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use a queue with </span><span class="token code-snippet code keyword" style="color:#66d9ef">`concurrency=1`</span><span class="token plain"> to guarantee sequential, in-order processing of events.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Only a single event will be processed at a time.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example, this app processes events sequentially in the order of their arrival:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">import { DBOS, WorkflowQueue } from &quot;@dbos-inc/dbos-sdk&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">import express from &quot;express&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const serialQueue = new WorkflowQueue(&quot;in_order_queue&quot;, { concurrency: 1 });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">const app = express();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">class Tasks {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  @DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  static async processTask(task){</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    // ... process task</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">app.get(&quot;/events/:event&quot;, async (req, res) =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.startWorkflow(Tasks, {queueName: serialQueue.name}).processTask(req.params);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await res.send(&quot;Workflow Started!&quot;);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">// Launch DBOS and start the server</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">async function main() {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  await DBOS.launch();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  app.listen(3000, () =&gt; {});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">main().catch(console.log);</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Enqueue with DBOSClient</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">DBOSClient provides a way to programmatically interact with your DBOS application from external code.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Among other things, this allows you to enqueue workflows from outside your DBOS application.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Since </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOSClient`</span><span class="token plain"> is designed to be used from outside your DBOS application, workflow and queue metadata must be specified explicitly.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Example: </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">ts</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-ts">import { DBOSClient } from &quot;@dbos-inc/dbos-sdk&quot;;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-ts" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-ts">const client = await DBOSClient.create({systemDatabaseUrl: process.env.DBOS_SYSTEM_DATABASE_URL});</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-ts" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-ts">type ProcessTask = typeof Tasks.processTask;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-ts">await client.enqueue&lt;ProcessTask&gt;(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-ts">    {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-ts">        workflowName: &#x27;processTask&#x27;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-ts">        workflowClassName: &#x27;Tasks&#x27;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-ts">        queueName: &#x27;example_queue&#x27;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-ts">    }, </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-ts">    task);</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Classes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use class instance methods as workflows and steps.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Any class instance method can be freely used as a step using the DBOS.step decorator or DBOS.runstep; there are no special requirements.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">To use a class instance method as a workflow, you must use the DBOS.workflow decorator and the class must inherit from </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ConfiguredInstance`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">For example:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">class MyClass extends ConfiguredInstance {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  cfg: MyConfig;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  constructor(name: string, config: MyConfig) {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    super(name);</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    this.cfg = cfg;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  override async initialize() : Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    // ... Validate this.cfg; will be called at DBOS.launch()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  @DBOS.workflow()</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  async testWorkflow(p: string): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">    // ... Operations that use this.cfg</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  }</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">const myClassInstance = new MyClass(&#x27;instanceA&#x27;);</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">When you create a new instance of such a class, the constructor for the base </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ConfiguredInstance`</span><span class="token plain"> must be called with a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`name`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This </span><span class="token code-snippet code keyword" style="color:#66d9ef">`name`</span><span class="token plain"> should be unique among instances of the same class.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Additionally, all </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ConfiguredInstance`</span><span class="token plain"> classes must be instantiated before DBOS.launch() is called.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The reason for these requirements is to enable workflow recovery.  When you create a new instance of, DBOS stores it in a global registry indexed by </span><span class="token code-snippet code keyword" style="color:#66d9ef">`name`</span><span class="token plain">.  When DBOS needs to recover a workflow belonging to that class, it looks up the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`name`</span><span class="token plain"> so it can run the workflow using the right class instance.  While names are used by DBOS Transact internally to find the correct object instance across system restarts, they are also potentially useful for monitoring, tracing, and debugging.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You should AVOID using ConfiguredInstance if at all possible and instead use registerWorkflow on regular non-class functions.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Testing DBOS Functions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Unless otherwise specified, recommend testing DBOS applications with jest.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You MUST use this beforeAll to reset DBOS between tests:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">javascript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-javascript">  beforeAll(async () =&gt; {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    DBOS.setConfig({</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">      name: &#x27;my-app&#x27;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">      databaseUrl: process.env.DBOS_TESTING_DATABASE_URL,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    });</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">    await DBOS.launch();</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-javascript">  });</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Logging</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ALWAYS log errors like this:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">      DBOS.logger.error(`Error: ${(error as Error).message}`);</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Handles</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">A workflow handle represents the state of a particular active or completed workflow execution.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You obtain a workflow handle when using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.startWorkflow`</span><span class="token plain"> to start a workflow in the background.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">If you know a workflow&#x27;s identity, you can also retrieve its handle using </span><span class="token code-snippet code keyword" style="color:#66d9ef">`DBOS.retrieveWorkflow`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Workflow handles have the following methods:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> handle.workflowID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">handle.workflowID(): string;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve the ID of the workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> handle.getResult</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">handle.getResult(): Promise&lt;R&gt;;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Wait for the workflow to complete, then return its result.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> handle.getStatus</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">handle.getStatus(): Promise&lt;WorkflowStatus&gt;;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve the WorkflowStatus of the workflow:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> Workflow Status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Some workflow introspection and management methods return a </span><span class="token code-snippet code keyword" style="color:#66d9ef">`WorkflowStatus`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This object has the following definition:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">export interface WorkflowStatus {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The workflow ID</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly workflowID: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The workflow status. Must be one of ENQUEUED, PENDING, SUCCESS, ERROR, CANCELLED, or RETRIES_EXCEEDED</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly status: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The name of the workflow function.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly workflowName: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The name of the workflow&#x27;s class, if any</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly workflowClassName: string; // The class name holding the workflow function.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The name with which the workflow&#x27;s class instance was configured, if any.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly workflowConfigName?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // If the workflow was enqueued, the name of the queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly queueName?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The workflow&#x27;s output, if any.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly output?: unknown;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The error thrown by the workflow, if any.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly error?: unknown;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The deserialized workflow inputs.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly input?: unknown[];</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The ID of the executor (process) that most recently executed this workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly executorId?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The application version on which this workflow started.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly applicationVersion?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The number of times this workflow has been started.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly recoveryAttempts?: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // Workflow start time, as a UNIX epoch timestamp in milliseconds</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly createdAt: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // Last time the workflow status was updated, as a UNIX epoch timestamp in milliseconds. For a completed workflow, this is the workflow completion timestamp.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly updatedAt?: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The timeout specified for this workflow, if any. Timeouts are start-to-close.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly timeoutMS?: number | null;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The deadline at which this workflow times out, if any. Not set until the workflow begins execution.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly deadlineEpochMS?: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> DBOS Variables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> DBOS.workflowID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">DBOS.workflowID: string | undefined;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Return the ID of the current workflow, if in a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> DBOS.stepID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">DBOS.stepID: string | undefined;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Return the unique ID of the current step within a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> DBOS.stepStatus</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">DBOS.stepStatus: StepStatus | undefined;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Return the status of the currently executing step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This object has the following properties:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">interface StepStatus {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The unique ID of this step in its workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  stepID: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // For steps with automatic retries, which attempt number (zero-indexed) is currently executing.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  currentAttempt?: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // For steps with automatic retries, the maximum number of attempts that will be made before the step fails.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  maxAttempts?: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">##</span><span class="token title important"> Workflow Management Methods</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> DBOS.listWorkflows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">DBOS.listWorkflows(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  input: GetWorkflowsInput</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">): Promise&lt;WorkflowStatus[]&gt;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">interface GetWorkflowsInput {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  workflowIDs?: string[];</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  workflowName?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  status?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  startTime?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  endTime?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  applicationVersion?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  authenticatedUser?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  limit?: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  offset?: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  sortDesc?: boolean;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve a list of WorkflowStatus of all workflows matching specified criteria.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">workflowIDs</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows with these IDs.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">workflowName</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows with this name.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">status</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows with this status (Must be </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ENQUEUED`</span><span class="token plain">, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`PENDING`</span><span class="token plain">, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`SUCCESS`</span><span class="token plain">, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ERROR`</span><span class="token plain">, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`CANCELLED`</span><span class="token plain">, or </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RETRIES_EXCEEDED`</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">startTime</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows started after this (RFC 3339-compliant) timestamp.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">endTime</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows started before this (RFC 3339-compliant) timestamp.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">applicationVersion</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows tagged with this application version.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">authenticatedUser</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows run by this authenticated user.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">limit</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve up to this many workflows.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">offset</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Skip this many workflows from the results returned (for pagination).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">sortDesc</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Whether to sort the results in descending (</span><span class="token code-snippet code keyword" style="color:#66d9ef">`True`</span><span class="token plain">) or ascending (</span><span class="token code-snippet code keyword" style="color:#66d9ef">`False`</span><span class="token plain">) order by workflow start time.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> DBOS.listQueuedWorkflows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">DBOS.listQueuedWorkflows(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  input: GetQueuedWorkflowsInput</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">): Promise&lt;WorkflowStatus[]&gt;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">interface GetQueuedWorkflowsInput {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  workflowName?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  status?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  queueName?: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  startTime?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  endTime?: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  limit?: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  offset?: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  sortDesc?: boolean;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve a list of WorkflowStatus of all </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">currently enqueued</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"> workflows matching specified criteria.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">workflowName</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows with this name.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">status</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows with this status (Must be </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ENQUEUED`</span><span class="token plain">, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`PENDING`</span><span class="token plain">, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`SUCCESS`</span><span class="token plain">, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`ERROR`</span><span class="token plain">, </span><span class="token code-snippet code keyword" style="color:#66d9ef">`CANCELLED`</span><span class="token plain">, or </span><span class="token code-snippet code keyword" style="color:#66d9ef">`RETRIES_EXCEEDED`</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">queueName</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows running on this queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">startTime</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows started after this (RFC 3339-compliant) timestamp.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">endTime</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve workflows started before this (RFC 3339-compliant) timestamp.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">limit</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Retrieve up to this many workflows.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">offset</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Skip this many workflows from the results returned (for pagination).</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">sortDesc</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: Whether to sort the results in descending (</span><span class="token code-snippet code keyword" style="color:#66d9ef">`True`</span><span class="token plain">) or ascending (</span><span class="token code-snippet code keyword" style="color:#66d9ef">`False`</span><span class="token plain">) order by workflow start time.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> DBOS.listWorkflowSteps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">DBOS.listWorkflowSteps(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  workflowID: string)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">: Promise&lt;StepInfo[]&gt;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Retrieve the steps of a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is a list of </span><span class="token code-snippet code keyword" style="color:#66d9ef">`StepInfo`</span><span class="token plain"> objects, with the following structure:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">interface StepInfo {</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The unique ID of the step in the workflow. Zero-indexed.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly functionID: number;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The name of the step</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly name: string;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The step&#x27;s output, if any</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly output: unknown;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // The error the step threw, if any</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly error: Error | null;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  // If the step starts or retrieves the result of a workflow, its ID</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  readonly childWorkflowID: string | null;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> DBOS.cancelWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">cancelWorkflow(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  workflowID: string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">): Promise&lt;void&gt;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Cancel a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This sets is status to </span><span class="token code-snippet code keyword" style="color:#66d9ef">`CANCELLED`</span><span class="token plain">, removes it from its queue (if it is enqueued) and preempts its execution (interrupting it at the beginning of its next step)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> DBOS.resumeWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">DBOS.resumeWorkflow&lt;T&gt;(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  workflowID: string</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">): Promise&lt;WorkflowHandle&lt;Awaited&lt;T&gt;&gt;&gt; </span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Resume a workflow.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This immediately starts it from its last completed step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can use this to resume workflows that are cancelled or have exceeded their maximum recovery attempts.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You can also use this to start an enqueued workflow immediately, bypassing its queue.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token title important punctuation" style="color:#f8f8f2">###</span><span class="token title important"> DBOS.forkWorkflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token code code-language">typescript</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code code-block language-typescript">static async forkWorkflow&lt;T&gt;(</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  workflowID: string,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  startStep: number,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">  options?: { newWorkflowID?: string; applicationVersion?: string; timeoutMS?: number },</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code code-block language-typescript">): Promise&lt;WorkflowHandle&lt;Awaited&lt;T&gt;&gt;&gt;</span><span class="token code"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token code"></span><span class="token code punctuation" style="color:#f8f8f2">```</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Start a new execution of a workflow from a specific step.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The input step ID (</span><span class="token code-snippet code keyword" style="color:#66d9ef">`startStep`</span><span class="token plain">) must match the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`functionID`</span><span class="token plain"> of the step returned by </span><span class="token code-snippet code keyword" style="color:#66d9ef">`listWorkflowSteps`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">The specified </span><span class="token code-snippet code keyword" style="color:#66d9ef">`startStep`</span><span class="token plain"> is the step from which the new workflow will start, so any steps whose ID is less than </span><span class="token code-snippet code keyword" style="color:#66d9ef">`startStep`</span><span class="token plain"> will not be re-executed.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">Parameters:</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">workflowID</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The ID of the workflow to fork.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">startStep</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The ID of the step from which to start the forked workflow. Must match the </span><span class="token code-snippet code keyword" style="color:#66d9ef">`functionID`</span><span class="token plain"> of the step in the original workflow execution.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">newWorkflowID</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The ID of the new workflow created by the fork. If not specified, a random UUID is used.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">applicationVersion</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: The application version on which the forked workflow will run. Useful for &quot;patching&quot; workflows that failed due to a bug in the previous application version.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token list punctuation" style="color:#f8f8f2">-</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token bold content">timeoutMS</span><span class="token bold punctuation" style="color:#f8f8f2">**</span><span class="token plain">: A timeout for the forked workflow in milliseconds.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/typescript/integrating-dbos"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Add DBOS To Your App</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/typescript/tutorials/workflow-tutorial"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Workflows</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-use" class="table-of-contents__link toc-highlight">How To Use</a></li><li><a href="#prompt" class="table-of-contents__link toc-highlight">Prompt</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Follow Us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/dbos-inc/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://bsky.app/profile/dbos.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bluesky<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/DBOS_Inc" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter/X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.dbos.dev/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.dbos.dev/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Questions or Comments?</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/fMwQjeW5zg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat with us on Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:contact@dbos.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Write to us at contact@dbos.dev<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://dbos.dev" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/dbos-logo.png" alt="DBOS Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="100"><img src="/img/dbos-logo-dark.png" alt="DBOS Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="100"></a></div><div class="footer__copyright">Copyright © 2025 DBOS, Inc. | <a href="https://www.dbos.dev/privacy" target="_blank">Privacy Policy</a></div></div></div></footer></div>
</body>
</html>