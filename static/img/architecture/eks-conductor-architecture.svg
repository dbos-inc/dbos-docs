<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 460" font-family="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif" font-size="13">
  <defs>
    <marker id="a" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto"><path d="M0,0 L7,2.5 L0,5" fill="#495057"/></marker>
    <marker id="b" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto"><path d="M0,0 L7,2.5 L0,5" fill="#0d6efd"/></marker>
    <marker id="g" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto"><path d="M0,0 L7,2.5 L0,5" fill="#6c757d"/></marker>
  </defs>

  <!-- EKS cluster background -->
  <rect x="30" y="90" width="660" height="340" rx="10" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1.5"/>
  <text x="50" y="115" font-size="11" fill="#868e96" font-weight="500">EKS Cluster</text>

  <!-- dbos namespace background -->
  <rect x="50" y="170" width="450" height="240" rx="8" fill="#fff" stroke="#e9ecef" stroke-width="1" stroke-dasharray="6"/>
  <text x="68" y="192" font-size="10" fill="#adb5bd">namespace: dbos</text>

  <!-- Users -->
  <rect x="300" y="10" width="100" height="32" rx="16" fill="#fff" stroke="#495057" stroke-width="1.5"/>
  <text x="350" y="31" text-anchor="middle" font-weight="600">Users</text>

  <!-- ELB -->
  <rect x="285" y="58" width="130" height="28" rx="6" fill="#fff3cd" stroke="#e6a817" stroke-width="1"/>
  <text x="350" y="77" text-anchor="middle" font-size="12">AWS ELB</text>

  <!-- Nginx Ingress -->
  <rect x="235" y="125" width="230" height="30" rx="6" fill="#d4edda" stroke="#28a745" stroke-width="1.2"/>
  <text x="350" y="145" text-anchor="middle" font-weight="500">Nginx Ingress (TLS)</text>

  <!-- Console -->
  <rect x="65" y="210" width="120" height="44" rx="6" fill="#cce5ff" stroke="#0d6efd" stroke-width="1.2"/>
  <text x="125" y="230" text-anchor="middle" font-weight="600" font-size="12">Console</text>
  <text x="125" y="245" text-anchor="middle" font-size="10" fill="#6c757d">:80</text>

  <!-- Conductor -->
  <rect x="205" y="210" width="120" height="44" rx="6" fill="#cce5ff" stroke="#0d6efd" stroke-width="1.2"/>
  <text x="265" y="230" text-anchor="middle" font-weight="600" font-size="12">Conductor</text>
  <text x="265" y="245" text-anchor="middle" font-size="10" fill="#6c757d">:8090</text>

  <!-- App -->
  <rect x="345" y="210" width="120" height="44" rx="6" fill="#cce5ff" stroke="#0d6efd" stroke-width="1.2"/>
  <text x="405" y="230" text-anchor="middle" font-weight="600" font-size="12">DBOS App</text>
  <text x="405" y="245" text-anchor="middle" font-size="10" fill="#6c757d">:8080</text>

  <!-- Dex -->
  <rect x="205" y="290" width="120" height="44" rx="6" fill="#e2e3e5" stroke="#6c757d" stroke-width="1"/>
  <text x="265" y="310" text-anchor="middle" font-weight="600" font-size="12">Dex</text>
  <text x="265" y="325" text-anchor="middle" font-size="10" fill="#6c757d">:5556 (OIDC)</text>

  <!-- RDS -->
  <rect x="65" y="355" width="200" height="40" rx="6" fill="#fff3cd" stroke="#e6a817" stroke-width="1"/>
  <text x="165" y="375" text-anchor="middle" font-weight="600" font-size="12">RDS PostgreSQL</text>
  <text x="165" y="389" text-anchor="middle" font-size="9" fill="#6c757d">dbos_conductor  &amp;  dbos_app</text>

  <!-- KEDA -->
  <rect x="540" y="210" width="120" height="44" rx="6" fill="#e2e3e5" stroke="#6c757d" stroke-width="1"/>
  <text x="600" y="230" text-anchor="middle" font-weight="600" font-size="12">KEDA</text>
  <text x="600" y="245" text-anchor="middle" font-size="10" fill="#6c757d">autoscaler</text>

  <!-- Sealed Secrets -->
  <rect x="540" y="290" width="120" height="44" rx="6" fill="#e2e3e5" stroke="#6c757d" stroke-width="1"/>
  <text x="600" y="310" text-anchor="middle" font-weight="600" font-size="12">Sealed Secrets</text>
  <text x="600" y="325" text-anchor="middle" font-size="10" fill="#6c757d">kube-system</text>

  <!-- ── Arrows ── -->

  <!-- Users → ELB -->
  <line x1="350" y1="42" x2="350" y2="58" stroke="#495057" stroke-width="1.2" marker-end="url(#a)"/>

  <!-- ELB → Nginx -->
  <line x1="350" y1="86" x2="350" y2="125" stroke="#495057" stroke-width="1.2" marker-end="url(#a)"/>

  <!-- Nginx → Console -->
  <line x1="290" y1="155" x2="155" y2="210" stroke="#495057" stroke-width="1" marker-end="url(#a)"/>

  <!-- Nginx → Conductor -->
  <line x1="330" y1="155" x2="280" y2="210" stroke="#495057" stroke-width="1" marker-end="url(#a)"/>

  <!-- Nginx → App -->
  <line x1="380" y1="155" x2="405" y2="210" stroke="#495057" stroke-width="1" marker-end="url(#a)"/>

  <!-- Nginx → Dex (via browser redirect) -->
  <line x1="310" y1="155" x2="240" y2="290" stroke="#6c757d" stroke-width="0.8" stroke-dasharray="4" marker-end="url(#g)"/>

  <!-- Console → Conductor (API proxy) -->
  <line x1="185" y1="232" x2="205" y2="232" stroke="#0d6efd" stroke-width="1" stroke-dasharray="4" marker-end="url(#b)"/>

  <!-- App → Conductor (WebSocket) -->
  <line x1="345" y1="228" x2="325" y2="228" stroke="#0d6efd" stroke-width="1.5" marker-end="url(#b)"/>
  <text x="335" y="221" text-anchor="middle" font-size="9" fill="#0d6efd">WSS</text>

  <!-- Conductor → Dex (JWKS) -->
  <line x1="265" y1="254" x2="265" y2="290" stroke="#6c757d" stroke-width="0.8" stroke-dasharray="4" marker-end="url(#g)"/>
  <text x="280" y="276" font-size="9" fill="#6c757d">JWKS</text>

  <!-- Conductor → RDS -->
  <line x1="230" y1="254" x2="190" y2="355" stroke="#495057" stroke-width="1" marker-end="url(#a)"/>

  <!-- App → RDS -->
  <line x1="375" y1="254" x2="220" y2="355" stroke="#495057" stroke-width="1" marker-end="url(#a)"/>

  <!-- KEDA → App (metrics) -->
  <line x1="540" y1="232" x2="465" y2="232" stroke="#6c757d" stroke-width="1" stroke-dasharray="4" marker-end="url(#g)"/>
  <text x="503" y="225" text-anchor="middle" font-size="9" fill="#6c757d">metrics</text>
</svg>
